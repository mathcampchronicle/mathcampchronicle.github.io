{"version":3,"sources":["webpack://livingdocs-gatsby-magazine/./node_modules/photoswipe/dist/photoswipe-ui-default.js","webpack://livingdocs-gatsby-magazine/./node_modules/photoswipe/dist/photoswipe.js","webpack://livingdocs-gatsby-magazine/./node_modules/react-fast-compare/index.js","webpack://livingdocs-gatsby-magazine/./node_modules/react-helmet/lib/Helmet.js","webpack://livingdocs-gatsby-magazine/./node_modules/react-helmet/lib/HelmetConstants.js","webpack://livingdocs-gatsby-magazine/./node_modules/react-helmet/lib/HelmetUtils.js","webpack://livingdocs-gatsby-magazine/./node_modules/react-side-effect/lib/index.js","webpack://livingdocs-gatsby-magazine/./node_modules/shallowequal/index.js","webpack://livingdocs-gatsby-magazine/./config.js","webpack://livingdocs-gatsby-magazine/./src/resources/li-logo.jpg","webpack://livingdocs-gatsby-magazine/./src/components/header/index.js","webpack://livingdocs-gatsby-magazine/./src/components/footer/index.js","webpack://livingdocs-gatsby-magazine/./src/resources/favicon.png","webpack://livingdocs-gatsby-magazine/./src/components/helpers/initVideoTeasers.js","webpack://livingdocs-gatsby-magazine/./src/components/helpers/initGalleryTeasers.js","webpack://livingdocs-gatsby-magazine/./src/components/layout/index.js"],"names":["pswp","framework","_fullscrenAPI","_controls","_captionContainer","_fakeCaptionContainer","_indexIndicator","_shareButton","_shareModal","_initalCloseOnScrollValue","_isIdle","_listen","_loadingIndicator","_loadingIndicatorHidden","_loadingIndicatorTimeout","_galleryHasOneSlide","_options","_blockControlsTap","_idleInterval","_idleTimer","ui","this","_overlayUIUpdated","_controlsVisible","_shareModalHidden","_defaultUIOptions","barsSize","top","bottom","closeElClasses","timeToIdle","timeToIdleOutside","loadingIndicatorDelay","addCaptionHTMLFn","item","captionEl","title","children","innerHTML","closeEl","fullscreenEl","zoomEl","shareEl","counterEl","arrowEl","preloaderEl","tapToClose","tapToToggleControls","clickToCloseNonZoomable","shareButtons","id","label","url","download","getImageURLForShare","currItem","src","getPageURLForShare","window","location","href","getTextForShare","indexIndicatorSep","fitControlsWidth","_onControlsTap","e","event","mouseUsed","_onIdleMouseMove","uiElement","found","clickedClass","target","srcElement","getAttribute","i","_uiElements","length","onTap","indexOf","name","stopPropagation","tapDelay","features","isOldAndroid","setTimeout","_fitControlsInViewport","likelyTouchDevice","screen","width","_togglePswpClass","el","cName","add","_countNumItems","hasOneSlide","getNumItemsFn","_toggleShareModalClass","_toggleShareModal","removeClass","addClass","_updateShareURLs","_openWindowPopup","shout","hasAttribute","open","Math","round","shareButtonData","image_url","page_url","share_text","shareButtonOut","replace","encodeURIComponent","parseShareButtonOut","onclick","_hasCloseClass","hasClass","_idleIncrement","clearTimeout","setIdle","_onMouseLeaveWindow","from","relatedTarget","toElement","nodeName","_setupFullscreenAPI","getFullscreenAPI","bind","document","eventK","updateFullscreen","template","_setupLoadingIndicator","_toggleLoadingIndicator","loading","allowProgressiveImg","img","naturalWidth","index","hide","_applyNavBarGaps","gap","vGap","bars","createEl","appendChild","insertBefore","captionSize","clientHeight","parseInt","_setupIdle","setInterval","_setupHidingControlsDuringGestures","pinchControlsHidden","now","hideControls","showControls","option","onInit","toggleDesktopZoom","close","prev","next","isFullscreen","exit","enter","_setupUIElements","classAttr","loopThroughChildElements","sChildren","l","className","a","topBar","getChildByClass","init","extend","options","scrollWrap","listen","update","point","initialZoomLevel","getZoomLevel","zoomTo","getDoubleTapZoom","isDown","preventObj","t","type","test","tagName","prevent","onGlobalTap","onMouseOver","clearInterval","unbind","hideAnimationDuration","removeChild","showAnimationDuration","isIdle","updateIndexIndicator","setScrollOffset","getScrollY","getCurrentIndex","detail","pointerType","fitRatio","releasePoint","supportsFullscreen","d","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","api","dE","documentElement","tF","requestFullscreen","enterK","exitK","elementK","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","closeOnScroll","Element","ALLOW_KEYBOARD_INPUT","UiClass","items","listener","methodName","split","isArray","obj","Array","classes","tag","createElement","yOffset","pageYOffset","undefined","scrollTop","reg","RegExp","parentEl","childClassName","node","firstChild","nextSibling","arraySearch","array","value","key","o1","o2","preventOverwrite","prop","hasOwnProperty","easing","sine","out","k","sin","PI","inOut","cos","cubic","detectFeatures","helperStyle","style","vendor","oldIE","all","addEventListener","touch","requestAnimationFrame","raf","caf","cancelAnimationFrame","pointerEvent","PointerEvent","navigator","msPointerEnabled","ua","userAgent","platform","v","appVersion","match","isOldIOSPhone","androidversion","parseFloat","androidVersion","isMobileOpera","styleCheckItem","styleName","styleChecks","vendors","charAt","toUpperCase","slice","toLowerCase","lastTime","fn","currTime","Date","getTime","timeToCall","max","svg","createElementNS","createSVGRect","evName","_handleEv","handleEvent","call","self","DOUBLE_TAP_RADIUS","NUM_HOLDERS","allowPanToNext","spacing","bgOpacity","loop","pinchToClose","closeOnVerticalDrag","verticalDragRange","showHideOpacity","focus","escKey","arrowKeys","mainScrollEndFriction","panEndFriction","isClickableElement","isMouseClick","maxSpreadZoom","modal","scaleMode","_isOpen","_isDestroying","_closedByScroll","_currentItemIndex","_containerStyle","_containerShiftIndex","_upMoveEvents","_downEvents","_globalEventHandlers","_currZoomLevel","_startZoomLevel","_translatePrefix","_translateSufix","_updateSizeInterval","_itemsNeedUpdate","_itemHolders","_prevItemIndex","_dragStartEvent","_dragMoveEvent","_dragEndEvent","_dragCancelEvent","_transformKey","_pointerEventEnabled","_likelyTouchDevice","_requestAF","_cancelAF","_initalClassName","_initalWindowScrollY","_oldIE","_currentWindowScrollY","_features","_orientationChangeTimeout","_gestureStartTime","_gestureCheckSpeedTime","_releaseAnimData","_isZoomingIn","_verticalDragInitiated","_oldAndroidTouchEndTimeout","_isDragging","_isMultitouch","_zoomStarted","_moved","_dragAnimFrame","_mainScrollShifted","_currentPoints","_isZooming","_startPointsDistance","_currPanBounds","_currZoomElementStyle","_mainScrollAnimating","_direction","_isFirstMove","_opacityChanged","_bgOpacity","_wasOverInitialZoom","_tempCounter","_getEmptyPoint","x","y","_currPanDist","_startPanOffset","_panOffset","_viewportSize","_currPositionIndex","_offset","_slideSize","_indexDiff","_isFixedPosition","_modules","_windowVisibleSize","_renderMaxResolution","_registerModule","module","publicMethods","push","_getLoopedId","numSlides","_getNumItems","_listeners","_shout","listeners","args","prototype","arguments","shift","apply","_getCurrentTime","_applyBgOpacity","opacity","bg","_applyZoomTransform","styleObj","zoom","_applyCurrentZoomPan","allowRenderResolution","_setImageSize","_applyZoomPanToItem","container","initialPosition","_setTranslateX","elStyle","_moveMainScroll","dragging","newSlideIndexOffset","delta","_mainScrollPos","_calculatePanOffset","axis","zoomLevel","m","_midZoomPoint","_equalizePoints","p1","p2","_roundPoint","p","_mouseMoveTimeout","_onFirstMouseMove","_bindEvents","transform","_unbindEvents","scroll","_calculatePanBounds","bounds","_calculateItemSize","_getMinZoomLevel","_getMaxZoomLevel","w","_modifyDestPanOffset","destPanBounds","destPanOffset","destZoomLevel","min","_setupTransforms","allow3dTransform","perspective","left","zoomRatio","s","h","height","_onKeyDown","keydownAction","keyCode","ctrlKey","altKey","shiftKey","metaKey","preventDefault","returnValue","_onGlobalClick","_updatePageScrollOffset","_animations","_numAnimations","_stopAnimation","_registerStartAnimation","_stopAllAnimations","_animateProp","b","endProp","easingFn","onUpdate","onComplete","startAnimTime","animloop","viewportSize","isMainScrollAnimating","isDragging","isZooming","applyZoomPan","panX","panY","itemHolders","wrap","display","resize","updateSize","orientationchange","clientWidth","keydown","click","oldPhone","animationName","isNaN","_getItemAt","setAttribute","position","rootClasses","mainClass","setContent","updateCurrItem","_showOrHide","destroy","_showOrHideTimeout","_stopDragUpdateLoop","panTo","force","goTo","diff","updateCurrZoomItem","emulateSetContent","zoomElement","center","invalidateCurrItems","needsUpdate","beforeAnimation","tempHolder","diffAbs","abs","pop","unshift","prevItem","windowScrollY","innerWidth","innerHeight","holder","hIndex","cleanSlide","centerPoint","speed","updateFn","initialPanOffset","MIN_SWIPE_DISTANCE","DIRECTION_CHECK_OFFSET","_currPoint","_startPoint","_currPointers","_startMainScrollPos","_posPoints","_tempPoint","_currZoomedItemIndex","_centerPoint","_lastReleaseTime","_currCenterPoint","_isEqualPoints","_isNearbyPoints","touch0","touch1","_calculatePointsDistance","sqrt","_dragUpdateLoop","_renderMovement","_canPan","_closestElement","parentNode","_preventObj","_preventDefaultEventBehaviour","_convertTouchToPoint","pageX","pageY","identifier","_findCenterOfPoints","pCenter","_pushPosPoint","time","o","_calculateVerticalDragOpacityRatio","_ePoint1","_ePoint2","_tempPointsArr","_getTouchPoints","forEach","touches","_panOrMoveMainScroll","panFriction","startOverDiff","newPanPos","newMainScrollPos","newOffset","dir","newMainScrollPosition","mainScrollDiff","_onDragStart","button","_initialZoomRunning","pointerIndex","pointerId","startPointsList","numPoints","_onDragMove","touchesList","pointsDistance","_calculateZoomLevel","zoomFriction","minZoomLevel","maxZoomLevel","percent","opacityRatio","_onDragRelease","splice","MSPOINTER_TYPES","gestureType","touchList","changedTouches","releaseTimeDiff","_initDragReleaseAnimationData","calculateSwipeSpeed","initalPanY","initialBgOpacity","_finishSwipeMainScrollGesture","_completePanGesture","_completeZoomGesture","lastFlickDuration","tempReleasePos","lastFlickOffset","lastFlickDist","lastFlickSpeed","slowDownRatio","slowDownRatioReverse","speedDecelerationRatio","speedDecelerationRatioAbs","distanceOffset","backAnimDestination","backAnimStarted","calculateOverBoundsAnimOffset","pos","calculateAnimOffset","timeDiff","panAnimLoop","zoomPan","lastNow","animData","itemChanged","itemsDiff","nextCircle","totalShiftDist","isFastLastFlick","finishAnimDuration","animateToX","animateToDist","touchesDistance","destOpacity","initialOpacity","initGestures","addEventNames","pref","down","move","up","cancel","maxTouchPoints","msMaxTouchPoints","mousedown","mousemove","mouseup","_items","_initialContentSet","completeFn","thumbBounds","initialLayout","getThumbBoundsFn","closeWithRaf","fadeEverything","duration","removeAttribute","loadError","miniImg","webkitBackfaceVisibility","initalBgOpacity","_tempPanAreaSize","_imagesToAppendPool","_controllerDefaultOptions","errorMsg","forceProgressiveLoading","preload","_getZeroBounds","_calculateSingleItemPanBounds","realPanElementW","realPanElementH","isInitial","hRatio","vRatio","_appendImage","baseDiv","preventAnimation","keepPlaceholder","imageAppended","loaded","placeholder","_preloadImage","loadComplete","onload","onerror","_checkForError","cleanUp","maxRes","lastChild","_appendImagesPool","poolItem","clearPlaceholder","lazyLoadItem","initController","getItemAt","isNext","preloadBefore","preloadAfter","preloader","html","placeholderClassName","msrc","tapTimer","_wheelDelta","tapReleasePoint","_dispatchTapEvent","origEvent","createEvent","eDetail","initCustomEvent","dispatchEvent","initTap","onTapStart","onTapRelease","p0","initDesktopZoom","setupDesktopZoom","events","handleMouseWheel","mouseZoomedIn","hasDraggingClass","updateZoomable","removeDraggingClass","deltaY","deltaMode","deltaX","wheelDeltaX","wheelDeltaY","wheelDelta","newPanX","newPanY","doubleTapZoomLevel","zoomOut","_historyUpdateTimeout","_hashChangeTimeout","_hashAnimCheckTimeout","_hashChangedByScript","_hashChangedByHistory","_hashReseted","_initialHash","_historyChanged","_closedFromURL","_urlChangedOnce","_windowLoc","_supportsPushState","_historyDefaultOptions","history","galleryUID","_getHash","hash","substring","_cleanHistoryTimeouts","_parseItemIndexFromURL","params","vars","pair","galleryPIDs","searchfor","pid","_updateHash","newHash","newURL","initHistory","updateURL","onHashChange","returnToOriginal","back","pushState","pathname","search","keyList","Object","keys","hasProp","hasElementType","equal","arrA","arrB","dateA","dateB","regexpA","regexpB","toString","$$typeof","exports","error","message","number","console","warn","_extends","assign","source","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_react2","_interopRequireDefault","_propTypes2","_reactSideEffect2","_reactFastCompare2","_HelmetUtils","_HelmetConstants","__esModule","default","_objectWithoutProperties","_classCallCheck","instance","TypeError","_possibleConstructorReturn","ReferenceError","Component","_class","_temp","HelmetSideEffects","reducePropsToState","handleClientStateChange","mapStateOnServer","HelmetExport","_React$Component","HelmetWrapper","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_inherits","shouldComponentUpdate","nextProps","mapNestedChildrenToProps","child","nestedChildren","TAG_NAMES","SCRIPT","NOSCRIPT","STYLE","cssText","Error","flattenArrayTypeChildren","_ref","_extends2","arrayTypeChildren","newChildProps","concat","mapObjectTypeChildren","_ref2","_extends3","_extends4","newProps","TITLE","titleAttributes","BODY","bodyAttributes","HTML","htmlAttributes","mapArrayTypeChildrenToProps","newFlattenedProps","arrayChildName","_extends5","warnOnInvalidChildren","mapChildrenToProps","_this2","Children","_child$props","childProps","convertReactPropstoHtmlAttributes","LINK","META","render","_props","set","canUseDOM","propTypes","base","object","oneOfType","arrayOf","defaultTitle","string","defer","bool","encodeSpecialCharacters","link","meta","noscript","onChangeClientState","func","script","titleTemplate","defaultProps","peek","rewind","mappedState","baseTag","linkTags","metaTags","noscriptTags","scriptTags","styleTags","renderStatic","ATTRIBUTE_NAMES","BASE","HEAD","REACT_TAG_MAP","VALID_TAG_NAMES","map","TAG_PROPERTIES","CHARSET","CSS_TEXT","HREF","HTTPEQUIV","INNER_HTML","ITEM_PROP","NAME","PROPERTY","REL","SRC","accesskey","charset","class","contenteditable","contextmenu","itemprop","tabindex","HELMET_PROPS","DEFAULT_TITLE","DEFER","ENCODE_SPECIAL_CHARACTERS","ON_CHANGE_CLIENT_STATE","TITLE_TEMPLATE","HTML_TAG_MAP","reduce","SELF_CLOSING_TAGS","HELMET_ATTRIBUTE","_typeof","Symbol","iterator","_objectAssign2","clock","str","encode","String","getTitleFromPropsList","propsList","innermostTitle","getInnermostProperty","innermostTemplate","innermostDefaultTitle","getOnChangeClientState","getAttributesFromPropsList","tagType","filter","tagAttrs","current","getBaseTagFromPropsList","primaryAttributes","reverse","innermostBaseTag","lowerCaseAttributeKey","getTagsFromPropsList","approvedSeenTags","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","attributeKey","tagUnion","property","rafPolyfill","callback","currentTime","cafPolyfill","webkitRequestAnimationFrame","mozRequestAnimationFrame","g","webkitCancelAnimationFrame","mozCancelAnimationFrame","msg","_helmetCallback","commitTagChanges","newState","cb","updateAttributes","updateTitle","tagUpdates","updateTags","addedTags","removedTags","_tagUpdates$tagType","newTags","oldTags","flattenArray","possibleArray","join","attributes","elementTag","getElementsByTagName","helmetAttributeString","helmetAttributes","attributesToRemove","attributeKeys","attribute","indexToSave","_i","tags","headElement","head","querySelector","tagNodes","querySelectorAll","indexToDelete","newElement","styleSheet","createTextNode","some","existingTag","isEqualNode","generateElementAttributesAsString","attr","convertElementAttributestoReactProps","initProps","getMethodsForTag","toComponent","_initProps","attributeString","flattenedTitle","generateTitleAsString","_mappedTag","mappedTag","mappedAttribute","content","dangerouslySetInnerHTML","__html","generateTagsAsReactComponent","attributeHtml","tagContent","isSelfClosing","generateTagsAsString","initAttributes","_ref$title","_interopDefault","ex","React","React__default","shallowEqual","_defineProperty","handleStateChangeOnClient","WrappedComponent","state","mountedInstances","emitChange","SideEffect","_Component","recordedState","_proto","componentWillMount","componentDidUpdate","componentWillUnmount","displayName","getDisplayName","objA","objB","compare","compareContext","ret","keysA","keysB","bHasOwnProperty","idx","valueA","valueB","metadata","author","keywords","description","facebookId","twitterId","role","marginBottom","Link","to","logo","alt","StaticQuery","query","data","allPublications","edges","page","publication","extra","slug","activeStyle","fontWeight","Photoswipe","require","PhotoSwipeUiDefault","openGallery","videoTeaserEl","teaserImageEl","teaserTitleEl","pswpEl","getGalleryOptions","imageItem","getImageItem","gallery","getVideoHtml","adjustVideoStyles","pageYScroll","rect","getBoundingClientRect","isImgEl","imageSrc","backgroundImage","naturalHeight","videoMarkupContainer","videoHtml","unescape","initialItem","currentItem","containerEl","videoEl","centerVideo","objectFit","poster","marginTop","registerClickListeners","galleryTeasers","galleryTeaserEl","teaserHeroEl","teaserHeroImageEl","teaserCardEl","imageEl","imageContainerEl","extractImageItems","childNodes","figureEl","internalLink","host","handleClick","path","URL","currentTarget","navigate","componentDidMount","teaserHeroTitleEl","titleEl","initiateVideoTeasers","classList","remove","dataSrc","initiateGalleryTeasers","body","anchorTag","removeEventListener","Helmet","lang","httpEquiv","rel","favicon"],"mappings":"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","file":"commons-6a9d7fd9bc7ac18b2981.js","sourcesContent":["/*! PhotoSwipe Default UI - 4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n\n/**\n*\n* UI on top of main sliding area (caption, arrows, close button, etc.).\n* Built just using public methods/properties of PhotoSwipe.\n* \n*/\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipeUI_Default = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var PhotoSwipeUI_Default = function PhotoSwipeUI_Default(pswp, framework) {\n    var ui = this;\n\n    var _overlayUIUpdated = false,\n        _controlsVisible = true,\n        _fullscrenAPI,\n        _controls,\n        _captionContainer,\n        _fakeCaptionContainer,\n        _indexIndicator,\n        _shareButton,\n        _shareModal,\n        _shareModalHidden = true,\n        _initalCloseOnScrollValue,\n        _isIdle,\n        _listen,\n        _loadingIndicator,\n        _loadingIndicatorHidden,\n        _loadingIndicatorTimeout,\n        _galleryHasOneSlide,\n        _options,\n        _defaultUIOptions = {\n      barsSize: {\n        top: 44,\n        bottom: 'auto'\n      },\n      closeElClasses: ['item', 'caption', 'zoom-wrap', 'ui', 'top-bar'],\n      timeToIdle: 4000,\n      timeToIdleOutside: 1000,\n      loadingIndicatorDelay: 1000,\n      // 2s\n      addCaptionHTMLFn: function addCaptionHTMLFn(item, captionEl\n      /*, isFake */\n      ) {\n        if (!item.title) {\n          captionEl.children[0].innerHTML = '';\n          return false;\n        }\n\n        captionEl.children[0].innerHTML = item.title;\n        return true;\n      },\n      closeEl: true,\n      captionEl: true,\n      fullscreenEl: true,\n      zoomEl: true,\n      shareEl: true,\n      counterEl: true,\n      arrowEl: true,\n      preloaderEl: true,\n      tapToClose: false,\n      tapToToggleControls: true,\n      clickToCloseNonZoomable: true,\n      shareButtons: [{\n        id: 'facebook',\n        label: 'Share on Facebook',\n        url: 'https://www.facebook.com/sharer/sharer.php?u={{url}}'\n      }, {\n        id: 'twitter',\n        label: 'Tweet',\n        url: 'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'\n      }, {\n        id: 'pinterest',\n        label: 'Pin it',\n        url: 'http://www.pinterest.com/pin/create/button/' + '?url={{url}}&media={{image_url}}&description={{text}}'\n      }, {\n        id: 'download',\n        label: 'Download image',\n        url: '{{raw_image_url}}',\n        download: true\n      }],\n      getImageURLForShare: function getImageURLForShare()\n      /* shareButtonData */\n      {\n        return pswp.currItem.src || '';\n      },\n      getPageURLForShare: function getPageURLForShare()\n      /* shareButtonData */\n      {\n        return window.location.href;\n      },\n      getTextForShare: function getTextForShare()\n      /* shareButtonData */\n      {\n        return pswp.currItem.title || '';\n      },\n      indexIndicatorSep: ' / ',\n      fitControlsWidth: 1200\n    },\n        _blockControlsTap,\n        _blockControlsTapTimeout;\n\n    var _onControlsTap = function _onControlsTap(e) {\n      if (_blockControlsTap) {\n        return true;\n      }\n\n      e = e || window.event;\n\n      if (_options.timeToIdle && _options.mouseUsed && !_isIdle) {\n        // reset idle timer\n        _onIdleMouseMove();\n      }\n\n      var target = e.target || e.srcElement,\n          uiElement,\n          clickedClass = target.getAttribute('class') || '',\n          found;\n\n      for (var i = 0; i < _uiElements.length; i++) {\n        uiElement = _uiElements[i];\n\n        if (uiElement.onTap && clickedClass.indexOf('pswp__' + uiElement.name) > -1) {\n          uiElement.onTap();\n          found = true;\n        }\n      }\n\n      if (found) {\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n\n        _blockControlsTap = true; // Some versions of Android don't prevent ghost click event \n        // when preventDefault() was called on touchstart and/or touchend.\n        // \n        // This happens on v4.3, 4.2, 4.1, \n        // older versions strangely work correctly, \n        // but just in case we add delay on all of them)\t\n\n        var tapDelay = framework.features.isOldAndroid ? 600 : 30;\n        _blockControlsTapTimeout = setTimeout(function () {\n          _blockControlsTap = false;\n        }, tapDelay);\n      }\n    },\n        _fitControlsInViewport = function _fitControlsInViewport() {\n      return !pswp.likelyTouchDevice || _options.mouseUsed || screen.width > _options.fitControlsWidth;\n    },\n        _togglePswpClass = function _togglePswpClass(el, cName, add) {\n      framework[(add ? 'add' : 'remove') + 'Class'](el, 'pswp__' + cName);\n    },\n        // add class when there is just one item in the gallery\n    // (by default it hides left/right arrows and 1ofX counter)\n    _countNumItems = function _countNumItems() {\n      var hasOneSlide = _options.getNumItemsFn() === 1;\n\n      if (hasOneSlide !== _galleryHasOneSlide) {\n        _togglePswpClass(_controls, 'ui--one-slide', hasOneSlide);\n\n        _galleryHasOneSlide = hasOneSlide;\n      }\n    },\n        _toggleShareModalClass = function _toggleShareModalClass() {\n      _togglePswpClass(_shareModal, 'share-modal--hidden', _shareModalHidden);\n    },\n        _toggleShareModal = function _toggleShareModal() {\n      _shareModalHidden = !_shareModalHidden;\n\n      if (!_shareModalHidden) {\n        _toggleShareModalClass();\n\n        setTimeout(function () {\n          if (!_shareModalHidden) {\n            framework.addClass(_shareModal, 'pswp__share-modal--fade-in');\n          }\n        }, 30);\n      } else {\n        framework.removeClass(_shareModal, 'pswp__share-modal--fade-in');\n        setTimeout(function () {\n          if (_shareModalHidden) {\n            _toggleShareModalClass();\n          }\n        }, 300);\n      }\n\n      if (!_shareModalHidden) {\n        _updateShareURLs();\n      }\n\n      return false;\n    },\n        _openWindowPopup = function _openWindowPopup(e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n      pswp.shout('shareLinkClick', e, target);\n\n      if (!target.href) {\n        return false;\n      }\n\n      if (target.hasAttribute('download')) {\n        return true;\n      }\n\n      window.open(target.href, 'pswp_share', 'scrollbars=yes,resizable=yes,toolbar=no,' + 'location=yes,width=550,height=420,top=100,left=' + (window.screen ? Math.round(screen.width / 2 - 275) : 100));\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      return false;\n    },\n        _updateShareURLs = function _updateShareURLs() {\n      var shareButtonOut = '',\n          shareButtonData,\n          shareURL,\n          image_url,\n          page_url,\n          share_text;\n\n      for (var i = 0; i < _options.shareButtons.length; i++) {\n        shareButtonData = _options.shareButtons[i];\n        image_url = _options.getImageURLForShare(shareButtonData);\n        page_url = _options.getPageURLForShare(shareButtonData);\n        share_text = _options.getTextForShare(shareButtonData);\n        shareURL = shareButtonData.url.replace('{{url}}', encodeURIComponent(page_url)).replace('{{image_url}}', encodeURIComponent(image_url)).replace('{{raw_image_url}}', image_url).replace('{{text}}', encodeURIComponent(share_text));\n        shareButtonOut += '<a href=\"' + shareURL + '\" target=\"_blank\" ' + 'class=\"pswp__share--' + shareButtonData.id + '\"' + (shareButtonData.download ? 'download' : '') + '>' + shareButtonData.label + '</a>';\n\n        if (_options.parseShareButtonOut) {\n          shareButtonOut = _options.parseShareButtonOut(shareButtonData, shareButtonOut);\n        }\n      }\n\n      _shareModal.children[0].innerHTML = shareButtonOut;\n      _shareModal.children[0].onclick = _openWindowPopup;\n    },\n        _hasCloseClass = function _hasCloseClass(target) {\n      for (var i = 0; i < _options.closeElClasses.length; i++) {\n        if (framework.hasClass(target, 'pswp__' + _options.closeElClasses[i])) {\n          return true;\n        }\n      }\n    },\n        _idleInterval,\n        _idleTimer,\n        _idleIncrement = 0,\n        _onIdleMouseMove = function _onIdleMouseMove() {\n      clearTimeout(_idleTimer);\n      _idleIncrement = 0;\n\n      if (_isIdle) {\n        ui.setIdle(false);\n      }\n    },\n        _onMouseLeaveWindow = function _onMouseLeaveWindow(e) {\n      e = e ? e : window.event;\n      var from = e.relatedTarget || e.toElement;\n\n      if (!from || from.nodeName === 'HTML') {\n        clearTimeout(_idleTimer);\n        _idleTimer = setTimeout(function () {\n          ui.setIdle(true);\n        }, _options.timeToIdleOutside);\n      }\n    },\n        _setupFullscreenAPI = function _setupFullscreenAPI() {\n      if (_options.fullscreenEl && !framework.features.isOldAndroid) {\n        if (!_fullscrenAPI) {\n          _fullscrenAPI = ui.getFullscreenAPI();\n        }\n\n        if (_fullscrenAPI) {\n          framework.bind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n          ui.updateFullscreen();\n          framework.addClass(pswp.template, 'pswp--supports-fs');\n        } else {\n          framework.removeClass(pswp.template, 'pswp--supports-fs');\n        }\n      }\n    },\n        _setupLoadingIndicator = function _setupLoadingIndicator() {\n      // Setup loading indicator\n      if (_options.preloaderEl) {\n        _toggleLoadingIndicator(true);\n\n        _listen('beforeChange', function () {\n          clearTimeout(_loadingIndicatorTimeout); // display loading indicator with delay\n\n          _loadingIndicatorTimeout = setTimeout(function () {\n            if (pswp.currItem && pswp.currItem.loading) {\n              if (!pswp.allowProgressiveImg() || pswp.currItem.img && !pswp.currItem.img.naturalWidth) {\n                // show preloader if progressive loading is not enabled, \n                // or image width is not defined yet (because of slow connection)\n                _toggleLoadingIndicator(false); // items-controller.js function allowProgressiveImg\n\n              }\n            } else {\n              _toggleLoadingIndicator(true); // hide preloader\n\n            }\n          }, _options.loadingIndicatorDelay);\n        });\n\n        _listen('imageLoadComplete', function (index, item) {\n          if (pswp.currItem === item) {\n            _toggleLoadingIndicator(true);\n          }\n        });\n      }\n    },\n        _toggleLoadingIndicator = function _toggleLoadingIndicator(hide) {\n      if (_loadingIndicatorHidden !== hide) {\n        _togglePswpClass(_loadingIndicator, 'preloader--active', !hide);\n\n        _loadingIndicatorHidden = hide;\n      }\n    },\n        _applyNavBarGaps = function _applyNavBarGaps(item) {\n      var gap = item.vGap;\n\n      if (_fitControlsInViewport()) {\n        var bars = _options.barsSize;\n\n        if (_options.captionEl && bars.bottom === 'auto') {\n          if (!_fakeCaptionContainer) {\n            _fakeCaptionContainer = framework.createEl('pswp__caption pswp__caption--fake');\n\n            _fakeCaptionContainer.appendChild(framework.createEl('pswp__caption__center'));\n\n            _controls.insertBefore(_fakeCaptionContainer, _captionContainer);\n\n            framework.addClass(_controls, 'pswp__ui--fit');\n          }\n\n          if (_options.addCaptionHTMLFn(item, _fakeCaptionContainer, true)) {\n            var captionSize = _fakeCaptionContainer.clientHeight;\n            gap.bottom = parseInt(captionSize, 10) || 44;\n          } else {\n            gap.bottom = bars.top; // if no caption, set size of bottom gap to size of top\n          }\n        } else {\n          gap.bottom = bars.bottom === 'auto' ? 0 : bars.bottom;\n        } // height of top bar is static, no need to calculate it\n\n\n        gap.top = bars.top;\n      } else {\n        gap.top = gap.bottom = 0;\n      }\n    },\n        _setupIdle = function _setupIdle() {\n      // Hide controls when mouse is used\n      if (_options.timeToIdle) {\n        _listen('mouseUsed', function () {\n          framework.bind(document, 'mousemove', _onIdleMouseMove);\n          framework.bind(document, 'mouseout', _onMouseLeaveWindow);\n          _idleInterval = setInterval(function () {\n            _idleIncrement++;\n\n            if (_idleIncrement === 2) {\n              ui.setIdle(true);\n            }\n          }, _options.timeToIdle / 2);\n        });\n      }\n    },\n        _setupHidingControlsDuringGestures = function _setupHidingControlsDuringGestures() {\n      // Hide controls on vertical drag\n      _listen('onVerticalDrag', function (now) {\n        if (_controlsVisible && now < 0.95) {\n          ui.hideControls();\n        } else if (!_controlsVisible && now >= 0.95) {\n          ui.showControls();\n        }\n      }); // Hide controls when pinching to close\n\n\n      var pinchControlsHidden;\n\n      _listen('onPinchClose', function (now) {\n        if (_controlsVisible && now < 0.9) {\n          ui.hideControls();\n          pinchControlsHidden = true;\n        } else if (pinchControlsHidden && !_controlsVisible && now > 0.9) {\n          ui.showControls();\n        }\n      });\n\n      _listen('zoomGestureEnded', function () {\n        pinchControlsHidden = false;\n\n        if (pinchControlsHidden && !_controlsVisible) {\n          ui.showControls();\n        }\n      });\n    };\n\n    var _uiElements = [{\n      name: 'caption',\n      option: 'captionEl',\n      onInit: function onInit(el) {\n        _captionContainer = el;\n      }\n    }, {\n      name: 'share-modal',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareModal = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--share',\n      option: 'shareEl',\n      onInit: function onInit(el) {\n        _shareButton = el;\n      },\n      onTap: function onTap() {\n        _toggleShareModal();\n      }\n    }, {\n      name: 'button--zoom',\n      option: 'zoomEl',\n      onTap: pswp.toggleDesktopZoom\n    }, {\n      name: 'counter',\n      option: 'counterEl',\n      onInit: function onInit(el) {\n        _indexIndicator = el;\n      }\n    }, {\n      name: 'button--close',\n      option: 'closeEl',\n      onTap: pswp.close\n    }, {\n      name: 'button--arrow--left',\n      option: 'arrowEl',\n      onTap: pswp.prev\n    }, {\n      name: 'button--arrow--right',\n      option: 'arrowEl',\n      onTap: pswp.next\n    }, {\n      name: 'button--fs',\n      option: 'fullscreenEl',\n      onTap: function onTap() {\n        if (_fullscrenAPI.isFullscreen()) {\n          _fullscrenAPI.exit();\n        } else {\n          _fullscrenAPI.enter();\n        }\n      }\n    }, {\n      name: 'preloader',\n      option: 'preloaderEl',\n      onInit: function onInit(el) {\n        _loadingIndicator = el;\n      }\n    }];\n\n    var _setupUIElements = function _setupUIElements() {\n      var item, classAttr, uiElement;\n\n      var loopThroughChildElements = function loopThroughChildElements(sChildren) {\n        if (!sChildren) {\n          return;\n        }\n\n        var l = sChildren.length;\n\n        for (var i = 0; i < l; i++) {\n          item = sChildren[i];\n          classAttr = item.className;\n\n          for (var a = 0; a < _uiElements.length; a++) {\n            uiElement = _uiElements[a];\n\n            if (classAttr.indexOf('pswp__' + uiElement.name) > -1) {\n              if (_options[uiElement.option]) {\n                // if element is not disabled from options\n                framework.removeClass(item, 'pswp__element--disabled');\n\n                if (uiElement.onInit) {\n                  uiElement.onInit(item);\n                } //item.style.display = 'block';\n\n              } else {\n                framework.addClass(item, 'pswp__element--disabled'); //item.style.display = 'none';\n              }\n            }\n          }\n        }\n      };\n\n      loopThroughChildElements(_controls.children);\n      var topBar = framework.getChildByClass(_controls, 'pswp__top-bar');\n\n      if (topBar) {\n        loopThroughChildElements(topBar.children);\n      }\n    };\n\n    ui.init = function () {\n      // extend options\n      framework.extend(pswp.options, _defaultUIOptions, true); // create local link for fast access\n\n      _options = pswp.options; // find pswp__ui element\n\n      _controls = framework.getChildByClass(pswp.scrollWrap, 'pswp__ui'); // create local link\n\n      _listen = pswp.listen;\n\n      _setupHidingControlsDuringGestures(); // update controls when slides change\n\n\n      _listen('beforeChange', ui.update); // toggle zoom on double-tap\n\n\n      _listen('doubleTap', function (point) {\n        var initialZoomLevel = pswp.currItem.initialZoomLevel;\n\n        if (pswp.getZoomLevel() !== initialZoomLevel) {\n          pswp.zoomTo(initialZoomLevel, point, 333);\n        } else {\n          pswp.zoomTo(_options.getDoubleTapZoom(false, pswp.currItem), point, 333);\n        }\n      }); // Allow text selection in caption\n\n\n      _listen('preventDragEvent', function (e, isDown, preventObj) {\n        var t = e.target || e.srcElement;\n\n        if (t && t.getAttribute('class') && e.type.indexOf('mouse') > -1 && (t.getAttribute('class').indexOf('__caption') > 0 || /(SMALL|STRONG|EM)/i.test(t.tagName))) {\n          preventObj.prevent = false;\n        }\n      }); // bind events for UI\n\n\n      _listen('bindEvents', function () {\n        framework.bind(_controls, 'pswpTap click', _onControlsTap);\n        framework.bind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n\n        if (!pswp.likelyTouchDevice) {\n          framework.bind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n        }\n      }); // unbind events for UI\n\n\n      _listen('unbindEvents', function () {\n        if (!_shareModalHidden) {\n          _toggleShareModal();\n        }\n\n        if (_idleInterval) {\n          clearInterval(_idleInterval);\n        }\n\n        framework.unbind(document, 'mouseout', _onMouseLeaveWindow);\n        framework.unbind(document, 'mousemove', _onIdleMouseMove);\n        framework.unbind(_controls, 'pswpTap click', _onControlsTap);\n        framework.unbind(pswp.scrollWrap, 'pswpTap', ui.onGlobalTap);\n        framework.unbind(pswp.scrollWrap, 'mouseover', ui.onMouseOver);\n\n        if (_fullscrenAPI) {\n          framework.unbind(document, _fullscrenAPI.eventK, ui.updateFullscreen);\n\n          if (_fullscrenAPI.isFullscreen()) {\n            _options.hideAnimationDuration = 0;\n\n            _fullscrenAPI.exit();\n          }\n\n          _fullscrenAPI = null;\n        }\n      }); // clean up things when gallery is destroyed\n\n\n      _listen('destroy', function () {\n        if (_options.captionEl) {\n          if (_fakeCaptionContainer) {\n            _controls.removeChild(_fakeCaptionContainer);\n          }\n\n          framework.removeClass(_captionContainer, 'pswp__caption--empty');\n        }\n\n        if (_shareModal) {\n          _shareModal.children[0].onclick = null;\n        }\n\n        framework.removeClass(_controls, 'pswp__ui--over-close');\n        framework.addClass(_controls, 'pswp__ui--hidden');\n        ui.setIdle(false);\n      });\n\n      if (!_options.showAnimationDuration) {\n        framework.removeClass(_controls, 'pswp__ui--hidden');\n      }\n\n      _listen('initialZoomIn', function () {\n        if (_options.showAnimationDuration) {\n          framework.removeClass(_controls, 'pswp__ui--hidden');\n        }\n      });\n\n      _listen('initialZoomOut', function () {\n        framework.addClass(_controls, 'pswp__ui--hidden');\n      });\n\n      _listen('parseVerticalMargin', _applyNavBarGaps);\n\n      _setupUIElements();\n\n      if (_options.shareEl && _shareButton && _shareModal) {\n        _shareModalHidden = true;\n      }\n\n      _countNumItems();\n\n      _setupIdle();\n\n      _setupFullscreenAPI();\n\n      _setupLoadingIndicator();\n    };\n\n    ui.setIdle = function (isIdle) {\n      _isIdle = isIdle;\n\n      _togglePswpClass(_controls, 'ui--idle', isIdle);\n    };\n\n    ui.update = function () {\n      // Don't update UI if it's hidden\n      if (_controlsVisible && pswp.currItem) {\n        ui.updateIndexIndicator();\n\n        if (_options.captionEl) {\n          _options.addCaptionHTMLFn(pswp.currItem, _captionContainer);\n\n          _togglePswpClass(_captionContainer, 'caption--empty', !pswp.currItem.title);\n        }\n\n        _overlayUIUpdated = true;\n      } else {\n        _overlayUIUpdated = false;\n      }\n\n      if (!_shareModalHidden) {\n        _toggleShareModal();\n      }\n\n      _countNumItems();\n    };\n\n    ui.updateFullscreen = function (e) {\n      if (e) {\n        // some browsers change window scroll position during the fullscreen\n        // so PhotoSwipe updates it just in case\n        setTimeout(function () {\n          pswp.setScrollOffset(0, framework.getScrollY());\n        }, 50);\n      } // toogle pswp--fs class on root element\n\n\n      framework[(_fullscrenAPI.isFullscreen() ? 'add' : 'remove') + 'Class'](pswp.template, 'pswp--fs');\n    };\n\n    ui.updateIndexIndicator = function () {\n      if (_options.counterEl) {\n        _indexIndicator.innerHTML = pswp.getCurrentIndex() + 1 + _options.indexIndicatorSep + _options.getNumItemsFn();\n      }\n    };\n\n    ui.onGlobalTap = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement;\n\n      if (_blockControlsTap) {\n        return;\n      }\n\n      if (e.detail && e.detail.pointerType === 'mouse') {\n        // close gallery if clicked outside of the image\n        if (_hasCloseClass(target)) {\n          pswp.close();\n          return;\n        }\n\n        if (framework.hasClass(target, 'pswp__img')) {\n          if (pswp.getZoomLevel() === 1 && pswp.getZoomLevel() <= pswp.currItem.fitRatio) {\n            if (_options.clickToCloseNonZoomable) {\n              pswp.close();\n            }\n          } else {\n            pswp.toggleDesktopZoom(e.detail.releasePoint);\n          }\n        }\n      } else {\n        // tap anywhere (except buttons) to toggle visibility of controls\n        if (_options.tapToToggleControls) {\n          if (_controlsVisible) {\n            ui.hideControls();\n          } else {\n            ui.showControls();\n          }\n        } // tap to close gallery\n\n\n        if (_options.tapToClose && (framework.hasClass(target, 'pswp__img') || _hasCloseClass(target))) {\n          pswp.close();\n          return;\n        }\n      }\n    };\n\n    ui.onMouseOver = function (e) {\n      e = e || window.event;\n      var target = e.target || e.srcElement; // add class when mouse is over an element that should close the gallery\n\n      _togglePswpClass(_controls, 'ui--over-close', _hasCloseClass(target));\n    };\n\n    ui.hideControls = function () {\n      framework.addClass(_controls, 'pswp__ui--hidden');\n      _controlsVisible = false;\n    };\n\n    ui.showControls = function () {\n      _controlsVisible = true;\n\n      if (!_overlayUIUpdated) {\n        ui.update();\n      }\n\n      framework.removeClass(_controls, 'pswp__ui--hidden');\n    };\n\n    ui.supportsFullscreen = function () {\n      var d = document;\n      return !!(d.exitFullscreen || d.mozCancelFullScreen || d.webkitExitFullscreen || d.msExitFullscreen);\n    };\n\n    ui.getFullscreenAPI = function () {\n      var dE = document.documentElement,\n          api,\n          tF = 'fullscreenchange';\n\n      if (dE.requestFullscreen) {\n        api = {\n          enterK: 'requestFullscreen',\n          exitK: 'exitFullscreen',\n          elementK: 'fullscreenElement',\n          eventK: tF\n        };\n      } else if (dE.mozRequestFullScreen) {\n        api = {\n          enterK: 'mozRequestFullScreen',\n          exitK: 'mozCancelFullScreen',\n          elementK: 'mozFullScreenElement',\n          eventK: 'moz' + tF\n        };\n      } else if (dE.webkitRequestFullscreen) {\n        api = {\n          enterK: 'webkitRequestFullscreen',\n          exitK: 'webkitExitFullscreen',\n          elementK: 'webkitFullscreenElement',\n          eventK: 'webkit' + tF\n        };\n      } else if (dE.msRequestFullscreen) {\n        api = {\n          enterK: 'msRequestFullscreen',\n          exitK: 'msExitFullscreen',\n          elementK: 'msFullscreenElement',\n          eventK: 'MSFullscreenChange'\n        };\n      }\n\n      if (api) {\n        api.enter = function () {\n          // disable close-on-scroll in fullscreen\n          _initalCloseOnScrollValue = _options.closeOnScroll;\n          _options.closeOnScroll = false;\n\n          if (this.enterK === 'webkitRequestFullscreen') {\n            pswp.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);\n          } else {\n            return pswp.template[this.enterK]();\n          }\n        };\n\n        api.exit = function () {\n          _options.closeOnScroll = _initalCloseOnScrollValue;\n          return document[this.exitK]();\n        };\n\n        api.isFullscreen = function () {\n          return document[this.elementK];\n        };\n      }\n\n      return api;\n    };\n  };\n\n  return PhotoSwipeUI_Default;\n});","/*! PhotoSwipe - v4.1.3 - 2019-01-08\n* http://photoswipe.com\n* Copyright (c) 2019 Dmitry Semenov; */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.PhotoSwipe = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var PhotoSwipe = function PhotoSwipe(template, UiClass, items, options) {\n    /*>>framework-bridge*/\n\n    /**\n     *\n     * Set of generic functions used by gallery.\n     * \n     * You're free to modify anything here as long as functionality is kept.\n     * \n     */\n    var framework = {\n      features: null,\n      bind: function bind(target, type, listener, unbind) {\n        var methodName = (unbind ? 'remove' : 'add') + 'EventListener';\n        type = type.split(' ');\n\n        for (var i = 0; i < type.length; i++) {\n          if (type[i]) {\n            target[methodName](type[i], listener, false);\n          }\n        }\n      },\n      isArray: function isArray(obj) {\n        return obj instanceof Array;\n      },\n      createEl: function createEl(classes, tag) {\n        var el = document.createElement(tag || 'div');\n\n        if (classes) {\n          el.className = classes;\n        }\n\n        return el;\n      },\n      getScrollY: function getScrollY() {\n        var yOffset = window.pageYOffset;\n        return yOffset !== undefined ? yOffset : document.documentElement.scrollTop;\n      },\n      unbind: function unbind(target, type, listener) {\n        framework.bind(target, type, listener, true);\n      },\n      removeClass: function removeClass(el, className) {\n        var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n        el.className = el.className.replace(reg, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n      },\n      addClass: function addClass(el, className) {\n        if (!framework.hasClass(el, className)) {\n          el.className += (el.className ? ' ' : '') + className;\n        }\n      },\n      hasClass: function hasClass(el, className) {\n        return el.className && new RegExp('(^|\\\\s)' + className + '(\\\\s|$)').test(el.className);\n      },\n      getChildByClass: function getChildByClass(parentEl, childClassName) {\n        var node = parentEl.firstChild;\n\n        while (node) {\n          if (framework.hasClass(node, childClassName)) {\n            return node;\n          }\n\n          node = node.nextSibling;\n        }\n      },\n      arraySearch: function arraySearch(array, value, key) {\n        var i = array.length;\n\n        while (i--) {\n          if (array[i][key] === value) {\n            return i;\n          }\n        }\n\n        return -1;\n      },\n      extend: function extend(o1, o2, preventOverwrite) {\n        for (var prop in o2) {\n          if (o2.hasOwnProperty(prop)) {\n            if (preventOverwrite && o1.hasOwnProperty(prop)) {\n              continue;\n            }\n\n            o1[prop] = o2[prop];\n          }\n        }\n      },\n      easing: {\n        sine: {\n          out: function out(k) {\n            return Math.sin(k * (Math.PI / 2));\n          },\n          inOut: function inOut(k) {\n            return -(Math.cos(Math.PI * k) - 1) / 2;\n          }\n        },\n        cubic: {\n          out: function out(k) {\n            return --k * k * k + 1;\n          }\n        }\n        /*\n        \telastic: {\n        \t\tout: function ( k ) {\n        \t\t\t\tvar s, a = 0.1, p = 0.4;\n        \t\t\tif ( k === 0 ) return 0;\n        \t\t\tif ( k === 1 ) return 1;\n        \t\t\tif ( !a || a < 1 ) { a = 1; s = p / 4; }\n        \t\t\telse s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n        \t\t\treturn ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n        \t\t\t},\n        \t},\n        \tback: {\n        \t\tout: function ( k ) {\n        \t\t\tvar s = 1.70158;\n        \t\t\treturn --k * k * ( ( s + 1 ) * k + s ) + 1;\n        \t\t}\n        \t}\n        */\n\n      },\n\n      /**\n       * \n       * @return {object}\n       * \n       * {\n       *  raf : request animation frame function\n       *  caf : cancel animation frame function\n       *  transfrom : transform property key (with vendor), or null if not supported\n       *  oldIE : IE8 or below\n       * }\n       * \n       */\n      detectFeatures: function detectFeatures() {\n        if (framework.features) {\n          return framework.features;\n        }\n\n        var helperEl = framework.createEl(),\n            helperStyle = helperEl.style,\n            vendor = '',\n            features = {}; // IE8 and below\n\n        features.oldIE = document.all && !document.addEventListener;\n        features.touch = 'ontouchstart' in window;\n\n        if (window.requestAnimationFrame) {\n          features.raf = window.requestAnimationFrame;\n          features.caf = window.cancelAnimationFrame;\n        }\n\n        features.pointerEvent = !!window.PointerEvent || navigator.msPointerEnabled; // fix false-positive detection of old Android in new IE\n        // (IE11 ua string contains \"Android 4.0\")\n\n        if (!features.pointerEvent) {\n          var ua = navigator.userAgent; // Detect if device is iPhone or iPod and if it's older than iOS 8\n          // http://stackoverflow.com/a/14223920\n          // \n          // This detection is made because of buggy top/bottom toolbars\n          // that don't trigger window.resize event.\n          // For more info refer to _isFixedPosition variable in core.js\n\n          if (/iP(hone|od)/.test(navigator.platform)) {\n            var v = navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n\n            if (v && v.length > 0) {\n              v = parseInt(v[1], 10);\n\n              if (v >= 1 && v < 8) {\n                features.isOldIOSPhone = true;\n              }\n            }\n          } // Detect old Android (before KitKat)\n          // due to bugs related to position:fixed\n          // http://stackoverflow.com/questions/7184573/pick-up-the-android-version-in-the-browser-by-javascript\n\n\n          var match = ua.match(/Android\\s([0-9\\.]*)/);\n          var androidversion = match ? match[1] : 0;\n          androidversion = parseFloat(androidversion);\n\n          if (androidversion >= 1) {\n            if (androidversion < 4.4) {\n              features.isOldAndroid = true; // for fixed position bug & performance\n            }\n\n            features.androidVersion = androidversion; // for touchend bug\n          }\n\n          features.isMobileOpera = /opera mini|opera mobi/i.test(ua); // p.s. yes, yes, UA sniffing is bad, propose your solution for above bugs.\n        }\n\n        var styleChecks = ['transform', 'perspective', 'animationName'],\n            vendors = ['', 'webkit', 'Moz', 'ms', 'O'],\n            styleCheckItem,\n            styleName;\n\n        for (var i = 0; i < 4; i++) {\n          vendor = vendors[i];\n\n          for (var a = 0; a < 3; a++) {\n            styleCheckItem = styleChecks[a]; // uppercase first letter of property name, if vendor is present\n\n            styleName = vendor + (vendor ? styleCheckItem.charAt(0).toUpperCase() + styleCheckItem.slice(1) : styleCheckItem);\n\n            if (!features[styleCheckItem] && styleName in helperStyle) {\n              features[styleCheckItem] = styleName;\n            }\n          }\n\n          if (vendor && !features.raf) {\n            vendor = vendor.toLowerCase();\n            features.raf = window[vendor + 'RequestAnimationFrame'];\n\n            if (features.raf) {\n              features.caf = window[vendor + 'CancelAnimationFrame'] || window[vendor + 'CancelRequestAnimationFrame'];\n            }\n          }\n        }\n\n        if (!features.raf) {\n          var lastTime = 0;\n\n          features.raf = function (fn) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function () {\n              fn(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n          };\n\n          features.caf = function (id) {\n            clearTimeout(id);\n          };\n        } // Detect SVG support\n\n\n        features.svg = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;\n        framework.features = features;\n        return features;\n      }\n    };\n    framework.detectFeatures(); // Override addEventListener for old versions of IE\n\n    if (framework.features.oldIE) {\n      framework.bind = function (target, type, listener, unbind) {\n        type = type.split(' ');\n\n        var methodName = (unbind ? 'detach' : 'attach') + 'Event',\n            evName,\n            _handleEv = function _handleEv() {\n          listener.handleEvent.call(listener);\n        };\n\n        for (var i = 0; i < type.length; i++) {\n          evName = type[i];\n\n          if (evName) {\n            if (typeof listener === 'object' && listener.handleEvent) {\n              if (!unbind) {\n                listener['oldIE' + evName] = _handleEv;\n              } else {\n                if (!listener['oldIE' + evName]) {\n                  return false;\n                }\n              }\n\n              target[methodName]('on' + evName, listener['oldIE' + evName]);\n            } else {\n              target[methodName]('on' + evName, listener);\n            }\n          }\n        }\n      };\n    }\n    /*>>framework-bridge*/\n\n    /*>>core*/\n    //function(template, UiClass, items, options)\n\n\n    var self = this;\n    /**\n     * Static vars, don't change unless you know what you're doing.\n     */\n\n    var DOUBLE_TAP_RADIUS = 25,\n        NUM_HOLDERS = 3;\n    /**\n     * Options\n     */\n\n    var _options = {\n      allowPanToNext: true,\n      spacing: 0.12,\n      bgOpacity: 1,\n      mouseUsed: false,\n      loop: true,\n      pinchToClose: true,\n      closeOnScroll: true,\n      closeOnVerticalDrag: true,\n      verticalDragRange: 0.75,\n      hideAnimationDuration: 333,\n      showAnimationDuration: 333,\n      showHideOpacity: false,\n      focus: true,\n      escKey: true,\n      arrowKeys: true,\n      mainScrollEndFriction: 0.35,\n      panEndFriction: 0.35,\n      isClickableElement: function isClickableElement(el) {\n        return el.tagName === 'A';\n      },\n      getDoubleTapZoom: function getDoubleTapZoom(isMouseClick, item) {\n        if (isMouseClick) {\n          return 1;\n        } else {\n          return item.initialZoomLevel < 0.7 ? 1 : 1.33;\n        }\n      },\n      maxSpreadZoom: 1.33,\n      modal: true,\n      // not fully implemented yet\n      scaleMode: 'fit' // TODO\n\n    };\n    framework.extend(_options, options);\n    /**\n     * Private helper variables & functions\n     */\n\n    var _getEmptyPoint = function _getEmptyPoint() {\n      return {\n        x: 0,\n        y: 0\n      };\n    };\n\n    var _isOpen,\n        _isDestroying,\n        _closedByScroll,\n        _currentItemIndex,\n        _containerStyle,\n        _containerShiftIndex,\n        _currPanDist = _getEmptyPoint(),\n        _startPanOffset = _getEmptyPoint(),\n        _panOffset = _getEmptyPoint(),\n        _upMoveEvents,\n        // drag move, drag end & drag cancel events array\n    _downEvents,\n        // drag start events array\n    _globalEventHandlers,\n        _viewportSize = {},\n        _currZoomLevel,\n        _startZoomLevel,\n        _translatePrefix,\n        _translateSufix,\n        _updateSizeInterval,\n        _itemsNeedUpdate,\n        _currPositionIndex = 0,\n        _offset = {},\n        _slideSize = _getEmptyPoint(),\n        // size of slide area, including spacing\n    _itemHolders,\n        _prevItemIndex,\n        _indexDiff = 0,\n        // difference of indexes since last content update\n    _dragStartEvent,\n        _dragMoveEvent,\n        _dragEndEvent,\n        _dragCancelEvent,\n        _transformKey,\n        _pointerEventEnabled,\n        _isFixedPosition = true,\n        _likelyTouchDevice,\n        _modules = [],\n        _requestAF,\n        _cancelAF,\n        _initalClassName,\n        _initalWindowScrollY,\n        _oldIE,\n        _currentWindowScrollY,\n        _features,\n        _windowVisibleSize = {},\n        _renderMaxResolution = false,\n        _orientationChangeTimeout,\n        // Registers PhotoSWipe module (History, Controller ...)\n    _registerModule = function _registerModule(name, module) {\n      framework.extend(self, module.publicMethods);\n\n      _modules.push(name);\n    },\n        _getLoopedId = function _getLoopedId(index) {\n      var numSlides = _getNumItems();\n\n      if (index > numSlides - 1) {\n        return index - numSlides;\n      } else if (index < 0) {\n        return numSlides + index;\n      }\n\n      return index;\n    },\n        // Micro bind/trigger\n    _listeners = {},\n        _listen = function _listen(name, fn) {\n      if (!_listeners[name]) {\n        _listeners[name] = [];\n      }\n\n      return _listeners[name].push(fn);\n    },\n        _shout = function _shout(name) {\n      var listeners = _listeners[name];\n\n      if (listeners) {\n        var args = Array.prototype.slice.call(arguments);\n        args.shift();\n\n        for (var i = 0; i < listeners.length; i++) {\n          listeners[i].apply(self, args);\n        }\n      }\n    },\n        _getCurrentTime = function _getCurrentTime() {\n      return new Date().getTime();\n    },\n        _applyBgOpacity = function _applyBgOpacity(opacity) {\n      _bgOpacity = opacity;\n      self.bg.style.opacity = opacity * _options.bgOpacity;\n    },\n        _applyZoomTransform = function _applyZoomTransform(styleObj, x, y, zoom, item) {\n      if (!_renderMaxResolution || item && item !== self.currItem) {\n        zoom = zoom / (item ? item.fitRatio : self.currItem.fitRatio);\n      }\n\n      styleObj[_transformKey] = _translatePrefix + x + 'px, ' + y + 'px' + _translateSufix + ' scale(' + zoom + ')';\n    },\n        _applyCurrentZoomPan = function _applyCurrentZoomPan(allowRenderResolution) {\n      if (_currZoomElementStyle) {\n        if (allowRenderResolution) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            if (!_renderMaxResolution) {\n              _setImageSize(self.currItem, false, true);\n\n              _renderMaxResolution = true;\n            }\n          } else {\n            if (_renderMaxResolution) {\n              _setImageSize(self.currItem);\n\n              _renderMaxResolution = false;\n            }\n          }\n        }\n\n        _applyZoomTransform(_currZoomElementStyle, _panOffset.x, _panOffset.y, _currZoomLevel);\n      }\n    },\n        _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n      if (item.container) {\n        _applyZoomTransform(item.container.style, item.initialPosition.x, item.initialPosition.y, item.initialZoomLevel, item);\n      }\n    },\n        _setTranslateX = function _setTranslateX(x, elStyle) {\n      elStyle[_transformKey] = _translatePrefix + x + 'px, 0px' + _translateSufix;\n    },\n        _moveMainScroll = function _moveMainScroll(x, dragging) {\n      if (!_options.loop && dragging) {\n        var newSlideIndexOffset = _currentItemIndex + (_slideSize.x * _currPositionIndex - x) / _slideSize.x,\n            delta = Math.round(x - _mainScrollPos.x);\n\n        if (newSlideIndexOffset < 0 && delta > 0 || newSlideIndexOffset >= _getNumItems() - 1 && delta < 0) {\n          x = _mainScrollPos.x + delta * _options.mainScrollEndFriction;\n        }\n      }\n\n      _mainScrollPos.x = x;\n\n      _setTranslateX(x, _containerStyle);\n    },\n        _calculatePanOffset = function _calculatePanOffset(axis, zoomLevel) {\n      var m = _midZoomPoint[axis] - _offset[axis];\n      return _startPanOffset[axis] + _currPanDist[axis] + m - m * (zoomLevel / _startZoomLevel);\n    },\n        _equalizePoints = function _equalizePoints(p1, p2) {\n      p1.x = p2.x;\n      p1.y = p2.y;\n\n      if (p2.id) {\n        p1.id = p2.id;\n      }\n    },\n        _roundPoint = function _roundPoint(p) {\n      p.x = Math.round(p.x);\n      p.y = Math.round(p.y);\n    },\n        _mouseMoveTimeout = null,\n        _onFirstMouseMove = function _onFirstMouseMove() {\n      // Wait until mouse move event is fired at least twice during 100ms\n      // We do this, because some mobile browsers trigger it on touchstart\n      if (_mouseMoveTimeout) {\n        framework.unbind(document, 'mousemove', _onFirstMouseMove);\n        framework.addClass(template, 'pswp--has_mouse');\n        _options.mouseUsed = true;\n\n        _shout('mouseUsed');\n      }\n\n      _mouseMoveTimeout = setTimeout(function () {\n        _mouseMoveTimeout = null;\n      }, 100);\n    },\n        _bindEvents = function _bindEvents() {\n      framework.bind(document, 'keydown', self);\n\n      if (_features.transform) {\n        // don't bind click event in browsers that don't support transform (mostly IE8)\n        framework.bind(self.scrollWrap, 'click', self);\n      }\n\n      if (!_options.mouseUsed) {\n        framework.bind(document, 'mousemove', _onFirstMouseMove);\n      }\n\n      framework.bind(window, 'resize scroll orientationchange', self);\n\n      _shout('bindEvents');\n    },\n        _unbindEvents = function _unbindEvents() {\n      framework.unbind(window, 'resize scroll orientationchange', self);\n      framework.unbind(window, 'scroll', _globalEventHandlers.scroll);\n      framework.unbind(document, 'keydown', self);\n      framework.unbind(document, 'mousemove', _onFirstMouseMove);\n\n      if (_features.transform) {\n        framework.unbind(self.scrollWrap, 'click', self);\n      }\n\n      if (_isDragging) {\n        framework.unbind(window, _upMoveEvents, self);\n      }\n\n      clearTimeout(_orientationChangeTimeout);\n\n      _shout('unbindEvents');\n    },\n        _calculatePanBounds = function _calculatePanBounds(zoomLevel, update) {\n      var bounds = _calculateItemSize(self.currItem, _viewportSize, zoomLevel);\n\n      if (update) {\n        _currPanBounds = bounds;\n      }\n\n      return bounds;\n    },\n        _getMinZoomLevel = function _getMinZoomLevel(item) {\n      if (!item) {\n        item = self.currItem;\n      }\n\n      return item.initialZoomLevel;\n    },\n        _getMaxZoomLevel = function _getMaxZoomLevel(item) {\n      if (!item) {\n        item = self.currItem;\n      }\n\n      return item.w > 0 ? _options.maxSpreadZoom : 1;\n    },\n        // Return true if offset is out of the bounds\n    _modifyDestPanOffset = function _modifyDestPanOffset(axis, destPanBounds, destPanOffset, destZoomLevel) {\n      if (destZoomLevel === self.currItem.initialZoomLevel) {\n        destPanOffset[axis] = self.currItem.initialPosition[axis];\n        return true;\n      } else {\n        destPanOffset[axis] = _calculatePanOffset(axis, destZoomLevel);\n\n        if (destPanOffset[axis] > destPanBounds.min[axis]) {\n          destPanOffset[axis] = destPanBounds.min[axis];\n          return true;\n        } else if (destPanOffset[axis] < destPanBounds.max[axis]) {\n          destPanOffset[axis] = destPanBounds.max[axis];\n          return true;\n        }\n      }\n\n      return false;\n    },\n        _setupTransforms = function _setupTransforms() {\n      if (_transformKey) {\n        // setup 3d transforms\n        var allow3dTransform = _features.perspective && !_likelyTouchDevice;\n        _translatePrefix = 'translate' + (allow3dTransform ? '3d(' : '(');\n        _translateSufix = _features.perspective ? ', 0px)' : ')';\n        return;\n      } // Override zoom/pan/move functions in case old browser is used (most likely IE)\n      // (so they use left/top/width/height, instead of CSS transform)\n\n\n      _transformKey = 'left';\n      framework.addClass(template, 'pswp--ie');\n\n      _setTranslateX = function _setTranslateX(x, elStyle) {\n        elStyle.left = x + 'px';\n      };\n\n      _applyZoomPanToItem = function _applyZoomPanToItem(item) {\n        var zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n            s = item.container.style,\n            w = zoomRatio * item.w,\n            h = zoomRatio * item.h;\n        s.width = w + 'px';\n        s.height = h + 'px';\n        s.left = item.initialPosition.x + 'px';\n        s.top = item.initialPosition.y + 'px';\n      };\n\n      _applyCurrentZoomPan = function _applyCurrentZoomPan() {\n        if (_currZoomElementStyle) {\n          var s = _currZoomElementStyle,\n              item = self.currItem,\n              zoomRatio = item.fitRatio > 1 ? 1 : item.fitRatio,\n              w = zoomRatio * item.w,\n              h = zoomRatio * item.h;\n          s.width = w + 'px';\n          s.height = h + 'px';\n          s.left = _panOffset.x + 'px';\n          s.top = _panOffset.y + 'px';\n        }\n      };\n    },\n        _onKeyDown = function _onKeyDown(e) {\n      var keydownAction = '';\n\n      if (_options.escKey && e.keyCode === 27) {\n        keydownAction = 'close';\n      } else if (_options.arrowKeys) {\n        if (e.keyCode === 37) {\n          keydownAction = 'prev';\n        } else if (e.keyCode === 39) {\n          keydownAction = 'next';\n        }\n      }\n\n      if (keydownAction) {\n        // don't do anything if special key pressed to prevent from overriding default browser actions\n        // e.g. in Chrome on Mac cmd+arrow-left returns to previous page\n        if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n          if (e.preventDefault) {\n            e.preventDefault();\n          } else {\n            e.returnValue = false;\n          }\n\n          self[keydownAction]();\n        }\n      }\n    },\n        _onGlobalClick = function _onGlobalClick(e) {\n      if (!e) {\n        return;\n      } // don't allow click event to pass through when triggering after drag or some other gesture\n\n\n      if (_moved || _zoomStarted || _mainScrollAnimating || _verticalDragInitiated) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n        _updatePageScrollOffset = function _updatePageScrollOffset() {\n      self.setScrollOffset(0, framework.getScrollY());\n    }; // Micro animation engine\n\n\n    var _animations = {},\n        _numAnimations = 0,\n        _stopAnimation = function _stopAnimation(name) {\n      if (_animations[name]) {\n        if (_animations[name].raf) {\n          _cancelAF(_animations[name].raf);\n        }\n\n        _numAnimations--;\n        delete _animations[name];\n      }\n    },\n        _registerStartAnimation = function _registerStartAnimation(name) {\n      if (_animations[name]) {\n        _stopAnimation(name);\n      }\n\n      if (!_animations[name]) {\n        _numAnimations++;\n        _animations[name] = {};\n      }\n    },\n        _stopAllAnimations = function _stopAllAnimations() {\n      for (var prop in _animations) {\n        if (_animations.hasOwnProperty(prop)) {\n          _stopAnimation(prop);\n        }\n      }\n    },\n        _animateProp = function _animateProp(name, b, endProp, d, easingFn, onUpdate, onComplete) {\n      var startAnimTime = _getCurrentTime(),\n          t;\n\n      _registerStartAnimation(name);\n\n      var animloop = function animloop() {\n        if (_animations[name]) {\n          t = _getCurrentTime() - startAnimTime; // time diff\n          //b - beginning (start prop)\n          //d - anim duration\n\n          if (t >= d) {\n            _stopAnimation(name);\n\n            onUpdate(endProp);\n\n            if (onComplete) {\n              onComplete();\n            }\n\n            return;\n          }\n\n          onUpdate((endProp - b) * easingFn(t / d) + b);\n          _animations[name].raf = _requestAF(animloop);\n        }\n      };\n\n      animloop();\n    };\n\n    var publicMethods = {\n      // make a few local variables and functions public\n      shout: _shout,\n      listen: _listen,\n      viewportSize: _viewportSize,\n      options: _options,\n      isMainScrollAnimating: function isMainScrollAnimating() {\n        return _mainScrollAnimating;\n      },\n      getZoomLevel: function getZoomLevel() {\n        return _currZoomLevel;\n      },\n      getCurrentIndex: function getCurrentIndex() {\n        return _currentItemIndex;\n      },\n      isDragging: function isDragging() {\n        return _isDragging;\n      },\n      isZooming: function isZooming() {\n        return _isZooming;\n      },\n      setScrollOffset: function setScrollOffset(x, y) {\n        _offset.x = x;\n        _currentWindowScrollY = _offset.y = y;\n\n        _shout('updateScrollOffset', _offset);\n      },\n      applyZoomPan: function applyZoomPan(zoomLevel, panX, panY, allowRenderResolution) {\n        _panOffset.x = panX;\n        _panOffset.y = panY;\n        _currZoomLevel = zoomLevel;\n\n        _applyCurrentZoomPan(allowRenderResolution);\n      },\n      init: function init() {\n        if (_isOpen || _isDestroying) {\n          return;\n        }\n\n        var i;\n        self.framework = framework; // basic functionality\n\n        self.template = template; // root DOM element of PhotoSwipe\n\n        self.bg = framework.getChildByClass(template, 'pswp__bg');\n        _initalClassName = template.className;\n        _isOpen = true;\n        _features = framework.detectFeatures();\n        _requestAF = _features.raf;\n        _cancelAF = _features.caf;\n        _transformKey = _features.transform;\n        _oldIE = _features.oldIE;\n        self.scrollWrap = framework.getChildByClass(template, 'pswp__scroll-wrap');\n        self.container = framework.getChildByClass(self.scrollWrap, 'pswp__container');\n        _containerStyle = self.container.style; // for fast access\n        // Objects that hold slides (there are only 3 in DOM)\n\n        self.itemHolders = _itemHolders = [{\n          el: self.container.children[0],\n          wrap: 0,\n          index: -1\n        }, {\n          el: self.container.children[1],\n          wrap: 0,\n          index: -1\n        }, {\n          el: self.container.children[2],\n          wrap: 0,\n          index: -1\n        }]; // hide nearby item holders until initial zoom animation finishes (to avoid extra Paints)\n\n        _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'none';\n\n        _setupTransforms(); // Setup global events\n\n\n        _globalEventHandlers = {\n          resize: self.updateSize,\n          // Fixes: iOS 10.3 resize event\n          // does not update scrollWrap.clientWidth instantly after resize\n          // https://github.com/dimsemenov/PhotoSwipe/issues/1315\n          orientationchange: function orientationchange() {\n            clearTimeout(_orientationChangeTimeout);\n            _orientationChangeTimeout = setTimeout(function () {\n              if (_viewportSize.x !== self.scrollWrap.clientWidth) {\n                self.updateSize();\n              }\n            }, 500);\n          },\n          scroll: _updatePageScrollOffset,\n          keydown: _onKeyDown,\n          click: _onGlobalClick\n        }; // disable show/hide effects on old browsers that don't support CSS animations or transforms, \n        // old IOS, Android and Opera mobile. Blackberry seems to work fine, even older models.\n\n        var oldPhone = _features.isOldIOSPhone || _features.isOldAndroid || _features.isMobileOpera;\n\n        if (!_features.animationName || !_features.transform || oldPhone) {\n          _options.showAnimationDuration = _options.hideAnimationDuration = 0;\n        } // init modules\n\n\n        for (i = 0; i < _modules.length; i++) {\n          self['init' + _modules[i]]();\n        } // init\n\n\n        if (UiClass) {\n          var ui = self.ui = new UiClass(self, framework);\n          ui.init();\n        }\n\n        _shout('firstUpdate');\n\n        _currentItemIndex = _currentItemIndex || _options.index || 0; // validate index\n\n        if (isNaN(_currentItemIndex) || _currentItemIndex < 0 || _currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = 0;\n        }\n\n        self.currItem = _getItemAt(_currentItemIndex);\n\n        if (_features.isOldIOSPhone || _features.isOldAndroid) {\n          _isFixedPosition = false;\n        }\n\n        template.setAttribute('aria-hidden', 'false');\n\n        if (_options.modal) {\n          if (!_isFixedPosition) {\n            template.style.position = 'absolute';\n            template.style.top = framework.getScrollY() + 'px';\n          } else {\n            template.style.position = 'fixed';\n          }\n        }\n\n        if (_currentWindowScrollY === undefined) {\n          _shout('initialLayout');\n\n          _currentWindowScrollY = _initalWindowScrollY = framework.getScrollY();\n        } // add classes to root element of PhotoSwipe\n\n\n        var rootClasses = 'pswp--open ';\n\n        if (_options.mainClass) {\n          rootClasses += _options.mainClass + ' ';\n        }\n\n        if (_options.showHideOpacity) {\n          rootClasses += 'pswp--animate_opacity ';\n        }\n\n        rootClasses += _likelyTouchDevice ? 'pswp--touch' : 'pswp--notouch';\n        rootClasses += _features.animationName ? ' pswp--css_animation' : '';\n        rootClasses += _features.svg ? ' pswp--svg' : '';\n        framework.addClass(template, rootClasses);\n        self.updateSize(); // initial update\n\n        _containerShiftIndex = -1;\n        _indexDiff = null;\n\n        for (i = 0; i < NUM_HOLDERS; i++) {\n          _setTranslateX((i + _containerShiftIndex) * _slideSize.x, _itemHolders[i].el.style);\n        }\n\n        if (!_oldIE) {\n          framework.bind(self.scrollWrap, _downEvents, self); // no dragging for old IE\n        }\n\n        _listen('initialZoomInEnd', function () {\n          self.setContent(_itemHolders[0], _currentItemIndex - 1);\n          self.setContent(_itemHolders[2], _currentItemIndex + 1);\n          _itemHolders[0].el.style.display = _itemHolders[2].el.style.display = 'block';\n\n          if (_options.focus) {\n            // focus causes layout, \n            // which causes lag during the animation, \n            // that's why we delay it untill the initial zoom transition ends\n            template.focus();\n          }\n\n          _bindEvents();\n        }); // set content for center slide (first time)\n\n\n        self.setContent(_itemHolders[1], _currentItemIndex);\n        self.updateCurrItem();\n\n        _shout('afterInit');\n\n        if (!_isFixedPosition) {\n          // On all versions of iOS lower than 8.0, we check size of viewport every second.\n          // \n          // This is done to detect when Safari top & bottom bars appear, \n          // as this action doesn't trigger any events (like resize). \n          // \n          // On iOS8 they fixed this.\n          // \n          // 10 Nov 2014: iOS 7 usage ~40%. iOS 8 usage 56%.\n          _updateSizeInterval = setInterval(function () {\n            if (!_numAnimations && !_isDragging && !_isZooming && _currZoomLevel === self.currItem.initialZoomLevel) {\n              self.updateSize();\n            }\n          }, 1000);\n        }\n\n        framework.addClass(template, 'pswp--visible');\n      },\n      // Close the gallery, then destroy it\n      close: function close() {\n        if (!_isOpen) {\n          return;\n        }\n\n        _isOpen = false;\n        _isDestroying = true;\n\n        _shout('close');\n\n        _unbindEvents();\n\n        _showOrHide(self.currItem, null, true, self.destroy);\n      },\n      // destroys the gallery (unbinds events, cleans up intervals and timeouts to avoid memory leaks)\n      destroy: function destroy() {\n        _shout('destroy');\n\n        if (_showOrHideTimeout) {\n          clearTimeout(_showOrHideTimeout);\n        }\n\n        template.setAttribute('aria-hidden', 'true');\n        template.className = _initalClassName;\n\n        if (_updateSizeInterval) {\n          clearInterval(_updateSizeInterval);\n        }\n\n        framework.unbind(self.scrollWrap, _downEvents, self); // we unbind scroll event at the end, as closing animation may depend on it\n\n        framework.unbind(window, 'scroll', self);\n\n        _stopDragUpdateLoop();\n\n        _stopAllAnimations();\n\n        _listeners = null;\n      },\n\n      /**\n       * Pan image to position\n       * @param {Number} x     \n       * @param {Number} y     \n       * @param {Boolean} force Will ignore bounds if set to true.\n       */\n      panTo: function panTo(x, y, force) {\n        if (!force) {\n          if (x > _currPanBounds.min.x) {\n            x = _currPanBounds.min.x;\n          } else if (x < _currPanBounds.max.x) {\n            x = _currPanBounds.max.x;\n          }\n\n          if (y > _currPanBounds.min.y) {\n            y = _currPanBounds.min.y;\n          } else if (y < _currPanBounds.max.y) {\n            y = _currPanBounds.max.y;\n          }\n        }\n\n        _panOffset.x = x;\n        _panOffset.y = y;\n\n        _applyCurrentZoomPan();\n      },\n      handleEvent: function handleEvent(e) {\n        e = e || window.event;\n\n        if (_globalEventHandlers[e.type]) {\n          _globalEventHandlers[e.type](e);\n        }\n      },\n      goTo: function goTo(index) {\n        index = _getLoopedId(index);\n        var diff = index - _currentItemIndex;\n        _indexDiff = diff;\n        _currentItemIndex = index;\n        self.currItem = _getItemAt(_currentItemIndex);\n        _currPositionIndex -= diff;\n\n        _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n        _stopAllAnimations();\n\n        _mainScrollAnimating = false;\n        self.updateCurrItem();\n      },\n      next: function next() {\n        self.goTo(_currentItemIndex + 1);\n      },\n      prev: function prev() {\n        self.goTo(_currentItemIndex - 1);\n      },\n      // update current zoom/pan objects\n      updateCurrZoomItem: function updateCurrZoomItem(emulateSetContent) {\n        if (emulateSetContent) {\n          _shout('beforeChange', 0);\n        } // itemHolder[1] is middle (current) item\n\n\n        if (_itemHolders[1].el.children.length) {\n          var zoomElement = _itemHolders[1].el.children[0];\n\n          if (framework.hasClass(zoomElement, 'pswp__zoom-wrap')) {\n            _currZoomElementStyle = zoomElement.style;\n          } else {\n            _currZoomElementStyle = null;\n          }\n        } else {\n          _currZoomElementStyle = null;\n        }\n\n        _currPanBounds = self.currItem.bounds;\n        _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n        _panOffset.x = _currPanBounds.center.x;\n        _panOffset.y = _currPanBounds.center.y;\n\n        if (emulateSetContent) {\n          _shout('afterChange');\n        }\n      },\n      invalidateCurrItems: function invalidateCurrItems() {\n        _itemsNeedUpdate = true;\n\n        for (var i = 0; i < NUM_HOLDERS; i++) {\n          if (_itemHolders[i].item) {\n            _itemHolders[i].item.needsUpdate = true;\n          }\n        }\n      },\n      updateCurrItem: function updateCurrItem(beforeAnimation) {\n        if (_indexDiff === 0) {\n          return;\n        }\n\n        var diffAbs = Math.abs(_indexDiff),\n            tempHolder;\n\n        if (beforeAnimation && diffAbs < 2) {\n          return;\n        }\n\n        self.currItem = _getItemAt(_currentItemIndex);\n        _renderMaxResolution = false;\n\n        _shout('beforeChange', _indexDiff);\n\n        if (diffAbs >= NUM_HOLDERS) {\n          _containerShiftIndex += _indexDiff + (_indexDiff > 0 ? -NUM_HOLDERS : NUM_HOLDERS);\n          diffAbs = NUM_HOLDERS;\n        }\n\n        for (var i = 0; i < diffAbs; i++) {\n          if (_indexDiff > 0) {\n            tempHolder = _itemHolders.shift();\n            _itemHolders[NUM_HOLDERS - 1] = tempHolder; // move first to last\n\n            _containerShiftIndex++;\n\n            _setTranslateX((_containerShiftIndex + 2) * _slideSize.x, tempHolder.el.style);\n\n            self.setContent(tempHolder, _currentItemIndex - diffAbs + i + 1 + 1);\n          } else {\n            tempHolder = _itemHolders.pop();\n\n            _itemHolders.unshift(tempHolder); // move last to first\n\n\n            _containerShiftIndex--;\n\n            _setTranslateX(_containerShiftIndex * _slideSize.x, tempHolder.el.style);\n\n            self.setContent(tempHolder, _currentItemIndex + diffAbs - i - 1 - 1);\n          }\n        } // reset zoom/pan on previous item\n\n\n        if (_currZoomElementStyle && Math.abs(_indexDiff) === 1) {\n          var prevItem = _getItemAt(_prevItemIndex);\n\n          if (prevItem.initialZoomLevel !== _currZoomLevel) {\n            _calculateItemSize(prevItem, _viewportSize);\n\n            _setImageSize(prevItem);\n\n            _applyZoomPanToItem(prevItem);\n          }\n        } // reset diff after update\n\n\n        _indexDiff = 0;\n        self.updateCurrZoomItem();\n        _prevItemIndex = _currentItemIndex;\n\n        _shout('afterChange');\n      },\n      updateSize: function updateSize(force) {\n        if (!_isFixedPosition && _options.modal) {\n          var windowScrollY = framework.getScrollY();\n\n          if (_currentWindowScrollY !== windowScrollY) {\n            template.style.top = windowScrollY + 'px';\n            _currentWindowScrollY = windowScrollY;\n          }\n\n          if (!force && _windowVisibleSize.x === window.innerWidth && _windowVisibleSize.y === window.innerHeight) {\n            return;\n          }\n\n          _windowVisibleSize.x = window.innerWidth;\n          _windowVisibleSize.y = window.innerHeight; //template.style.width = _windowVisibleSize.x + 'px';\n\n          template.style.height = _windowVisibleSize.y + 'px';\n        }\n\n        _viewportSize.x = self.scrollWrap.clientWidth;\n        _viewportSize.y = self.scrollWrap.clientHeight;\n\n        _updatePageScrollOffset();\n\n        _slideSize.x = _viewportSize.x + Math.round(_viewportSize.x * _options.spacing);\n        _slideSize.y = _viewportSize.y;\n\n        _moveMainScroll(_slideSize.x * _currPositionIndex);\n\n        _shout('beforeResize'); // even may be used for example to switch image sources\n        // don't re-calculate size on inital size update\n\n\n        if (_containerShiftIndex !== undefined) {\n          var holder, item, hIndex;\n\n          for (var i = 0; i < NUM_HOLDERS; i++) {\n            holder = _itemHolders[i];\n\n            _setTranslateX((i + _containerShiftIndex) * _slideSize.x, holder.el.style);\n\n            hIndex = _currentItemIndex + i - 1;\n\n            if (_options.loop && _getNumItems() > 2) {\n              hIndex = _getLoopedId(hIndex);\n            } // update zoom level on items and refresh source (if needsUpdate)\n\n\n            item = _getItemAt(hIndex); // re-render gallery item if `needsUpdate`,\n            // or doesn't have `bounds` (entirely new slide object)\n\n            if (item && (_itemsNeedUpdate || item.needsUpdate || !item.bounds)) {\n              self.cleanSlide(item);\n              self.setContent(holder, hIndex); // if \"center\" slide\n\n              if (i === 1) {\n                self.currItem = item;\n                self.updateCurrZoomItem(true);\n              }\n\n              item.needsUpdate = false;\n            } else if (holder.index === -1 && hIndex >= 0) {\n              // add content first time\n              self.setContent(holder, hIndex);\n            }\n\n            if (item && item.container) {\n              _calculateItemSize(item, _viewportSize);\n\n              _setImageSize(item);\n\n              _applyZoomPanToItem(item);\n            }\n          }\n\n          _itemsNeedUpdate = false;\n        }\n\n        _startZoomLevel = _currZoomLevel = self.currItem.initialZoomLevel;\n        _currPanBounds = self.currItem.bounds;\n\n        if (_currPanBounds) {\n          _panOffset.x = _currPanBounds.center.x;\n          _panOffset.y = _currPanBounds.center.y;\n\n          _applyCurrentZoomPan(true);\n        }\n\n        _shout('resize');\n      },\n      // Zoom current item to\n      zoomTo: function zoomTo(destZoomLevel, centerPoint, speed, easingFn, updateFn) {\n        /*\n        \tif(destZoomLevel === 'fit') {\n        \t\tdestZoomLevel = self.currItem.fitRatio;\n        \t} else if(destZoomLevel === 'fill') {\n        \t\tdestZoomLevel = self.currItem.fillRatio;\n        \t}\n        */\n        if (centerPoint) {\n          _startZoomLevel = _currZoomLevel;\n          _midZoomPoint.x = Math.abs(centerPoint.x) - _panOffset.x;\n          _midZoomPoint.y = Math.abs(centerPoint.y) - _panOffset.y;\n\n          _equalizePoints(_startPanOffset, _panOffset);\n        }\n\n        var destPanBounds = _calculatePanBounds(destZoomLevel, false),\n            destPanOffset = {};\n\n        _modifyDestPanOffset('x', destPanBounds, destPanOffset, destZoomLevel);\n\n        _modifyDestPanOffset('y', destPanBounds, destPanOffset, destZoomLevel);\n\n        var initialZoomLevel = _currZoomLevel;\n        var initialPanOffset = {\n          x: _panOffset.x,\n          y: _panOffset.y\n        };\n\n        _roundPoint(destPanOffset);\n\n        var onUpdate = function onUpdate(now) {\n          if (now === 1) {\n            _currZoomLevel = destZoomLevel;\n            _panOffset.x = destPanOffset.x;\n            _panOffset.y = destPanOffset.y;\n          } else {\n            _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n            _panOffset.x = (destPanOffset.x - initialPanOffset.x) * now + initialPanOffset.x;\n            _panOffset.y = (destPanOffset.y - initialPanOffset.y) * now + initialPanOffset.y;\n          }\n\n          if (updateFn) {\n            updateFn(now);\n          }\n\n          _applyCurrentZoomPan(now === 1);\n        };\n\n        if (speed) {\n          _animateProp('customZoomTo', 0, 1, speed, easingFn || framework.easing.sine.inOut, onUpdate);\n        } else {\n          onUpdate(1);\n        }\n      }\n    };\n    /*>>core*/\n\n    /*>>gestures*/\n\n    /**\n     * Mouse/touch/pointer event handlers.\n     * \n     * separated from @core.js for readability\n     */\n\n    var MIN_SWIPE_DISTANCE = 30,\n        DIRECTION_CHECK_OFFSET = 10; // amount of pixels to drag to determine direction of swipe\n\n    var _gestureStartTime,\n        _gestureCheckSpeedTime,\n        // pool of objects that are used during dragging of zooming\n    p = {},\n        // first point\n    p2 = {},\n        // second point (for zoom gesture)\n    delta = {},\n        _currPoint = {},\n        _startPoint = {},\n        _currPointers = [],\n        _startMainScrollPos = {},\n        _releaseAnimData,\n        _posPoints = [],\n        // array of points during dragging, used to determine type of gesture\n    _tempPoint = {},\n        _isZoomingIn,\n        _verticalDragInitiated,\n        _oldAndroidTouchEndTimeout,\n        _currZoomedItemIndex = 0,\n        _centerPoint = _getEmptyPoint(),\n        _lastReleaseTime = 0,\n        _isDragging,\n        // at least one pointer is down\n    _isMultitouch,\n        // at least two _pointers are down\n    _zoomStarted,\n        // zoom level changed during zoom gesture\n    _moved,\n        _dragAnimFrame,\n        _mainScrollShifted,\n        _currentPoints,\n        // array of current touch points\n    _isZooming,\n        _currPointsDistance,\n        _startPointsDistance,\n        _currPanBounds,\n        _mainScrollPos = _getEmptyPoint(),\n        _currZoomElementStyle,\n        _mainScrollAnimating,\n        // true, if animation after swipe gesture is running\n    _midZoomPoint = _getEmptyPoint(),\n        _currCenterPoint = _getEmptyPoint(),\n        _direction,\n        _isFirstMove,\n        _opacityChanged,\n        _bgOpacity,\n        _wasOverInitialZoom,\n        _isEqualPoints = function _isEqualPoints(p1, p2) {\n      return p1.x === p2.x && p1.y === p2.y;\n    },\n        _isNearbyPoints = function _isNearbyPoints(touch0, touch1) {\n      return Math.abs(touch0.x - touch1.x) < DOUBLE_TAP_RADIUS && Math.abs(touch0.y - touch1.y) < DOUBLE_TAP_RADIUS;\n    },\n        _calculatePointsDistance = function _calculatePointsDistance(p1, p2) {\n      _tempPoint.x = Math.abs(p1.x - p2.x);\n      _tempPoint.y = Math.abs(p1.y - p2.y);\n      return Math.sqrt(_tempPoint.x * _tempPoint.x + _tempPoint.y * _tempPoint.y);\n    },\n        _stopDragUpdateLoop = function _stopDragUpdateLoop() {\n      if (_dragAnimFrame) {\n        _cancelAF(_dragAnimFrame);\n\n        _dragAnimFrame = null;\n      }\n    },\n        _dragUpdateLoop = function _dragUpdateLoop() {\n      if (_isDragging) {\n        _dragAnimFrame = _requestAF(_dragUpdateLoop);\n\n        _renderMovement();\n      }\n    },\n        _canPan = function _canPan() {\n      return !(_options.scaleMode === 'fit' && _currZoomLevel === self.currItem.initialZoomLevel);\n    },\n        // find the closest parent DOM element\n    _closestElement = function _closestElement(el, fn) {\n      if (!el || el === document) {\n        return false;\n      } // don't search elements above pswp__scroll-wrap\n\n\n      if (el.getAttribute('class') && el.getAttribute('class').indexOf('pswp__scroll-wrap') > -1) {\n        return false;\n      }\n\n      if (fn(el)) {\n        return el;\n      }\n\n      return _closestElement(el.parentNode, fn);\n    },\n        _preventObj = {},\n        _preventDefaultEventBehaviour = function _preventDefaultEventBehaviour(e, isDown) {\n      _preventObj.prevent = !_closestElement(e.target, _options.isClickableElement);\n\n      _shout('preventDragEvent', e, isDown, _preventObj);\n\n      return _preventObj.prevent;\n    },\n        _convertTouchToPoint = function _convertTouchToPoint(touch, p) {\n      p.x = touch.pageX;\n      p.y = touch.pageY;\n      p.id = touch.identifier;\n      return p;\n    },\n        _findCenterOfPoints = function _findCenterOfPoints(p1, p2, pCenter) {\n      pCenter.x = (p1.x + p2.x) * 0.5;\n      pCenter.y = (p1.y + p2.y) * 0.5;\n    },\n        _pushPosPoint = function _pushPosPoint(time, x, y) {\n      if (time - _gestureCheckSpeedTime > 50) {\n        var o = _posPoints.length > 2 ? _posPoints.shift() : {};\n        o.x = x;\n        o.y = y;\n\n        _posPoints.push(o);\n\n        _gestureCheckSpeedTime = time;\n      }\n    },\n        _calculateVerticalDragOpacityRatio = function _calculateVerticalDragOpacityRatio() {\n      var yOffset = _panOffset.y - self.currItem.initialPosition.y; // difference between initial and current position\n\n      return 1 - Math.abs(yOffset / (_viewportSize.y / 2));\n    },\n        // points pool, reused during touch events\n    _ePoint1 = {},\n        _ePoint2 = {},\n        _tempPointsArr = [],\n        _tempCounter,\n        _getTouchPoints = function _getTouchPoints(e) {\n      // clean up previous points, without recreating array\n      while (_tempPointsArr.length > 0) {\n        _tempPointsArr.pop();\n      }\n\n      if (!_pointerEventEnabled) {\n        if (e.type.indexOf('touch') > -1) {\n          if (e.touches && e.touches.length > 0) {\n            _tempPointsArr[0] = _convertTouchToPoint(e.touches[0], _ePoint1);\n\n            if (e.touches.length > 1) {\n              _tempPointsArr[1] = _convertTouchToPoint(e.touches[1], _ePoint2);\n            }\n          }\n        } else {\n          _ePoint1.x = e.pageX;\n          _ePoint1.y = e.pageY;\n          _ePoint1.id = '';\n          _tempPointsArr[0] = _ePoint1; //_ePoint1;\n        }\n      } else {\n        _tempCounter = 0; // we can use forEach, as pointer events are supported only in modern browsers\n\n        _currPointers.forEach(function (p) {\n          if (_tempCounter === 0) {\n            _tempPointsArr[0] = p;\n          } else if (_tempCounter === 1) {\n            _tempPointsArr[1] = p;\n          }\n\n          _tempCounter++;\n        });\n      }\n\n      return _tempPointsArr;\n    },\n        _panOrMoveMainScroll = function _panOrMoveMainScroll(axis, delta) {\n      var panFriction,\n          overDiff = 0,\n          newOffset = _panOffset[axis] + delta[axis],\n          startOverDiff,\n          dir = delta[axis] > 0,\n          newMainScrollPosition = _mainScrollPos.x + delta.x,\n          mainScrollDiff = _mainScrollPos.x - _startMainScrollPos.x,\n          newPanPos,\n          newMainScrollPos; // calculate fdistance over the bounds and friction\n\n      if (newOffset > _currPanBounds.min[axis] || newOffset < _currPanBounds.max[axis]) {\n        panFriction = _options.panEndFriction; // Linear increasing of friction, so at 1/4 of viewport it's at max value. \n        // Looks not as nice as was expected. Left for history.\n        // panFriction = (1 - (_panOffset[axis] + delta[axis] + panBounds.min[axis]) / (_viewportSize[axis] / 4) );\n      } else {\n        panFriction = 1;\n      }\n\n      newOffset = _panOffset[axis] + delta[axis] * panFriction; // move main scroll or start panning\n\n      if (_options.allowPanToNext || _currZoomLevel === self.currItem.initialZoomLevel) {\n        if (!_currZoomElementStyle) {\n          newMainScrollPos = newMainScrollPosition;\n        } else if (_direction === 'h' && axis === 'x' && !_zoomStarted) {\n          if (dir) {\n            if (newOffset > _currPanBounds.min[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = _currPanBounds.min[axis] - newOffset;\n              startOverDiff = _currPanBounds.min[axis] - _startPanOffset[axis];\n            } // drag right\n\n\n            if ((startOverDiff <= 0 || mainScrollDiff < 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff < 0 && newMainScrollPosition > _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n          } else {\n            if (newOffset < _currPanBounds.max[axis]) {\n              panFriction = _options.panEndFriction;\n              overDiff = newOffset - _currPanBounds.max[axis];\n              startOverDiff = _startPanOffset[axis] - _currPanBounds.max[axis];\n            }\n\n            if ((startOverDiff <= 0 || mainScrollDiff > 0) && _getNumItems() > 1) {\n              newMainScrollPos = newMainScrollPosition;\n\n              if (mainScrollDiff > 0 && newMainScrollPosition < _startMainScrollPos.x) {\n                newMainScrollPos = _startMainScrollPos.x;\n              }\n            } else {\n              if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n                newPanPos = newOffset;\n              }\n            }\n          } //\n\n        }\n\n        if (axis === 'x') {\n          if (newMainScrollPos !== undefined) {\n            _moveMainScroll(newMainScrollPos, true);\n\n            if (newMainScrollPos === _startMainScrollPos.x) {\n              _mainScrollShifted = false;\n            } else {\n              _mainScrollShifted = true;\n            }\n          }\n\n          if (_currPanBounds.min.x !== _currPanBounds.max.x) {\n            if (newPanPos !== undefined) {\n              _panOffset.x = newPanPos;\n            } else if (!_mainScrollShifted) {\n              _panOffset.x += delta.x * panFriction;\n            }\n          }\n\n          return newMainScrollPos !== undefined;\n        }\n      }\n\n      if (!_mainScrollAnimating) {\n        if (!_mainScrollShifted) {\n          if (_currZoomLevel > self.currItem.fitRatio) {\n            _panOffset[axis] += delta[axis] * panFriction;\n          }\n        }\n      }\n    },\n        // Pointerdown/touchstart/mousedown handler\n    _onDragStart = function _onDragStart(e) {\n      // Allow dragging only via left mouse button.\n      // As this handler is not added in IE8 - we ignore e.which\n      // \n      // http://www.quirksmode.org/js/events_properties.html\n      // https://developer.mozilla.org/en-US/docs/Web/API/event.button\n      if (e.type === 'mousedown' && e.button > 0) {\n        return;\n      }\n\n      if (_initialZoomRunning) {\n        e.preventDefault();\n        return;\n      }\n\n      if (_oldAndroidTouchEndTimeout && e.type === 'mousedown') {\n        return;\n      }\n\n      if (_preventDefaultEventBehaviour(e, true)) {\n        e.preventDefault();\n      }\n\n      _shout('pointerDown');\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex < 0) {\n          pointerIndex = _currPointers.length;\n        }\n\n        _currPointers[pointerIndex] = {\n          x: e.pageX,\n          y: e.pageY,\n          id: e.pointerId\n        };\n      }\n\n      var startPointsList = _getTouchPoints(e),\n          numPoints = startPointsList.length;\n\n      _currentPoints = null;\n\n      _stopAllAnimations(); // init drag\n\n\n      if (!_isDragging || numPoints === 1) {\n        _isDragging = _isFirstMove = true;\n        framework.bind(window, _upMoveEvents, self);\n        _isZoomingIn = _wasOverInitialZoom = _opacityChanged = _verticalDragInitiated = _mainScrollShifted = _moved = _isMultitouch = _zoomStarted = false;\n        _direction = null;\n\n        _shout('firstTouchStart', startPointsList);\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _currPanDist.x = _currPanDist.y = 0;\n\n        _equalizePoints(_currPoint, startPointsList[0]);\n\n        _equalizePoints(_startPoint, _currPoint); //_equalizePoints(_startMainScrollPos, _mainScrollPos);\n\n\n        _startMainScrollPos.x = _slideSize.x * _currPositionIndex;\n        _posPoints = [{\n          x: _currPoint.x,\n          y: _currPoint.y\n        }];\n        _gestureCheckSpeedTime = _gestureStartTime = _getCurrentTime(); //_mainScrollAnimationEnd(true);\n\n        _calculatePanBounds(_currZoomLevel, true); // Start rendering\n\n\n        _stopDragUpdateLoop();\n\n        _dragUpdateLoop();\n      } // init zoom\n\n\n      if (!_isZooming && numPoints > 1 && !_mainScrollAnimating && !_mainScrollShifted) {\n        _startZoomLevel = _currZoomLevel;\n        _zoomStarted = false; // true if zoom changed at least once\n\n        _isZooming = _isMultitouch = true;\n        _currPanDist.y = _currPanDist.x = 0;\n\n        _equalizePoints(_startPanOffset, _panOffset);\n\n        _equalizePoints(p, startPointsList[0]);\n\n        _equalizePoints(p2, startPointsList[1]);\n\n        _findCenterOfPoints(p, p2, _currCenterPoint);\n\n        _midZoomPoint.x = Math.abs(_currCenterPoint.x) - _panOffset.x;\n        _midZoomPoint.y = Math.abs(_currCenterPoint.y) - _panOffset.y;\n        _currPointsDistance = _startPointsDistance = _calculatePointsDistance(p, p2);\n      }\n    },\n        // Pointermove/touchmove/mousemove handler\n    _onDragMove = function _onDragMove(e) {\n      e.preventDefault();\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          var p = _currPointers[pointerIndex];\n          p.x = e.pageX;\n          p.y = e.pageY;\n        }\n      }\n\n      if (_isDragging) {\n        var touchesList = _getTouchPoints(e);\n\n        if (!_direction && !_moved && !_isZooming) {\n          if (_mainScrollPos.x !== _slideSize.x * _currPositionIndex) {\n            // if main scroll position is shifted  direction is always horizontal\n            _direction = 'h';\n          } else {\n            var diff = Math.abs(touchesList[0].x - _currPoint.x) - Math.abs(touchesList[0].y - _currPoint.y); // check the direction of movement\n\n            if (Math.abs(diff) >= DIRECTION_CHECK_OFFSET) {\n              _direction = diff > 0 ? 'h' : 'v';\n              _currentPoints = touchesList;\n            }\n          }\n        } else {\n          _currentPoints = touchesList;\n        }\n      }\n    },\n        // \n    _renderMovement = function _renderMovement() {\n      if (!_currentPoints) {\n        return;\n      }\n\n      var numPoints = _currentPoints.length;\n\n      if (numPoints === 0) {\n        return;\n      }\n\n      _equalizePoints(p, _currentPoints[0]);\n\n      delta.x = p.x - _currPoint.x;\n      delta.y = p.y - _currPoint.y;\n\n      if (_isZooming && numPoints > 1) {\n        // Handle behaviour for more than 1 point\n        _currPoint.x = p.x;\n        _currPoint.y = p.y; // check if one of two points changed\n\n        if (!delta.x && !delta.y && _isEqualPoints(_currentPoints[1], p2)) {\n          return;\n        }\n\n        _equalizePoints(p2, _currentPoints[1]);\n\n        if (!_zoomStarted) {\n          _zoomStarted = true;\n\n          _shout('zoomGestureStarted');\n        } // Distance between two points\n\n\n        var pointsDistance = _calculatePointsDistance(p, p2);\n\n        var zoomLevel = _calculateZoomLevel(pointsDistance); // slightly over the of initial zoom level\n\n\n        if (zoomLevel > self.currItem.initialZoomLevel + self.currItem.initialZoomLevel / 15) {\n          _wasOverInitialZoom = true;\n        } // Apply the friction if zoom level is out of the bounds\n\n\n        var zoomFriction = 1,\n            minZoomLevel = _getMinZoomLevel(),\n            maxZoomLevel = _getMaxZoomLevel();\n\n        if (zoomLevel < minZoomLevel) {\n          if (_options.pinchToClose && !_wasOverInitialZoom && _startZoomLevel <= self.currItem.initialZoomLevel) {\n            // fade out background if zooming out\n            var minusDiff = minZoomLevel - zoomLevel;\n            var percent = 1 - minusDiff / (minZoomLevel / 1.2);\n\n            _applyBgOpacity(percent);\n\n            _shout('onPinchClose', percent);\n\n            _opacityChanged = true;\n          } else {\n            zoomFriction = (minZoomLevel - zoomLevel) / minZoomLevel;\n\n            if (zoomFriction > 1) {\n              zoomFriction = 1;\n            }\n\n            zoomLevel = minZoomLevel - zoomFriction * (minZoomLevel / 3);\n          }\n        } else if (zoomLevel > maxZoomLevel) {\n          // 1.5 - extra zoom level above the max. E.g. if max is x6, real max 6 + 1.5 = 7.5\n          zoomFriction = (zoomLevel - maxZoomLevel) / (minZoomLevel * 6);\n\n          if (zoomFriction > 1) {\n            zoomFriction = 1;\n          }\n\n          zoomLevel = maxZoomLevel + zoomFriction * minZoomLevel;\n        }\n\n        if (zoomFriction < 0) {\n          zoomFriction = 0;\n        } // distance between touch points after friction is applied\n\n\n        _currPointsDistance = pointsDistance; // _centerPoint - The point in the middle of two pointers\n\n        _findCenterOfPoints(p, p2, _centerPoint); // paning with two pointers pressed\n\n\n        _currPanDist.x += _centerPoint.x - _currCenterPoint.x;\n        _currPanDist.y += _centerPoint.y - _currCenterPoint.y;\n\n        _equalizePoints(_currCenterPoint, _centerPoint);\n\n        _panOffset.x = _calculatePanOffset('x', zoomLevel);\n        _panOffset.y = _calculatePanOffset('y', zoomLevel);\n        _isZoomingIn = zoomLevel > _currZoomLevel;\n        _currZoomLevel = zoomLevel;\n\n        _applyCurrentZoomPan();\n      } else {\n        // handle behaviour for one point (dragging or panning)\n        if (!_direction) {\n          return;\n        }\n\n        if (_isFirstMove) {\n          _isFirstMove = false; // subtract drag distance that was used during the detection direction  \n\n          if (Math.abs(delta.x) >= DIRECTION_CHECK_OFFSET) {\n            delta.x -= _currentPoints[0].x - _startPoint.x;\n          }\n\n          if (Math.abs(delta.y) >= DIRECTION_CHECK_OFFSET) {\n            delta.y -= _currentPoints[0].y - _startPoint.y;\n          }\n        }\n\n        _currPoint.x = p.x;\n        _currPoint.y = p.y; // do nothing if pointers position hasn't changed\n\n        if (delta.x === 0 && delta.y === 0) {\n          return;\n        }\n\n        if (_direction === 'v' && _options.closeOnVerticalDrag) {\n          if (!_canPan()) {\n            _currPanDist.y += delta.y;\n            _panOffset.y += delta.y;\n\n            var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n            _verticalDragInitiated = true;\n\n            _shout('onVerticalDrag', opacityRatio);\n\n            _applyBgOpacity(opacityRatio);\n\n            _applyCurrentZoomPan();\n\n            return;\n          }\n        }\n\n        _pushPosPoint(_getCurrentTime(), p.x, p.y);\n\n        _moved = true;\n        _currPanBounds = self.currItem.bounds;\n\n        var mainScrollChanged = _panOrMoveMainScroll('x', delta);\n\n        if (!mainScrollChanged) {\n          _panOrMoveMainScroll('y', delta);\n\n          _roundPoint(_panOffset);\n\n          _applyCurrentZoomPan();\n        }\n      }\n    },\n        // Pointerup/pointercancel/touchend/touchcancel/mouseup event handler\n    _onDragRelease = function _onDragRelease(e) {\n      if (_features.isOldAndroid) {\n        if (_oldAndroidTouchEndTimeout && e.type === 'mouseup') {\n          return;\n        } // on Android (v4.1, 4.2, 4.3 & possibly older) \n        // ghost mousedown/up event isn't preventable via e.preventDefault,\n        // which causes fake mousedown event\n        // so we block mousedown/up for 600ms\n\n\n        if (e.type.indexOf('touch') > -1) {\n          clearTimeout(_oldAndroidTouchEndTimeout);\n          _oldAndroidTouchEndTimeout = setTimeout(function () {\n            _oldAndroidTouchEndTimeout = 0;\n          }, 600);\n        }\n      }\n\n      _shout('pointerUp');\n\n      if (_preventDefaultEventBehaviour(e, false)) {\n        e.preventDefault();\n      }\n\n      var releasePoint;\n\n      if (_pointerEventEnabled) {\n        var pointerIndex = framework.arraySearch(_currPointers, e.pointerId, 'id');\n\n        if (pointerIndex > -1) {\n          releasePoint = _currPointers.splice(pointerIndex, 1)[0];\n\n          if (navigator.msPointerEnabled) {\n            var MSPOINTER_TYPES = {\n              4: 'mouse',\n              // event.MSPOINTER_TYPE_MOUSE\n              2: 'touch',\n              // event.MSPOINTER_TYPE_TOUCH \n              3: 'pen' // event.MSPOINTER_TYPE_PEN\n\n            };\n            releasePoint.type = MSPOINTER_TYPES[e.pointerType];\n\n            if (!releasePoint.type) {\n              releasePoint.type = e.pointerType || 'mouse';\n            }\n          } else {\n            releasePoint.type = e.pointerType || 'mouse';\n          }\n        }\n      }\n\n      var touchList = _getTouchPoints(e),\n          gestureType,\n          numPoints = touchList.length;\n\n      if (e.type === 'mouseup') {\n        numPoints = 0;\n      } // Do nothing if there were 3 touch points or more\n\n\n      if (numPoints === 2) {\n        _currentPoints = null;\n        return true;\n      } // if second pointer released\n\n\n      if (numPoints === 1) {\n        _equalizePoints(_startPoint, touchList[0]);\n      } // pointer hasn't moved, send \"tap release\" point\n\n\n      if (numPoints === 0 && !_direction && !_mainScrollAnimating) {\n        if (!releasePoint) {\n          if (e.type === 'mouseup') {\n            releasePoint = {\n              x: e.pageX,\n              y: e.pageY,\n              type: 'mouse'\n            };\n          } else if (e.changedTouches && e.changedTouches[0]) {\n            releasePoint = {\n              x: e.changedTouches[0].pageX,\n              y: e.changedTouches[0].pageY,\n              type: 'touch'\n            };\n          }\n        }\n\n        _shout('touchRelease', e, releasePoint);\n      } // Difference in time between releasing of two last touch points (zoom gesture)\n\n\n      var releaseTimeDiff = -1; // Gesture completed, no pointers left\n\n      if (numPoints === 0) {\n        _isDragging = false;\n        framework.unbind(window, _upMoveEvents, self);\n\n        _stopDragUpdateLoop();\n\n        if (_isZooming) {\n          // Two points released at the same time\n          releaseTimeDiff = 0;\n        } else if (_lastReleaseTime !== -1) {\n          releaseTimeDiff = _getCurrentTime() - _lastReleaseTime;\n        }\n      }\n\n      _lastReleaseTime = numPoints === 1 ? _getCurrentTime() : -1;\n\n      if (releaseTimeDiff !== -1 && releaseTimeDiff < 150) {\n        gestureType = 'zoom';\n      } else {\n        gestureType = 'swipe';\n      }\n\n      if (_isZooming && numPoints < 2) {\n        _isZooming = false; // Only second point released\n\n        if (numPoints === 1) {\n          gestureType = 'zoomPointerUp';\n        }\n\n        _shout('zoomGestureEnded');\n      }\n\n      _currentPoints = null;\n\n      if (!_moved && !_zoomStarted && !_mainScrollAnimating && !_verticalDragInitiated) {\n        // nothing to animate\n        return;\n      }\n\n      _stopAllAnimations();\n\n      if (!_releaseAnimData) {\n        _releaseAnimData = _initDragReleaseAnimationData();\n      }\n\n      _releaseAnimData.calculateSwipeSpeed('x');\n\n      if (_verticalDragInitiated) {\n        var opacityRatio = _calculateVerticalDragOpacityRatio();\n\n        if (opacityRatio < _options.verticalDragRange) {\n          self.close();\n        } else {\n          var initalPanY = _panOffset.y,\n              initialBgOpacity = _bgOpacity;\n\n          _animateProp('verticalDrag', 0, 1, 300, framework.easing.cubic.out, function (now) {\n            _panOffset.y = (self.currItem.initialPosition.y - initalPanY) * now + initalPanY;\n\n            _applyBgOpacity((1 - initialBgOpacity) * now + initialBgOpacity);\n\n            _applyCurrentZoomPan();\n          });\n\n          _shout('onVerticalDrag', 1);\n        }\n\n        return;\n      } // main scroll \n\n\n      if ((_mainScrollShifted || _mainScrollAnimating) && numPoints === 0) {\n        var itemChanged = _finishSwipeMainScrollGesture(gestureType, _releaseAnimData);\n\n        if (itemChanged) {\n          return;\n        }\n\n        gestureType = 'zoomPointerUp';\n      } // prevent zoom/pan animation when main scroll animation runs\n\n\n      if (_mainScrollAnimating) {\n        return;\n      } // Complete simple zoom gesture (reset zoom level if it's out of the bounds)  \n\n\n      if (gestureType !== 'swipe') {\n        _completeZoomGesture();\n\n        return;\n      } // Complete pan gesture if main scroll is not shifted, and it's possible to pan current image\n\n\n      if (!_mainScrollShifted && _currZoomLevel > self.currItem.fitRatio) {\n        _completePanGesture(_releaseAnimData);\n      }\n    },\n        // Returns object with data about gesture\n    // It's created only once and then reused\n    _initDragReleaseAnimationData = function _initDragReleaseAnimationData() {\n      // temp local vars\n      var lastFlickDuration, tempReleasePos; // s = this\n\n      var s = {\n        lastFlickOffset: {},\n        lastFlickDist: {},\n        lastFlickSpeed: {},\n        slowDownRatio: {},\n        slowDownRatioReverse: {},\n        speedDecelerationRatio: {},\n        speedDecelerationRatioAbs: {},\n        distanceOffset: {},\n        backAnimDestination: {},\n        backAnimStarted: {},\n        calculateSwipeSpeed: function calculateSwipeSpeed(axis) {\n          if (_posPoints.length > 1) {\n            lastFlickDuration = _getCurrentTime() - _gestureCheckSpeedTime + 50;\n            tempReleasePos = _posPoints[_posPoints.length - 2][axis];\n          } else {\n            lastFlickDuration = _getCurrentTime() - _gestureStartTime; // total gesture duration\n\n            tempReleasePos = _startPoint[axis];\n          }\n\n          s.lastFlickOffset[axis] = _currPoint[axis] - tempReleasePos;\n          s.lastFlickDist[axis] = Math.abs(s.lastFlickOffset[axis]);\n\n          if (s.lastFlickDist[axis] > 20) {\n            s.lastFlickSpeed[axis] = s.lastFlickOffset[axis] / lastFlickDuration;\n          } else {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          if (Math.abs(s.lastFlickSpeed[axis]) < 0.1) {\n            s.lastFlickSpeed[axis] = 0;\n          }\n\n          s.slowDownRatio[axis] = 0.95;\n          s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n          s.speedDecelerationRatio[axis] = 1;\n        },\n        calculateOverBoundsAnimOffset: function calculateOverBoundsAnimOffset(axis, speed) {\n          if (!s.backAnimStarted[axis]) {\n            if (_panOffset[axis] > _currPanBounds.min[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.min[axis];\n            } else if (_panOffset[axis] < _currPanBounds.max[axis]) {\n              s.backAnimDestination[axis] = _currPanBounds.max[axis];\n            }\n\n            if (s.backAnimDestination[axis] !== undefined) {\n              s.slowDownRatio[axis] = 0.7;\n              s.slowDownRatioReverse[axis] = 1 - s.slowDownRatio[axis];\n\n              if (s.speedDecelerationRatioAbs[axis] < 0.05) {\n                s.lastFlickSpeed[axis] = 0;\n                s.backAnimStarted[axis] = true;\n\n                _animateProp('bounceZoomPan' + axis, _panOffset[axis], s.backAnimDestination[axis], speed || 300, framework.easing.sine.out, function (pos) {\n                  _panOffset[axis] = pos;\n\n                  _applyCurrentZoomPan();\n                });\n              }\n            }\n          }\n        },\n        // Reduces the speed by slowDownRatio (per 10ms)\n        calculateAnimOffset: function calculateAnimOffset(axis) {\n          if (!s.backAnimStarted[axis]) {\n            s.speedDecelerationRatio[axis] = s.speedDecelerationRatio[axis] * (s.slowDownRatio[axis] + s.slowDownRatioReverse[axis] - s.slowDownRatioReverse[axis] * s.timeDiff / 10);\n            s.speedDecelerationRatioAbs[axis] = Math.abs(s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis]);\n            s.distanceOffset[axis] = s.lastFlickSpeed[axis] * s.speedDecelerationRatio[axis] * s.timeDiff;\n            _panOffset[axis] += s.distanceOffset[axis];\n          }\n        },\n        panAnimLoop: function panAnimLoop() {\n          if (_animations.zoomPan) {\n            _animations.zoomPan.raf = _requestAF(s.panAnimLoop);\n            s.now = _getCurrentTime();\n            s.timeDiff = s.now - s.lastNow;\n            s.lastNow = s.now;\n            s.calculateAnimOffset('x');\n            s.calculateAnimOffset('y');\n\n            _applyCurrentZoomPan();\n\n            s.calculateOverBoundsAnimOffset('x');\n            s.calculateOverBoundsAnimOffset('y');\n\n            if (s.speedDecelerationRatioAbs.x < 0.05 && s.speedDecelerationRatioAbs.y < 0.05) {\n              // round pan position\n              _panOffset.x = Math.round(_panOffset.x);\n              _panOffset.y = Math.round(_panOffset.y);\n\n              _applyCurrentZoomPan();\n\n              _stopAnimation('zoomPan');\n\n              return;\n            }\n          }\n        }\n      };\n      return s;\n    },\n        _completePanGesture = function _completePanGesture(animData) {\n      // calculate swipe speed for Y axis (paanning)\n      animData.calculateSwipeSpeed('y');\n      _currPanBounds = self.currItem.bounds;\n      animData.backAnimDestination = {};\n      animData.backAnimStarted = {}; // Avoid acceleration animation if speed is too low\n\n      if (Math.abs(animData.lastFlickSpeed.x) <= 0.05 && Math.abs(animData.lastFlickSpeed.y) <= 0.05) {\n        animData.speedDecelerationRatioAbs.x = animData.speedDecelerationRatioAbs.y = 0; // Run pan drag release animation. E.g. if you drag image and release finger without momentum.\n\n        animData.calculateOverBoundsAnimOffset('x');\n        animData.calculateOverBoundsAnimOffset('y');\n        return true;\n      } // Animation loop that controls the acceleration after pan gesture ends\n\n\n      _registerStartAnimation('zoomPan');\n\n      animData.lastNow = _getCurrentTime();\n      animData.panAnimLoop();\n    },\n        _finishSwipeMainScrollGesture = function _finishSwipeMainScrollGesture(gestureType, _releaseAnimData) {\n      var itemChanged;\n\n      if (!_mainScrollAnimating) {\n        _currZoomedItemIndex = _currentItemIndex;\n      }\n\n      var itemsDiff;\n\n      if (gestureType === 'swipe') {\n        var totalShiftDist = _currPoint.x - _startPoint.x,\n            isFastLastFlick = _releaseAnimData.lastFlickDist.x < 10; // if container is shifted for more than MIN_SWIPE_DISTANCE, \n        // and last flick gesture was in right direction\n\n        if (totalShiftDist > MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x > 20)) {\n          // go to prev item\n          itemsDiff = -1;\n        } else if (totalShiftDist < -MIN_SWIPE_DISTANCE && (isFastLastFlick || _releaseAnimData.lastFlickOffset.x < -20)) {\n          // go to next item\n          itemsDiff = 1;\n        }\n      }\n\n      var nextCircle;\n\n      if (itemsDiff) {\n        _currentItemIndex += itemsDiff;\n\n        if (_currentItemIndex < 0) {\n          _currentItemIndex = _options.loop ? _getNumItems() - 1 : 0;\n          nextCircle = true;\n        } else if (_currentItemIndex >= _getNumItems()) {\n          _currentItemIndex = _options.loop ? 0 : _getNumItems() - 1;\n          nextCircle = true;\n        }\n\n        if (!nextCircle || _options.loop) {\n          _indexDiff += itemsDiff;\n          _currPositionIndex -= itemsDiff;\n          itemChanged = true;\n        }\n      }\n\n      var animateToX = _slideSize.x * _currPositionIndex;\n      var animateToDist = Math.abs(animateToX - _mainScrollPos.x);\n      var finishAnimDuration;\n\n      if (!itemChanged && animateToX > _mainScrollPos.x !== _releaseAnimData.lastFlickSpeed.x > 0) {\n        // \"return to current\" duration, e.g. when dragging from slide 0 to -1\n        finishAnimDuration = 333;\n      } else {\n        finishAnimDuration = Math.abs(_releaseAnimData.lastFlickSpeed.x) > 0 ? animateToDist / Math.abs(_releaseAnimData.lastFlickSpeed.x) : 333;\n        finishAnimDuration = Math.min(finishAnimDuration, 400);\n        finishAnimDuration = Math.max(finishAnimDuration, 250);\n      }\n\n      if (_currZoomedItemIndex === _currentItemIndex) {\n        itemChanged = false;\n      }\n\n      _mainScrollAnimating = true;\n\n      _shout('mainScrollAnimStart');\n\n      _animateProp('mainScroll', _mainScrollPos.x, animateToX, finishAnimDuration, framework.easing.cubic.out, _moveMainScroll, function () {\n        _stopAllAnimations();\n\n        _mainScrollAnimating = false;\n        _currZoomedItemIndex = -1;\n\n        if (itemChanged || _currZoomedItemIndex !== _currentItemIndex) {\n          self.updateCurrItem();\n        }\n\n        _shout('mainScrollAnimComplete');\n      });\n\n      if (itemChanged) {\n        self.updateCurrItem(true);\n      }\n\n      return itemChanged;\n    },\n        _calculateZoomLevel = function _calculateZoomLevel(touchesDistance) {\n      return 1 / _startPointsDistance * touchesDistance * _startZoomLevel;\n    },\n        // Resets zoom if it's out of bounds\n    _completeZoomGesture = function _completeZoomGesture() {\n      var destZoomLevel = _currZoomLevel,\n          minZoomLevel = _getMinZoomLevel(),\n          maxZoomLevel = _getMaxZoomLevel();\n\n      if (_currZoomLevel < minZoomLevel) {\n        destZoomLevel = minZoomLevel;\n      } else if (_currZoomLevel > maxZoomLevel) {\n        destZoomLevel = maxZoomLevel;\n      }\n\n      var destOpacity = 1,\n          onUpdate,\n          initialOpacity = _bgOpacity;\n\n      if (_opacityChanged && !_isZoomingIn && !_wasOverInitialZoom && _currZoomLevel < minZoomLevel) {\n        //_closedByScroll = true;\n        self.close();\n        return true;\n      }\n\n      if (_opacityChanged) {\n        onUpdate = function onUpdate(now) {\n          _applyBgOpacity((destOpacity - initialOpacity) * now + initialOpacity);\n        };\n      }\n\n      self.zoomTo(destZoomLevel, 0, 200, framework.easing.cubic.out, onUpdate);\n      return true;\n    };\n\n    _registerModule('Gestures', {\n      publicMethods: {\n        initGestures: function initGestures() {\n          // helper function that builds touch/pointer/mouse events\n          var addEventNames = function addEventNames(pref, down, move, up, cancel) {\n            _dragStartEvent = pref + down;\n            _dragMoveEvent = pref + move;\n            _dragEndEvent = pref + up;\n\n            if (cancel) {\n              _dragCancelEvent = pref + cancel;\n            } else {\n              _dragCancelEvent = '';\n            }\n          };\n\n          _pointerEventEnabled = _features.pointerEvent;\n\n          if (_pointerEventEnabled && _features.touch) {\n            // we don't need touch events, if browser supports pointer events\n            _features.touch = false;\n          }\n\n          if (_pointerEventEnabled) {\n            if (navigator.msPointerEnabled) {\n              // IE10 pointer events are case-sensitive\n              addEventNames('MSPointer', 'Down', 'Move', 'Up', 'Cancel');\n            } else {\n              addEventNames('pointer', 'down', 'move', 'up', 'cancel');\n            }\n          } else if (_features.touch) {\n            addEventNames('touch', 'start', 'move', 'end', 'cancel');\n            _likelyTouchDevice = true;\n          } else {\n            addEventNames('mouse', 'down', 'move', 'up');\n          }\n\n          _upMoveEvents = _dragMoveEvent + ' ' + _dragEndEvent + ' ' + _dragCancelEvent;\n          _downEvents = _dragStartEvent;\n\n          if (_pointerEventEnabled && !_likelyTouchDevice) {\n            _likelyTouchDevice = navigator.maxTouchPoints > 1 || navigator.msMaxTouchPoints > 1;\n          } // make variable public\n\n\n          self.likelyTouchDevice = _likelyTouchDevice;\n          _globalEventHandlers[_dragStartEvent] = _onDragStart;\n          _globalEventHandlers[_dragMoveEvent] = _onDragMove;\n          _globalEventHandlers[_dragEndEvent] = _onDragRelease; // the Kraken\n\n          if (_dragCancelEvent) {\n            _globalEventHandlers[_dragCancelEvent] = _globalEventHandlers[_dragEndEvent];\n          } // Bind mouse events on device with detected hardware touch support, in case it supports multiple types of input.\n\n\n          if (_features.touch) {\n            _downEvents += ' mousedown';\n            _upMoveEvents += ' mousemove mouseup';\n            _globalEventHandlers.mousedown = _globalEventHandlers[_dragStartEvent];\n            _globalEventHandlers.mousemove = _globalEventHandlers[_dragMoveEvent];\n            _globalEventHandlers.mouseup = _globalEventHandlers[_dragEndEvent];\n          }\n\n          if (!_likelyTouchDevice) {\n            // don't allow pan to next slide from zoomed state on Desktop\n            _options.allowPanToNext = false;\n          }\n        }\n      }\n    });\n    /*>>gestures*/\n\n    /*>>show-hide-transition*/\n\n    /**\n     * show-hide-transition.js:\n     *\n     * Manages initial opening or closing transition.\n     *\n     * If you're not planning to use transition for gallery at all,\n     * you may set options hideAnimationDuration and showAnimationDuration to 0,\n     * and just delete startAnimation function.\n     * \n     */\n\n\n    var _showOrHideTimeout,\n        _showOrHide = function _showOrHide(item, img, out, completeFn) {\n      if (_showOrHideTimeout) {\n        clearTimeout(_showOrHideTimeout);\n      }\n\n      _initialZoomRunning = true;\n      _initialContentSet = true; // dimensions of small thumbnail {x:,y:,w:}.\n      // Height is optional, as calculated based on large image.\n\n      var thumbBounds;\n\n      if (item.initialLayout) {\n        thumbBounds = item.initialLayout;\n        item.initialLayout = null;\n      } else {\n        thumbBounds = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n      }\n\n      var duration = out ? _options.hideAnimationDuration : _options.showAnimationDuration;\n\n      var onComplete = function onComplete() {\n        _stopAnimation('initialZoom');\n\n        if (!out) {\n          _applyBgOpacity(1);\n\n          if (img) {\n            img.style.display = 'block';\n          }\n\n          framework.addClass(template, 'pswp--animated-in');\n\n          _shout('initialZoom' + (out ? 'OutEnd' : 'InEnd'));\n        } else {\n          self.template.removeAttribute('style');\n          self.bg.removeAttribute('style');\n        }\n\n        if (completeFn) {\n          completeFn();\n        }\n\n        _initialZoomRunning = false;\n      }; // if bounds aren't provided, just open gallery without animation\n\n\n      if (!duration || !thumbBounds || thumbBounds.x === undefined) {\n        _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n        _currZoomLevel = item.initialZoomLevel;\n\n        _equalizePoints(_panOffset, item.initialPosition);\n\n        _applyCurrentZoomPan();\n\n        template.style.opacity = out ? 0 : 1;\n\n        _applyBgOpacity(1);\n\n        if (duration) {\n          setTimeout(function () {\n            onComplete();\n          }, duration);\n        } else {\n          onComplete();\n        }\n\n        return;\n      }\n\n      var startAnimation = function startAnimation() {\n        var closeWithRaf = _closedByScroll,\n            fadeEverything = !self.currItem.src || self.currItem.loadError || _options.showHideOpacity; // apply hw-acceleration to image\n\n        if (item.miniImg) {\n          item.miniImg.style.webkitBackfaceVisibility = 'hidden';\n        }\n\n        if (!out) {\n          _currZoomLevel = thumbBounds.w / item.w;\n          _panOffset.x = thumbBounds.x;\n          _panOffset.y = thumbBounds.y - _initalWindowScrollY;\n          self[fadeEverything ? 'template' : 'bg'].style.opacity = 0.001;\n\n          _applyCurrentZoomPan();\n        }\n\n        _registerStartAnimation('initialZoom');\n\n        if (out && !closeWithRaf) {\n          framework.removeClass(template, 'pswp--animated-in');\n        }\n\n        if (fadeEverything) {\n          if (out) {\n            framework[(closeWithRaf ? 'remove' : 'add') + 'Class'](template, 'pswp--animate_opacity');\n          } else {\n            setTimeout(function () {\n              framework.addClass(template, 'pswp--animate_opacity');\n            }, 30);\n          }\n        }\n\n        _showOrHideTimeout = setTimeout(function () {\n          _shout('initialZoom' + (out ? 'Out' : 'In'));\n\n          if (!out) {\n            // \"in\" animation always uses CSS transitions (instead of rAF).\n            // CSS transition work faster here, \n            // as developer may also want to animate other things, \n            // like ui on top of sliding area, which can be animated just via CSS\n            _currZoomLevel = item.initialZoomLevel;\n\n            _equalizePoints(_panOffset, item.initialPosition);\n\n            _applyCurrentZoomPan();\n\n            _applyBgOpacity(1);\n\n            if (fadeEverything) {\n              template.style.opacity = 1;\n            } else {\n              _applyBgOpacity(1);\n            }\n\n            _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n          } else {\n            // \"out\" animation uses rAF only when PhotoSwipe is closed by browser scroll, to recalculate position\n            var destZoomLevel = thumbBounds.w / item.w,\n                initialPanOffset = {\n              x: _panOffset.x,\n              y: _panOffset.y\n            },\n                initialZoomLevel = _currZoomLevel,\n                initalBgOpacity = _bgOpacity,\n                onUpdate = function onUpdate(now) {\n              if (now === 1) {\n                _currZoomLevel = destZoomLevel;\n                _panOffset.x = thumbBounds.x;\n                _panOffset.y = thumbBounds.y - _currentWindowScrollY;\n              } else {\n                _currZoomLevel = (destZoomLevel - initialZoomLevel) * now + initialZoomLevel;\n                _panOffset.x = (thumbBounds.x - initialPanOffset.x) * now + initialPanOffset.x;\n                _panOffset.y = (thumbBounds.y - _currentWindowScrollY - initialPanOffset.y) * now + initialPanOffset.y;\n              }\n\n              _applyCurrentZoomPan();\n\n              if (fadeEverything) {\n                template.style.opacity = 1 - now;\n              } else {\n                _applyBgOpacity(initalBgOpacity - now * initalBgOpacity);\n              }\n            };\n\n            if (closeWithRaf) {\n              _animateProp('initialZoom', 0, 1, duration, framework.easing.cubic.out, onUpdate, onComplete);\n            } else {\n              onUpdate(1);\n              _showOrHideTimeout = setTimeout(onComplete, duration + 20);\n            }\n          }\n        }, out ? 25 : 90); // Main purpose of this delay is to give browser time to paint and\n        // create composite layers of PhotoSwipe UI parts (background, controls, caption, arrows).\n        // Which avoids lag at the beginning of scale transition.\n      };\n\n      startAnimation();\n    };\n    /*>>show-hide-transition*/\n\n    /*>>items-controller*/\n\n    /**\n    *\n    * Controller manages gallery items, their dimensions, and their content.\n    * \n    */\n\n\n    var _items,\n        _tempPanAreaSize = {},\n        _imagesToAppendPool = [],\n        _initialContentSet,\n        _initialZoomRunning,\n        _controllerDefaultOptions = {\n      index: 0,\n      errorMsg: '<div class=\"pswp__error-msg\"><a href=\"%url%\" target=\"_blank\">The image</a> could not be loaded.</div>',\n      forceProgressiveLoading: false,\n      // TODO\n      preload: [1, 1],\n      getNumItemsFn: function getNumItemsFn() {\n        return _items.length;\n      }\n    };\n\n    var _getItemAt,\n        _getNumItems,\n        _initialIsLoop,\n        _getZeroBounds = function _getZeroBounds() {\n      return {\n        center: {\n          x: 0,\n          y: 0\n        },\n        max: {\n          x: 0,\n          y: 0\n        },\n        min: {\n          x: 0,\n          y: 0\n        }\n      };\n    },\n        _calculateSingleItemPanBounds = function _calculateSingleItemPanBounds(item, realPanElementW, realPanElementH) {\n      var bounds = item.bounds; // position of element when it's centered\n\n      bounds.center.x = Math.round((_tempPanAreaSize.x - realPanElementW) / 2);\n      bounds.center.y = Math.round((_tempPanAreaSize.y - realPanElementH) / 2) + item.vGap.top; // maximum pan position\n\n      bounds.max.x = realPanElementW > _tempPanAreaSize.x ? Math.round(_tempPanAreaSize.x - realPanElementW) : bounds.center.x;\n      bounds.max.y = realPanElementH > _tempPanAreaSize.y ? Math.round(_tempPanAreaSize.y - realPanElementH) + item.vGap.top : bounds.center.y; // minimum pan position\n\n      bounds.min.x = realPanElementW > _tempPanAreaSize.x ? 0 : bounds.center.x;\n      bounds.min.y = realPanElementH > _tempPanAreaSize.y ? item.vGap.top : bounds.center.y;\n    },\n        _calculateItemSize = function _calculateItemSize(item, viewportSize, zoomLevel) {\n      if (item.src && !item.loadError) {\n        var isInitial = !zoomLevel;\n\n        if (isInitial) {\n          if (!item.vGap) {\n            item.vGap = {\n              top: 0,\n              bottom: 0\n            };\n          } // allows overriding vertical margin for individual items\n\n\n          _shout('parseVerticalMargin', item);\n        }\n\n        _tempPanAreaSize.x = viewportSize.x;\n        _tempPanAreaSize.y = viewportSize.y - item.vGap.top - item.vGap.bottom;\n\n        if (isInitial) {\n          var hRatio = _tempPanAreaSize.x / item.w;\n          var vRatio = _tempPanAreaSize.y / item.h;\n          item.fitRatio = hRatio < vRatio ? hRatio : vRatio; //item.fillRatio = hRatio > vRatio ? hRatio : vRatio;\n\n          var scaleMode = _options.scaleMode;\n\n          if (scaleMode === 'orig') {\n            zoomLevel = 1;\n          } else if (scaleMode === 'fit') {\n            zoomLevel = item.fitRatio;\n          }\n\n          if (zoomLevel > 1) {\n            zoomLevel = 1;\n          }\n\n          item.initialZoomLevel = zoomLevel;\n\n          if (!item.bounds) {\n            // reuse bounds object\n            item.bounds = _getZeroBounds();\n          }\n        }\n\n        if (!zoomLevel) {\n          return;\n        }\n\n        _calculateSingleItemPanBounds(item, item.w * zoomLevel, item.h * zoomLevel);\n\n        if (isInitial && zoomLevel === item.initialZoomLevel) {\n          item.initialPosition = item.bounds.center;\n        }\n\n        return item.bounds;\n      } else {\n        item.w = item.h = 0;\n        item.initialZoomLevel = item.fitRatio = 1;\n        item.bounds = _getZeroBounds();\n        item.initialPosition = item.bounds.center; // if it's not image, we return zero bounds (content is not zoomable)\n\n        return item.bounds;\n      }\n    },\n        _appendImage = function _appendImage(index, item, baseDiv, img, preventAnimation, keepPlaceholder) {\n      if (item.loadError) {\n        return;\n      }\n\n      if (img) {\n        item.imageAppended = true;\n\n        _setImageSize(item, img, item === self.currItem && _renderMaxResolution);\n\n        baseDiv.appendChild(img);\n\n        if (keepPlaceholder) {\n          setTimeout(function () {\n            if (item && item.loaded && item.placeholder) {\n              item.placeholder.style.display = 'none';\n              item.placeholder = null;\n            }\n          }, 500);\n        }\n      }\n    },\n        _preloadImage = function _preloadImage(item) {\n      item.loading = true;\n      item.loaded = false;\n      var img = item.img = framework.createEl('pswp__img', 'img');\n\n      var onComplete = function onComplete() {\n        item.loading = false;\n        item.loaded = true;\n\n        if (item.loadComplete) {\n          item.loadComplete(item);\n        } else {\n          item.img = null; // no need to store image object\n        }\n\n        img.onload = img.onerror = null;\n        img = null;\n      };\n\n      img.onload = onComplete;\n\n      img.onerror = function () {\n        item.loadError = true;\n        onComplete();\n      };\n\n      img.src = item.src; // + '?a=' + Math.random();\n\n      return img;\n    },\n        _checkForError = function _checkForError(item, cleanUp) {\n      if (item.src && item.loadError && item.container) {\n        if (cleanUp) {\n          item.container.innerHTML = '';\n        }\n\n        item.container.innerHTML = _options.errorMsg.replace('%url%', item.src);\n        return true;\n      }\n    },\n        _setImageSize = function _setImageSize(item, img, maxRes) {\n      if (!item.src) {\n        return;\n      }\n\n      if (!img) {\n        img = item.container.lastChild;\n      }\n\n      var w = maxRes ? item.w : Math.round(item.w * item.fitRatio),\n          h = maxRes ? item.h : Math.round(item.h * item.fitRatio);\n\n      if (item.placeholder && !item.loaded) {\n        item.placeholder.style.width = w + 'px';\n        item.placeholder.style.height = h + 'px';\n      }\n\n      img.style.width = w + 'px';\n      img.style.height = h + 'px';\n    },\n        _appendImagesPool = function _appendImagesPool() {\n      if (_imagesToAppendPool.length) {\n        var poolItem;\n\n        for (var i = 0; i < _imagesToAppendPool.length; i++) {\n          poolItem = _imagesToAppendPool[i];\n\n          if (poolItem.holder.index === poolItem.index) {\n            _appendImage(poolItem.index, poolItem.item, poolItem.baseDiv, poolItem.img, false, poolItem.clearPlaceholder);\n          }\n        }\n\n        _imagesToAppendPool = [];\n      }\n    };\n\n    _registerModule('Controller', {\n      publicMethods: {\n        lazyLoadItem: function lazyLoadItem(index) {\n          index = _getLoopedId(index);\n\n          var item = _getItemAt(index);\n\n          if (!item || (item.loaded || item.loading) && !_itemsNeedUpdate) {\n            return;\n          }\n\n          _shout('gettingData', index, item);\n\n          if (!item.src) {\n            return;\n          }\n\n          _preloadImage(item);\n        },\n        initController: function initController() {\n          framework.extend(_options, _controllerDefaultOptions, true);\n          self.items = _items = items;\n          _getItemAt = self.getItemAt;\n          _getNumItems = _options.getNumItemsFn; //self.getNumItems;\n\n          _initialIsLoop = _options.loop;\n\n          if (_getNumItems() < 3) {\n            _options.loop = false; // disable loop if less then 3 items\n          }\n\n          _listen('beforeChange', function (diff) {\n            var p = _options.preload,\n                isNext = diff === null ? true : diff >= 0,\n                preloadBefore = Math.min(p[0], _getNumItems()),\n                preloadAfter = Math.min(p[1], _getNumItems()),\n                i;\n\n            for (i = 1; i <= (isNext ? preloadAfter : preloadBefore); i++) {\n              self.lazyLoadItem(_currentItemIndex + i);\n            }\n\n            for (i = 1; i <= (isNext ? preloadBefore : preloadAfter); i++) {\n              self.lazyLoadItem(_currentItemIndex - i);\n            }\n          });\n\n          _listen('initialLayout', function () {\n            self.currItem.initialLayout = _options.getThumbBoundsFn && _options.getThumbBoundsFn(_currentItemIndex);\n          });\n\n          _listen('mainScrollAnimComplete', _appendImagesPool);\n\n          _listen('initialZoomInEnd', _appendImagesPool);\n\n          _listen('destroy', function () {\n            var item;\n\n            for (var i = 0; i < _items.length; i++) {\n              item = _items[i]; // remove reference to DOM elements, for GC\n\n              if (item.container) {\n                item.container = null;\n              }\n\n              if (item.placeholder) {\n                item.placeholder = null;\n              }\n\n              if (item.img) {\n                item.img = null;\n              }\n\n              if (item.preloader) {\n                item.preloader = null;\n              }\n\n              if (item.loadError) {\n                item.loaded = item.loadError = false;\n              }\n            }\n\n            _imagesToAppendPool = null;\n          });\n        },\n        getItemAt: function getItemAt(index) {\n          if (index >= 0) {\n            return _items[index] !== undefined ? _items[index] : false;\n          }\n\n          return false;\n        },\n        allowProgressiveImg: function allowProgressiveImg() {\n          // 1. Progressive image loading isn't working on webkit/blink \n          //    when hw-acceleration (e.g. translateZ) is applied to IMG element.\n          //    That's why in PhotoSwipe parent element gets zoom transform, not image itself.\n          //    \n          // 2. Progressive image loading sometimes blinks in webkit/blink when applying animation to parent element.\n          //    That's why it's disabled on touch devices (mainly because of swipe transition)\n          //    \n          // 3. Progressive image loading sometimes doesn't work in IE (up to 11).\n          // Don't allow progressive loading on non-large touch devices\n          return _options.forceProgressiveLoading || !_likelyTouchDevice || _options.mouseUsed || screen.width > 1200; // 1200 - to eliminate touch devices with large screen (like Chromebook Pixel)\n        },\n        setContent: function setContent(holder, index) {\n          if (_options.loop) {\n            index = _getLoopedId(index);\n          }\n\n          var prevItem = self.getItemAt(holder.index);\n\n          if (prevItem) {\n            prevItem.container = null;\n          }\n\n          var item = self.getItemAt(index),\n              img;\n\n          if (!item) {\n            holder.el.innerHTML = '';\n            return;\n          } // allow to override data\n\n\n          _shout('gettingData', index, item);\n\n          holder.index = index;\n          holder.item = item; // base container DIV is created only once for each of 3 holders\n\n          var baseDiv = item.container = framework.createEl('pswp__zoom-wrap');\n\n          if (!item.src && item.html) {\n            if (item.html.tagName) {\n              baseDiv.appendChild(item.html);\n            } else {\n              baseDiv.innerHTML = item.html;\n            }\n          }\n\n          _checkForError(item);\n\n          _calculateItemSize(item, _viewportSize);\n\n          if (item.src && !item.loadError && !item.loaded) {\n            item.loadComplete = function (item) {\n              // gallery closed before image finished loading\n              if (!_isOpen) {\n                return;\n              } // check if holder hasn't changed while image was loading\n\n\n              if (holder && holder.index === index) {\n                if (_checkForError(item, true)) {\n                  item.loadComplete = item.img = null;\n\n                  _calculateItemSize(item, _viewportSize);\n\n                  _applyZoomPanToItem(item);\n\n                  if (holder.index === _currentItemIndex) {\n                    // recalculate dimensions\n                    self.updateCurrZoomItem();\n                  }\n\n                  return;\n                }\n\n                if (!item.imageAppended) {\n                  if (_features.transform && (_mainScrollAnimating || _initialZoomRunning)) {\n                    _imagesToAppendPool.push({\n                      item: item,\n                      baseDiv: baseDiv,\n                      img: item.img,\n                      index: index,\n                      holder: holder,\n                      clearPlaceholder: true\n                    });\n                  } else {\n                    _appendImage(index, item, baseDiv, item.img, _mainScrollAnimating || _initialZoomRunning, true);\n                  }\n                } else {\n                  // remove preloader & mini-img\n                  if (!_initialZoomRunning && item.placeholder) {\n                    item.placeholder.style.display = 'none';\n                    item.placeholder = null;\n                  }\n                }\n              }\n\n              item.loadComplete = null;\n              item.img = null; // no need to store image element after it's added\n\n              _shout('imageLoadComplete', index, item);\n            };\n\n            if (framework.features.transform) {\n              var placeholderClassName = 'pswp__img pswp__img--placeholder';\n              placeholderClassName += item.msrc ? '' : ' pswp__img--placeholder--blank';\n              var placeholder = framework.createEl(placeholderClassName, item.msrc ? 'img' : '');\n\n              if (item.msrc) {\n                placeholder.src = item.msrc;\n              }\n\n              _setImageSize(item, placeholder);\n\n              baseDiv.appendChild(placeholder);\n              item.placeholder = placeholder;\n            }\n\n            if (!item.loading) {\n              _preloadImage(item);\n            }\n\n            if (self.allowProgressiveImg()) {\n              // just append image\n              if (!_initialContentSet && _features.transform) {\n                _imagesToAppendPool.push({\n                  item: item,\n                  baseDiv: baseDiv,\n                  img: item.img,\n                  index: index,\n                  holder: holder\n                });\n              } else {\n                _appendImage(index, item, baseDiv, item.img, true, true);\n              }\n            }\n          } else if (item.src && !item.loadError) {\n            // image object is created every time, due to bugs of image loading & delay when switching images\n            img = framework.createEl('pswp__img', 'img');\n            img.style.opacity = 1;\n            img.src = item.src;\n\n            _setImageSize(item, img);\n\n            _appendImage(index, item, baseDiv, img, true);\n          }\n\n          if (!_initialContentSet && index === _currentItemIndex) {\n            _currZoomElementStyle = baseDiv.style;\n\n            _showOrHide(item, img || item.img);\n          } else {\n            _applyZoomPanToItem(item);\n          }\n\n          holder.el.innerHTML = '';\n          holder.el.appendChild(baseDiv);\n        },\n        cleanSlide: function cleanSlide(item) {\n          if (item.img) {\n            item.img.onload = item.img.onerror = null;\n          }\n\n          item.loaded = item.loading = item.img = item.imageAppended = false;\n        }\n      }\n    });\n    /*>>items-controller*/\n\n    /*>>tap*/\n\n    /**\n     * tap.js:\n     *\n     * Displatches tap and double-tap events.\n     * \n     */\n\n\n    var tapTimer,\n        tapReleasePoint = {},\n        _dispatchTapEvent = function _dispatchTapEvent(origEvent, releasePoint, pointerType) {\n      var e = document.createEvent('CustomEvent'),\n          eDetail = {\n        origEvent: origEvent,\n        target: origEvent.target,\n        releasePoint: releasePoint,\n        pointerType: pointerType || 'touch'\n      };\n      e.initCustomEvent('pswpTap', true, true, eDetail);\n      origEvent.target.dispatchEvent(e);\n    };\n\n    _registerModule('Tap', {\n      publicMethods: {\n        initTap: function initTap() {\n          _listen('firstTouchStart', self.onTapStart);\n\n          _listen('touchRelease', self.onTapRelease);\n\n          _listen('destroy', function () {\n            tapReleasePoint = {};\n            tapTimer = null;\n          });\n        },\n        onTapStart: function onTapStart(touchList) {\n          if (touchList.length > 1) {\n            clearTimeout(tapTimer);\n            tapTimer = null;\n          }\n        },\n        onTapRelease: function onTapRelease(e, releasePoint) {\n          if (!releasePoint) {\n            return;\n          }\n\n          if (!_moved && !_isMultitouch && !_numAnimations) {\n            var p0 = releasePoint;\n\n            if (tapTimer) {\n              clearTimeout(tapTimer);\n              tapTimer = null; // Check if taped on the same place\n\n              if (_isNearbyPoints(p0, tapReleasePoint)) {\n                _shout('doubleTap', p0);\n\n                return;\n              }\n            }\n\n            if (releasePoint.type === 'mouse') {\n              _dispatchTapEvent(e, releasePoint, 'mouse');\n\n              return;\n            }\n\n            var clickedTagName = e.target.tagName.toUpperCase(); // avoid double tap delay on buttons and elements that have class pswp__single-tap\n\n            if (clickedTagName === 'BUTTON' || framework.hasClass(e.target, 'pswp__single-tap')) {\n              _dispatchTapEvent(e, releasePoint);\n\n              return;\n            }\n\n            _equalizePoints(tapReleasePoint, p0);\n\n            tapTimer = setTimeout(function () {\n              _dispatchTapEvent(e, releasePoint);\n\n              tapTimer = null;\n            }, 300);\n          }\n        }\n      }\n    });\n    /*>>tap*/\n\n    /*>>desktop-zoom*/\n\n    /**\n     *\n     * desktop-zoom.js:\n     *\n     * - Binds mousewheel event for paning zoomed image.\n     * - Manages \"dragging\", \"zoomed-in\", \"zoom-out\" classes.\n     *   (which are used for cursors and zoom icon)\n     * - Adds toggleDesktopZoom function.\n     * \n     */\n\n\n    var _wheelDelta;\n\n    _registerModule('DesktopZoom', {\n      publicMethods: {\n        initDesktopZoom: function initDesktopZoom() {\n          if (_oldIE) {\n            // no zoom for old IE (<=8)\n            return;\n          }\n\n          if (_likelyTouchDevice) {\n            // if detected hardware touch support, we wait until mouse is used,\n            // and only then apply desktop-zoom features\n            _listen('mouseUsed', function () {\n              self.setupDesktopZoom();\n            });\n          } else {\n            self.setupDesktopZoom(true);\n          }\n        },\n        setupDesktopZoom: function setupDesktopZoom(onInit) {\n          _wheelDelta = {};\n          var events = 'wheel mousewheel DOMMouseScroll';\n\n          _listen('bindEvents', function () {\n            framework.bind(template, events, self.handleMouseWheel);\n          });\n\n          _listen('unbindEvents', function () {\n            if (_wheelDelta) {\n              framework.unbind(template, events, self.handleMouseWheel);\n            }\n          });\n\n          self.mouseZoomedIn = false;\n\n          var hasDraggingClass,\n              updateZoomable = function updateZoomable() {\n            if (self.mouseZoomedIn) {\n              framework.removeClass(template, 'pswp--zoomed-in');\n              self.mouseZoomedIn = false;\n            }\n\n            if (_currZoomLevel < 1) {\n              framework.addClass(template, 'pswp--zoom-allowed');\n            } else {\n              framework.removeClass(template, 'pswp--zoom-allowed');\n            }\n\n            removeDraggingClass();\n          },\n              removeDraggingClass = function removeDraggingClass() {\n            if (hasDraggingClass) {\n              framework.removeClass(template, 'pswp--dragging');\n              hasDraggingClass = false;\n            }\n          };\n\n          _listen('resize', updateZoomable);\n\n          _listen('afterChange', updateZoomable);\n\n          _listen('pointerDown', function () {\n            if (self.mouseZoomedIn) {\n              hasDraggingClass = true;\n              framework.addClass(template, 'pswp--dragging');\n            }\n          });\n\n          _listen('pointerUp', removeDraggingClass);\n\n          if (!onInit) {\n            updateZoomable();\n          }\n        },\n        handleMouseWheel: function handleMouseWheel(e) {\n          if (_currZoomLevel <= self.currItem.fitRatio) {\n            if (_options.modal) {\n              if (!_options.closeOnScroll || _numAnimations || _isDragging) {\n                e.preventDefault();\n              } else if (_transformKey && Math.abs(e.deltaY) > 2) {\n                // close PhotoSwipe\n                // if browser supports transforms & scroll changed enough\n                _closedByScroll = true;\n                self.close();\n              }\n            }\n\n            return true;\n          } // allow just one event to fire\n\n\n          e.stopPropagation(); // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n\n          _wheelDelta.x = 0;\n\n          if ('deltaX' in e) {\n            if (e.deltaMode === 1\n            /* DOM_DELTA_LINE */\n            ) {\n                // 18 - average line height\n                _wheelDelta.x = e.deltaX * 18;\n                _wheelDelta.y = e.deltaY * 18;\n              } else {\n              _wheelDelta.x = e.deltaX;\n              _wheelDelta.y = e.deltaY;\n            }\n          } else if ('wheelDelta' in e) {\n            if (e.wheelDeltaX) {\n              _wheelDelta.x = -0.16 * e.wheelDeltaX;\n            }\n\n            if (e.wheelDeltaY) {\n              _wheelDelta.y = -0.16 * e.wheelDeltaY;\n            } else {\n              _wheelDelta.y = -0.16 * e.wheelDelta;\n            }\n          } else if ('detail' in e) {\n            _wheelDelta.y = e.detail;\n          } else {\n            return;\n          }\n\n          _calculatePanBounds(_currZoomLevel, true);\n\n          var newPanX = _panOffset.x - _wheelDelta.x,\n              newPanY = _panOffset.y - _wheelDelta.y; // only prevent scrolling in nonmodal mode when not at edges\n\n          if (_options.modal || newPanX <= _currPanBounds.min.x && newPanX >= _currPanBounds.max.x && newPanY <= _currPanBounds.min.y && newPanY >= _currPanBounds.max.y) {\n            e.preventDefault();\n          } // TODO: use rAF instead of mousewheel?\n\n\n          self.panTo(newPanX, newPanY);\n        },\n        toggleDesktopZoom: function toggleDesktopZoom(centerPoint) {\n          centerPoint = centerPoint || {\n            x: _viewportSize.x / 2 + _offset.x,\n            y: _viewportSize.y / 2 + _offset.y\n          };\n\n          var doubleTapZoomLevel = _options.getDoubleTapZoom(true, self.currItem);\n\n          var zoomOut = _currZoomLevel === doubleTapZoomLevel;\n          self.mouseZoomedIn = !zoomOut;\n          self.zoomTo(zoomOut ? self.currItem.initialZoomLevel : doubleTapZoomLevel, centerPoint, 333);\n          framework[(!zoomOut ? 'add' : 'remove') + 'Class'](template, 'pswp--zoomed-in');\n        }\n      }\n    });\n    /*>>desktop-zoom*/\n\n    /*>>history*/\n\n    /**\n     *\n     * history.js:\n     *\n     * - Back button to close gallery.\n     * \n     * - Unique URL for each slide: example.com/&pid=1&gid=3\n     *   (where PID is picture index, and GID and gallery index)\n     *   \n     * - Switch URL when slides change.\n     * \n     */\n\n\n    var _historyDefaultOptions = {\n      history: true,\n      galleryUID: 1\n    };\n\n    var _historyUpdateTimeout,\n        _hashChangeTimeout,\n        _hashAnimCheckTimeout,\n        _hashChangedByScript,\n        _hashChangedByHistory,\n        _hashReseted,\n        _initialHash,\n        _historyChanged,\n        _closedFromURL,\n        _urlChangedOnce,\n        _windowLoc,\n        _supportsPushState,\n        _getHash = function _getHash() {\n      return _windowLoc.hash.substring(1);\n    },\n        _cleanHistoryTimeouts = function _cleanHistoryTimeouts() {\n      if (_historyUpdateTimeout) {\n        clearTimeout(_historyUpdateTimeout);\n      }\n\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n    },\n        // pid - Picture index\n    // gid - Gallery index\n    _parseItemIndexFromURL = function _parseItemIndexFromURL() {\n      var hash = _getHash(),\n          params = {};\n\n      if (hash.length < 5) {\n        // pid=1\n        return params;\n      }\n\n      var i,\n          vars = hash.split('&');\n\n      for (i = 0; i < vars.length; i++) {\n        if (!vars[i]) {\n          continue;\n        }\n\n        var pair = vars[i].split('=');\n\n        if (pair.length < 2) {\n          continue;\n        }\n\n        params[pair[0]] = pair[1];\n      }\n\n      if (_options.galleryPIDs) {\n        // detect custom pid in hash and search for it among the items collection\n        var searchfor = params.pid;\n        params.pid = 0; // if custom pid cannot be found, fallback to the first item\n\n        for (i = 0; i < _items.length; i++) {\n          if (_items[i].pid === searchfor) {\n            params.pid = i;\n            break;\n          }\n        }\n      } else {\n        params.pid = parseInt(params.pid, 10) - 1;\n      }\n\n      if (params.pid < 0) {\n        params.pid = 0;\n      }\n\n      return params;\n    },\n        _updateHash = function _updateHash() {\n      if (_hashAnimCheckTimeout) {\n        clearTimeout(_hashAnimCheckTimeout);\n      }\n\n      if (_numAnimations || _isDragging) {\n        // changing browser URL forces layout/paint in some browsers, which causes noticable lag during animation\n        // that's why we update hash only when no animations running\n        _hashAnimCheckTimeout = setTimeout(_updateHash, 500);\n        return;\n      }\n\n      if (_hashChangedByScript) {\n        clearTimeout(_hashChangeTimeout);\n      } else {\n        _hashChangedByScript = true;\n      }\n\n      var pid = _currentItemIndex + 1;\n\n      var item = _getItemAt(_currentItemIndex);\n\n      if (item.hasOwnProperty('pid')) {\n        // carry forward any custom pid assigned to the item\n        pid = item.pid;\n      }\n\n      var newHash = _initialHash + '&' + 'gid=' + _options.galleryUID + '&' + 'pid=' + pid;\n\n      if (!_historyChanged) {\n        if (_windowLoc.hash.indexOf(newHash) === -1) {\n          _urlChangedOnce = true;\n        } // first time - add new hisory record, then just replace\n\n      }\n\n      var newURL = _windowLoc.href.split('#')[0] + '#' + newHash;\n\n      if (_supportsPushState) {\n        if ('#' + newHash !== window.location.hash) {\n          history[_historyChanged ? 'replaceState' : 'pushState']('', document.title, newURL);\n        }\n      } else {\n        if (_historyChanged) {\n          _windowLoc.replace(newURL);\n        } else {\n          _windowLoc.hash = newHash;\n        }\n      }\n\n      _historyChanged = true;\n      _hashChangeTimeout = setTimeout(function () {\n        _hashChangedByScript = false;\n      }, 60);\n    };\n\n    _registerModule('History', {\n      publicMethods: {\n        initHistory: function initHistory() {\n          framework.extend(_options, _historyDefaultOptions, true);\n\n          if (!_options.history) {\n            return;\n          }\n\n          _windowLoc = window.location;\n          _urlChangedOnce = false;\n          _closedFromURL = false;\n          _historyChanged = false;\n          _initialHash = _getHash();\n          _supportsPushState = 'pushState' in history;\n\n          if (_initialHash.indexOf('gid=') > -1) {\n            _initialHash = _initialHash.split('&gid=')[0];\n            _initialHash = _initialHash.split('?gid=')[0];\n          }\n\n          _listen('afterChange', self.updateURL);\n\n          _listen('unbindEvents', function () {\n            framework.unbind(window, 'hashchange', self.onHashChange);\n          });\n\n          var returnToOriginal = function returnToOriginal() {\n            _hashReseted = true;\n\n            if (!_closedFromURL) {\n              if (_urlChangedOnce) {\n                history.back();\n              } else {\n                if (_initialHash) {\n                  _windowLoc.hash = _initialHash;\n                } else {\n                  if (_supportsPushState) {\n                    // remove hash from url without refreshing it or scrolling to top\n                    history.pushState('', document.title, _windowLoc.pathname + _windowLoc.search);\n                  } else {\n                    _windowLoc.hash = '';\n                  }\n                }\n              }\n            }\n\n            _cleanHistoryTimeouts();\n          };\n\n          _listen('unbindEvents', function () {\n            if (_closedByScroll) {\n              // if PhotoSwipe is closed by scroll, we go \"back\" before the closing animation starts\n              // this is done to keep the scroll position\n              returnToOriginal();\n            }\n          });\n\n          _listen('destroy', function () {\n            if (!_hashReseted) {\n              returnToOriginal();\n            }\n          });\n\n          _listen('firstUpdate', function () {\n            _currentItemIndex = _parseItemIndexFromURL().pid;\n          });\n\n          var index = _initialHash.indexOf('pid=');\n\n          if (index > -1) {\n            _initialHash = _initialHash.substring(0, index);\n\n            if (_initialHash.slice(-1) === '&') {\n              _initialHash = _initialHash.slice(0, -1);\n            }\n          }\n\n          setTimeout(function () {\n            if (_isOpen) {\n              // hasn't destroyed yet\n              framework.bind(window, 'hashchange', self.onHashChange);\n            }\n          }, 40);\n        },\n        onHashChange: function onHashChange() {\n          if (_getHash() === _initialHash) {\n            _closedFromURL = true;\n            self.close();\n            return;\n          }\n\n          if (!_hashChangedByScript) {\n            _hashChangedByHistory = true;\n            self.goTo(_parseItemIndexFromURL().pid);\n            _hashChangedByHistory = false;\n          }\n        },\n        updateURL: function updateURL() {\n          // Delay the update of URL, to avoid lag during transition, \n          // and to not to trigger actions like \"refresh page sound\" or \"blinking favicon\" to often\n          _cleanHistoryTimeouts();\n\n          if (_hashChangedByHistory) {\n            return;\n          }\n\n          if (!_historyChanged) {\n            _updateHash(); // first time\n\n          } else {\n            _historyUpdateTimeout = setTimeout(_updateHash, 800);\n          }\n        }\n      }\n    });\n    /*>>history*/\n\n\n    framework.extend(self, publicMethods);\n  };\n\n  return PhotoSwipe;\n});","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\nvar hasElementType = typeof Element !== 'undefined';\n\nfunction equal(a, b) {\n  // fast-deep-equal index.js 2.0.1\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a),\n        arrB = isArray(b),\n        i,\n        length,\n        key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n    var dateA = a instanceof Date,\n        dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n    var regexpA = a instanceof RegExp,\n        regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n    var keys = keyList(a);\n    length = keys.length;\n    if (length !== keyList(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!hasProp.call(b, keys[i])) return false;\n    } // end fast-deep-equal\n    // start react-fast-compare\n    // custom handling for DOM elements\n\n\n    if (hasElementType && a instanceof Element && b instanceof Element) return a === b; // custom handling for React\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n\n      if (key === '_owner' && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner.\n        //  _owner contains circular references\n        // and is not needed when comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of a react element\n        continue;\n      } else {\n        // all other properties should be traversed as usual\n        if (!equal(a[key], b[key])) return false;\n      }\n    } // end react-fast-compare\n    // fast-deep-equal index.js 2.0.1\n\n\n    return true;\n  }\n\n  return a !== a && b !== b;\n} // end fast-deep-equal\n\n\nmodule.exports = function exportedEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (error.message && error.message.match(/stack|recursion/i) || error.number === -2146828260) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('Warning: react-fast-compare does not handle circular references.', error.name, error.message);\n      return false;\n    } // some other error. we should definitely know about these\n\n\n    throw error;\n  }\n};","exports.__esModule = true;\nexports.Helmet = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactSideEffect = require(\"react-side-effect\");\n\nvar _reactSideEffect2 = _interopRequireDefault(_reactSideEffect);\n\nvar _reactFastCompare = require(\"react-fast-compare\");\n\nvar _reactFastCompare2 = _interopRequireDefault(_reactFastCompare);\n\nvar _HelmetUtils = require(\"./HelmetUtils.js\");\n\nvar _HelmetConstants = require(\"./HelmetConstants.js\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Helmet = function Helmet(Component) {\n  var _class, _temp;\n\n  return _temp = _class = function (_React$Component) {\n    _inherits(HelmetWrapper, _React$Component);\n\n    function HelmetWrapper() {\n      _classCallCheck(this, HelmetWrapper);\n\n      return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n    }\n\n    HelmetWrapper.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n      return !(0, _reactFastCompare2.default)(this.props, nextProps);\n    };\n\n    HelmetWrapper.prototype.mapNestedChildrenToProps = function mapNestedChildrenToProps(child, nestedChildren) {\n      if (!nestedChildren) {\n        return null;\n      }\n\n      switch (child.type) {\n        case _HelmetConstants.TAG_NAMES.SCRIPT:\n        case _HelmetConstants.TAG_NAMES.NOSCRIPT:\n          return {\n            innerHTML: nestedChildren\n          };\n\n        case _HelmetConstants.TAG_NAMES.STYLE:\n          return {\n            cssText: nestedChildren\n          };\n      }\n\n      throw new Error(\"<\" + child.type + \" /> elements are self-closing and can not contain children. Refer to our API for more information.\");\n    };\n\n    HelmetWrapper.prototype.flattenArrayTypeChildren = function flattenArrayTypeChildren(_ref) {\n      var _extends2;\n\n      var child = _ref.child,\n          arrayTypeChildren = _ref.arrayTypeChildren,\n          newChildProps = _ref.newChildProps,\n          nestedChildren = _ref.nestedChildren;\n      return _extends({}, arrayTypeChildren, (_extends2 = {}, _extends2[child.type] = [].concat(arrayTypeChildren[child.type] || [], [_extends({}, newChildProps, this.mapNestedChildrenToProps(child, nestedChildren))]), _extends2));\n    };\n\n    HelmetWrapper.prototype.mapObjectTypeChildren = function mapObjectTypeChildren(_ref2) {\n      var _extends3, _extends4;\n\n      var child = _ref2.child,\n          newProps = _ref2.newProps,\n          newChildProps = _ref2.newChildProps,\n          nestedChildren = _ref2.nestedChildren;\n\n      switch (child.type) {\n        case _HelmetConstants.TAG_NAMES.TITLE:\n          return _extends({}, newProps, (_extends3 = {}, _extends3[child.type] = nestedChildren, _extends3.titleAttributes = _extends({}, newChildProps), _extends3));\n\n        case _HelmetConstants.TAG_NAMES.BODY:\n          return _extends({}, newProps, {\n            bodyAttributes: _extends({}, newChildProps)\n          });\n\n        case _HelmetConstants.TAG_NAMES.HTML:\n          return _extends({}, newProps, {\n            htmlAttributes: _extends({}, newChildProps)\n          });\n      }\n\n      return _extends({}, newProps, (_extends4 = {}, _extends4[child.type] = _extends({}, newChildProps), _extends4));\n    };\n\n    HelmetWrapper.prototype.mapArrayTypeChildrenToProps = function mapArrayTypeChildrenToProps(arrayTypeChildren, newProps) {\n      var newFlattenedProps = _extends({}, newProps);\n\n      Object.keys(arrayTypeChildren).forEach(function (arrayChildName) {\n        var _extends5;\n\n        newFlattenedProps = _extends({}, newFlattenedProps, (_extends5 = {}, _extends5[arrayChildName] = arrayTypeChildren[arrayChildName], _extends5));\n      });\n      return newFlattenedProps;\n    };\n\n    HelmetWrapper.prototype.warnOnInvalidChildren = function warnOnInvalidChildren(child, nestedChildren) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (!_HelmetConstants.VALID_TAG_NAMES.some(function (name) {\n          return child.type === name;\n        })) {\n          if (typeof child.type === \"function\") {\n            return (0, _HelmetUtils.warn)(\"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.\");\n          }\n\n          return (0, _HelmetUtils.warn)(\"Only elements types \" + _HelmetConstants.VALID_TAG_NAMES.join(\", \") + \" are allowed. Helmet does not support rendering <\" + child.type + \"> elements. Refer to our API for more information.\");\n        }\n\n        if (nestedChildren && typeof nestedChildren !== \"string\" && (!Array.isArray(nestedChildren) || nestedChildren.some(function (nestedChild) {\n          return typeof nestedChild !== \"string\";\n        }))) {\n          throw new Error(\"Helmet expects a string as a child of <\" + child.type + \">. Did you forget to wrap your children in braces? ( <\" + child.type + \">{``}</\" + child.type + \"> ) Refer to our API for more information.\");\n        }\n      }\n\n      return true;\n    };\n\n    HelmetWrapper.prototype.mapChildrenToProps = function mapChildrenToProps(children, newProps) {\n      var _this2 = this;\n\n      var arrayTypeChildren = {};\n\n      _react2.default.Children.forEach(children, function (child) {\n        if (!child || !child.props) {\n          return;\n        }\n\n        var _child$props = child.props,\n            nestedChildren = _child$props.children,\n            childProps = _objectWithoutProperties(_child$props, [\"children\"]);\n\n        var newChildProps = (0, _HelmetUtils.convertReactPropstoHtmlAttributes)(childProps);\n\n        _this2.warnOnInvalidChildren(child, nestedChildren);\n\n        switch (child.type) {\n          case _HelmetConstants.TAG_NAMES.LINK:\n          case _HelmetConstants.TAG_NAMES.META:\n          case _HelmetConstants.TAG_NAMES.NOSCRIPT:\n          case _HelmetConstants.TAG_NAMES.SCRIPT:\n          case _HelmetConstants.TAG_NAMES.STYLE:\n            arrayTypeChildren = _this2.flattenArrayTypeChildren({\n              child: child,\n              arrayTypeChildren: arrayTypeChildren,\n              newChildProps: newChildProps,\n              nestedChildren: nestedChildren\n            });\n            break;\n\n          default:\n            newProps = _this2.mapObjectTypeChildren({\n              child: child,\n              newProps: newProps,\n              newChildProps: newChildProps,\n              nestedChildren: nestedChildren\n            });\n            break;\n        }\n      });\n\n      newProps = this.mapArrayTypeChildrenToProps(arrayTypeChildren, newProps);\n      return newProps;\n    };\n\n    HelmetWrapper.prototype.render = function render() {\n      var _props = this.props,\n          children = _props.children,\n          props = _objectWithoutProperties(_props, [\"children\"]);\n\n      var newProps = _extends({}, props);\n\n      if (children) {\n        newProps = this.mapChildrenToProps(children, newProps);\n      }\n\n      return _react2.default.createElement(Component, newProps);\n    };\n\n    _createClass(HelmetWrapper, null, [{\n      key: \"canUseDOM\",\n      // Component.peek comes from react-side-effect:\n      // For testing, you may use a static peek() method available on the returned component.\n      // It lets you get the current state without resetting the mounted instance stack.\n      // Dont use it for anything other than testing.\n\n      /**\n       * @param {Object} base: {\"target\": \"_blank\", \"href\": \"http://mysite.com/\"}\n       * @param {Object} bodyAttributes: {\"className\": \"root\"}\n       * @param {String} defaultTitle: \"Default Title\"\n       * @param {Boolean} defer: true\n       * @param {Boolean} encodeSpecialCharacters: true\n       * @param {Object} htmlAttributes: {\"lang\": \"en\", \"amp\": undefined}\n       * @param {Array} link: [{\"rel\": \"canonical\", \"href\": \"http://mysite.com/example\"}]\n       * @param {Array} meta: [{\"name\": \"description\", \"content\": \"Test description\"}]\n       * @param {Array} noscript: [{\"innerHTML\": \"<img src='http://mysite.com/js/test.js'\"}]\n       * @param {Function} onChangeClientState: \"(newState) => console.log(newState)\"\n       * @param {Array} script: [{\"type\": \"text/javascript\", \"src\": \"http://mysite.com/js/test.js\"}]\n       * @param {Array} style: [{\"type\": \"text/css\", \"cssText\": \"div { display: block; color: blue; }\"}]\n       * @param {String} title: \"Title\"\n       * @param {Object} titleAttributes: {\"itemprop\": \"name\"}\n       * @param {String} titleTemplate: \"MySite.com - %s\"\n       */\n      set: function set(canUseDOM) {\n        Component.canUseDOM = canUseDOM;\n      }\n    }]);\n\n    return HelmetWrapper;\n  }(_react2.default.Component), _class.propTypes = {\n    base: _propTypes2.default.object,\n    bodyAttributes: _propTypes2.default.object,\n    children: _propTypes2.default.oneOfType([_propTypes2.default.arrayOf(_propTypes2.default.node), _propTypes2.default.node]),\n    defaultTitle: _propTypes2.default.string,\n    defer: _propTypes2.default.bool,\n    encodeSpecialCharacters: _propTypes2.default.bool,\n    htmlAttributes: _propTypes2.default.object,\n    link: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    meta: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    noscript: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    onChangeClientState: _propTypes2.default.func,\n    script: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    style: _propTypes2.default.arrayOf(_propTypes2.default.object),\n    title: _propTypes2.default.string,\n    titleAttributes: _propTypes2.default.object,\n    titleTemplate: _propTypes2.default.string\n  }, _class.defaultProps = {\n    defer: true,\n    encodeSpecialCharacters: true\n  }, _class.peek = Component.peek, _class.rewind = function () {\n    var mappedState = Component.rewind();\n\n    if (!mappedState) {\n      // provide fallback if mappedState is undefined\n      mappedState = (0, _HelmetUtils.mapStateOnServer)({\n        baseTag: [],\n        bodyAttributes: {},\n        encodeSpecialCharacters: true,\n        htmlAttributes: {},\n        linkTags: [],\n        metaTags: [],\n        noscriptTags: [],\n        scriptTags: [],\n        styleTags: [],\n        title: \"\",\n        titleAttributes: {}\n      });\n    }\n\n    return mappedState;\n  }, _temp;\n};\n\nvar NullComponent = function NullComponent() {\n  return null;\n};\n\nvar HelmetSideEffects = (0, _reactSideEffect2.default)(_HelmetUtils.reducePropsToState, _HelmetUtils.handleClientStateChange, _HelmetUtils.mapStateOnServer)(NullComponent);\nvar HelmetExport = Helmet(HelmetSideEffects);\nHelmetExport.renderStatic = HelmetExport.rewind;\nexports.Helmet = HelmetExport;\nexports.default = HelmetExport;","exports.__esModule = true;\nvar ATTRIBUTE_NAMES = exports.ATTRIBUTE_NAMES = {\n  BODY: \"bodyAttributes\",\n  HTML: \"htmlAttributes\",\n  TITLE: \"titleAttributes\"\n};\nvar TAG_NAMES = exports.TAG_NAMES = {\n  BASE: \"base\",\n  BODY: \"body\",\n  HEAD: \"head\",\n  HTML: \"html\",\n  LINK: \"link\",\n  META: \"meta\",\n  NOSCRIPT: \"noscript\",\n  SCRIPT: \"script\",\n  STYLE: \"style\",\n  TITLE: \"title\"\n};\nvar VALID_TAG_NAMES = exports.VALID_TAG_NAMES = Object.keys(TAG_NAMES).map(function (name) {\n  return TAG_NAMES[name];\n});\nvar TAG_PROPERTIES = exports.TAG_PROPERTIES = {\n  CHARSET: \"charset\",\n  CSS_TEXT: \"cssText\",\n  HREF: \"href\",\n  HTTPEQUIV: \"http-equiv\",\n  INNER_HTML: \"innerHTML\",\n  ITEM_PROP: \"itemprop\",\n  NAME: \"name\",\n  PROPERTY: \"property\",\n  REL: \"rel\",\n  SRC: \"src\"\n};\nvar REACT_TAG_MAP = exports.REACT_TAG_MAP = {\n  accesskey: \"accessKey\",\n  charset: \"charSet\",\n  class: \"className\",\n  contenteditable: \"contentEditable\",\n  contextmenu: \"contextMenu\",\n  \"http-equiv\": \"httpEquiv\",\n  itemprop: \"itemProp\",\n  tabindex: \"tabIndex\"\n};\nvar HELMET_PROPS = exports.HELMET_PROPS = {\n  DEFAULT_TITLE: \"defaultTitle\",\n  DEFER: \"defer\",\n  ENCODE_SPECIAL_CHARACTERS: \"encodeSpecialCharacters\",\n  ON_CHANGE_CLIENT_STATE: \"onChangeClientState\",\n  TITLE_TEMPLATE: \"titleTemplate\"\n};\nvar HTML_TAG_MAP = exports.HTML_TAG_MAP = Object.keys(REACT_TAG_MAP).reduce(function (obj, key) {\n  obj[REACT_TAG_MAP[key]] = key;\n  return obj;\n}, {});\nvar SELF_CLOSING_TAGS = exports.SELF_CLOSING_TAGS = [TAG_NAMES.NOSCRIPT, TAG_NAMES.SCRIPT, TAG_NAMES.STYLE];\nvar HELMET_ATTRIBUTE = exports.HELMET_ATTRIBUTE = \"data-react-helmet\";","exports.__esModule = true;\nexports.warn = exports.requestAnimationFrame = exports.reducePropsToState = exports.mapStateOnServer = exports.handleClientStateChange = exports.convertReactPropstoHtmlAttributes = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _objectAssign = require(\"object-assign\");\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _HelmetConstants = require(\"./HelmetConstants.js\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar encodeSpecialCharacters = function encodeSpecialCharacters(str) {\n  var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n  if (encode === false) {\n    return String(str);\n  }\n\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\n\nvar getTitleFromPropsList = function getTitleFromPropsList(propsList) {\n  var innermostTitle = getInnermostProperty(propsList, _HelmetConstants.TAG_NAMES.TITLE);\n  var innermostTemplate = getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.TITLE_TEMPLATE);\n\n  if (innermostTemplate && innermostTitle) {\n    // use function arg to avoid need to escape $ characters\n    return innermostTemplate.replace(/%s/g, function () {\n      return innermostTitle;\n    });\n  }\n\n  var innermostDefaultTitle = getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.DEFAULT_TITLE);\n  return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nvar getOnChangeClientState = function getOnChangeClientState(propsList) {\n  return getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || function () {};\n};\n\nvar getAttributesFromPropsList = function getAttributesFromPropsList(tagType, propsList) {\n  return propsList.filter(function (props) {\n    return typeof props[tagType] !== \"undefined\";\n  }).map(function (props) {\n    return props[tagType];\n  }).reduce(function (tagAttrs, current) {\n    return _extends({}, tagAttrs, current);\n  }, {});\n};\n\nvar getBaseTagFromPropsList = function getBaseTagFromPropsList(primaryAttributes, propsList) {\n  return propsList.filter(function (props) {\n    return typeof props[_HelmetConstants.TAG_NAMES.BASE] !== \"undefined\";\n  }).map(function (props) {\n    return props[_HelmetConstants.TAG_NAMES.BASE];\n  }).reverse().reduce(function (innermostBaseTag, tag) {\n    if (!innermostBaseTag.length) {\n      var keys = Object.keys(tag);\n\n      for (var i = 0; i < keys.length; i++) {\n        var attributeKey = keys[i];\n        var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n          return innermostBaseTag.concat(tag);\n        }\n      }\n    }\n\n    return innermostBaseTag;\n  }, []);\n};\n\nvar getTagsFromPropsList = function getTagsFromPropsList(tagName, primaryAttributes, propsList) {\n  // Calculate list of tags, giving priority innermost component (end of the propslist)\n  var approvedSeenTags = {};\n  return propsList.filter(function (props) {\n    if (Array.isArray(props[tagName])) {\n      return true;\n    }\n\n    if (typeof props[tagName] !== \"undefined\") {\n      warn(\"Helmet: \" + tagName + \" should be of type \\\"Array\\\". Instead found type \\\"\" + _typeof(props[tagName]) + \"\\\"\");\n    }\n\n    return false;\n  }).map(function (props) {\n    return props[tagName];\n  }).reverse().reduce(function (approvedTags, instanceTags) {\n    var instanceSeenTags = {};\n    instanceTags.filter(function (tag) {\n      var primaryAttributeKey = void 0;\n      var keys = Object.keys(tag);\n\n      for (var i = 0; i < keys.length; i++) {\n        var attributeKey = keys[i];\n        var lowerCaseAttributeKey = attributeKey.toLowerCase(); // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n\n        if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === _HelmetConstants.TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === _HelmetConstants.TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n          primaryAttributeKey = lowerCaseAttributeKey;\n        } // Special case for innerHTML which doesn't work lowercased\n\n\n        if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || attributeKey === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT || attributeKey === _HelmetConstants.TAG_PROPERTIES.ITEM_PROP)) {\n          primaryAttributeKey = attributeKey;\n        }\n      }\n\n      if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n        return false;\n      }\n\n      var value = tag[primaryAttributeKey].toLowerCase();\n\n      if (!approvedSeenTags[primaryAttributeKey]) {\n        approvedSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!instanceSeenTags[primaryAttributeKey]) {\n        instanceSeenTags[primaryAttributeKey] = {};\n      }\n\n      if (!approvedSeenTags[primaryAttributeKey][value]) {\n        instanceSeenTags[primaryAttributeKey][value] = true;\n        return true;\n      }\n\n      return false;\n    }).reverse().forEach(function (tag) {\n      return approvedTags.push(tag);\n    }); // Update seen tags with tags from this instance\n\n    var keys = Object.keys(instanceSeenTags);\n\n    for (var i = 0; i < keys.length; i++) {\n      var attributeKey = keys[i];\n      var tagUnion = (0, _objectAssign2.default)({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n      approvedSeenTags[attributeKey] = tagUnion;\n    }\n\n    return approvedTags;\n  }, []).reverse();\n};\n\nvar getInnermostProperty = function getInnermostProperty(propsList, property) {\n  for (var i = propsList.length - 1; i >= 0; i--) {\n    var props = propsList[i];\n\n    if (props.hasOwnProperty(property)) {\n      return props[property];\n    }\n  }\n\n  return null;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n  return {\n    baseTag: getBaseTagFromPropsList([_HelmetConstants.TAG_PROPERTIES.HREF], propsList),\n    bodyAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.BODY, propsList),\n    defer: getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.DEFER),\n    encode: getInnermostProperty(propsList, _HelmetConstants.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n    htmlAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.HTML, propsList),\n    linkTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.LINK, [_HelmetConstants.TAG_PROPERTIES.REL, _HelmetConstants.TAG_PROPERTIES.HREF], propsList),\n    metaTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.META, [_HelmetConstants.TAG_PROPERTIES.NAME, _HelmetConstants.TAG_PROPERTIES.CHARSET, _HelmetConstants.TAG_PROPERTIES.HTTPEQUIV, _HelmetConstants.TAG_PROPERTIES.PROPERTY, _HelmetConstants.TAG_PROPERTIES.ITEM_PROP], propsList),\n    noscriptTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.NOSCRIPT, [_HelmetConstants.TAG_PROPERTIES.INNER_HTML], propsList),\n    onChangeClientState: getOnChangeClientState(propsList),\n    scriptTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.SCRIPT, [_HelmetConstants.TAG_PROPERTIES.SRC, _HelmetConstants.TAG_PROPERTIES.INNER_HTML], propsList),\n    styleTags: getTagsFromPropsList(_HelmetConstants.TAG_NAMES.STYLE, [_HelmetConstants.TAG_PROPERTIES.CSS_TEXT], propsList),\n    title: getTitleFromPropsList(propsList),\n    titleAttributes: getAttributesFromPropsList(_HelmetConstants.ATTRIBUTE_NAMES.TITLE, propsList)\n  };\n};\n\nvar rafPolyfill = function () {\n  var clock = Date.now();\n  return function (callback) {\n    var currentTime = Date.now();\n\n    if (currentTime - clock > 16) {\n      clock = currentTime;\n      callback(currentTime);\n    } else {\n      setTimeout(function () {\n        rafPolyfill(callback);\n      }, 0);\n    }\n  };\n}();\n\nvar cafPolyfill = function cafPolyfill(id) {\n  return clearTimeout(id);\n};\n\nvar requestAnimationFrame = typeof window !== \"undefined\" ? window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\nvar cancelAnimationFrame = typeof window !== \"undefined\" ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nvar warn = function warn(msg) {\n  return console && typeof console.warn === \"function\" && console.warn(msg);\n};\n\nvar _helmetCallback = null;\n\nvar handleClientStateChange = function handleClientStateChange(newState) {\n  if (_helmetCallback) {\n    cancelAnimationFrame(_helmetCallback);\n  }\n\n  if (newState.defer) {\n    _helmetCallback = requestAnimationFrame(function () {\n      commitTagChanges(newState, function () {\n        _helmetCallback = null;\n      });\n    });\n  } else {\n    commitTagChanges(newState);\n    _helmetCallback = null;\n  }\n};\n\nvar commitTagChanges = function commitTagChanges(newState, cb) {\n  var baseTag = newState.baseTag,\n      bodyAttributes = newState.bodyAttributes,\n      htmlAttributes = newState.htmlAttributes,\n      linkTags = newState.linkTags,\n      metaTags = newState.metaTags,\n      noscriptTags = newState.noscriptTags,\n      onChangeClientState = newState.onChangeClientState,\n      scriptTags = newState.scriptTags,\n      styleTags = newState.styleTags,\n      title = newState.title,\n      titleAttributes = newState.titleAttributes;\n  updateAttributes(_HelmetConstants.TAG_NAMES.BODY, bodyAttributes);\n  updateAttributes(_HelmetConstants.TAG_NAMES.HTML, htmlAttributes);\n  updateTitle(title, titleAttributes);\n  var tagUpdates = {\n    baseTag: updateTags(_HelmetConstants.TAG_NAMES.BASE, baseTag),\n    linkTags: updateTags(_HelmetConstants.TAG_NAMES.LINK, linkTags),\n    metaTags: updateTags(_HelmetConstants.TAG_NAMES.META, metaTags),\n    noscriptTags: updateTags(_HelmetConstants.TAG_NAMES.NOSCRIPT, noscriptTags),\n    scriptTags: updateTags(_HelmetConstants.TAG_NAMES.SCRIPT, scriptTags),\n    styleTags: updateTags(_HelmetConstants.TAG_NAMES.STYLE, styleTags)\n  };\n  var addedTags = {};\n  var removedTags = {};\n  Object.keys(tagUpdates).forEach(function (tagType) {\n    var _tagUpdates$tagType = tagUpdates[tagType],\n        newTags = _tagUpdates$tagType.newTags,\n        oldTags = _tagUpdates$tagType.oldTags;\n\n    if (newTags.length) {\n      addedTags[tagType] = newTags;\n    }\n\n    if (oldTags.length) {\n      removedTags[tagType] = tagUpdates[tagType].oldTags;\n    }\n  });\n  cb && cb();\n  onChangeClientState(newState, addedTags, removedTags);\n};\n\nvar flattenArray = function flattenArray(possibleArray) {\n  return Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\n};\n\nvar updateTitle = function updateTitle(title, attributes) {\n  if (typeof title !== \"undefined\" && document.title !== title) {\n    document.title = flattenArray(title);\n  }\n\n  updateAttributes(_HelmetConstants.TAG_NAMES.TITLE, attributes);\n};\n\nvar updateAttributes = function updateAttributes(tagName, attributes) {\n  var elementTag = document.getElementsByTagName(tagName)[0];\n\n  if (!elementTag) {\n    return;\n  }\n\n  var helmetAttributeString = elementTag.getAttribute(_HelmetConstants.HELMET_ATTRIBUTE);\n  var helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n  var attributesToRemove = [].concat(helmetAttributes);\n  var attributeKeys = Object.keys(attributes);\n\n  for (var i = 0; i < attributeKeys.length; i++) {\n    var attribute = attributeKeys[i];\n    var value = attributes[attribute] || \"\";\n\n    if (elementTag.getAttribute(attribute) !== value) {\n      elementTag.setAttribute(attribute, value);\n    }\n\n    if (helmetAttributes.indexOf(attribute) === -1) {\n      helmetAttributes.push(attribute);\n    }\n\n    var indexToSave = attributesToRemove.indexOf(attribute);\n\n    if (indexToSave !== -1) {\n      attributesToRemove.splice(indexToSave, 1);\n    }\n  }\n\n  for (var _i = attributesToRemove.length - 1; _i >= 0; _i--) {\n    elementTag.removeAttribute(attributesToRemove[_i]);\n  }\n\n  if (helmetAttributes.length === attributesToRemove.length) {\n    elementTag.removeAttribute(_HelmetConstants.HELMET_ATTRIBUTE);\n  } else if (elementTag.getAttribute(_HelmetConstants.HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n    elementTag.setAttribute(_HelmetConstants.HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n  }\n};\n\nvar updateTags = function updateTags(type, tags) {\n  var headElement = document.head || document.querySelector(_HelmetConstants.TAG_NAMES.HEAD);\n  var tagNodes = headElement.querySelectorAll(type + \"[\" + _HelmetConstants.HELMET_ATTRIBUTE + \"]\");\n  var oldTags = Array.prototype.slice.call(tagNodes);\n  var newTags = [];\n  var indexToDelete = void 0;\n\n  if (tags && tags.length) {\n    tags.forEach(function (tag) {\n      var newElement = document.createElement(type);\n\n      for (var attribute in tag) {\n        if (tag.hasOwnProperty(attribute)) {\n          if (attribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML) {\n            newElement.innerHTML = tag.innerHTML;\n          } else if (attribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT) {\n            if (newElement.styleSheet) {\n              newElement.styleSheet.cssText = tag.cssText;\n            } else {\n              newElement.appendChild(document.createTextNode(tag.cssText));\n            }\n          } else {\n            var value = typeof tag[attribute] === \"undefined\" ? \"\" : tag[attribute];\n            newElement.setAttribute(attribute, value);\n          }\n        }\n      }\n\n      newElement.setAttribute(_HelmetConstants.HELMET_ATTRIBUTE, \"true\"); // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n\n      if (oldTags.some(function (existingTag, index) {\n        indexToDelete = index;\n        return newElement.isEqualNode(existingTag);\n      })) {\n        oldTags.splice(indexToDelete, 1);\n      } else {\n        newTags.push(newElement);\n      }\n    });\n  }\n\n  oldTags.forEach(function (tag) {\n    return tag.parentNode.removeChild(tag);\n  });\n  newTags.forEach(function (tag) {\n    return headElement.appendChild(tag);\n  });\n  return {\n    oldTags: oldTags,\n    newTags: newTags\n  };\n};\n\nvar generateElementAttributesAsString = function generateElementAttributesAsString(attributes) {\n  return Object.keys(attributes).reduce(function (str, key) {\n    var attr = typeof attributes[key] !== \"undefined\" ? key + \"=\\\"\" + attributes[key] + \"\\\"\" : \"\" + key;\n    return str ? str + \" \" + attr : attr;\n  }, \"\");\n};\n\nvar generateTitleAsString = function generateTitleAsString(type, title, attributes, encode) {\n  var attributeString = generateElementAttributesAsString(attributes);\n  var flattenedTitle = flattenArray(title);\n  return attributeString ? \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeString + \">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\" : \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\";\n};\n\nvar generateTagsAsString = function generateTagsAsString(type, tags, encode) {\n  return tags.reduce(function (str, tag) {\n    var attributeHtml = Object.keys(tag).filter(function (attribute) {\n      return !(attribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || attribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT);\n    }).reduce(function (string, attribute) {\n      var attr = typeof tag[attribute] === \"undefined\" ? attribute : attribute + \"=\\\"\" + encodeSpecialCharacters(tag[attribute], encode) + \"\\\"\";\n      return string ? string + \" \" + attr : attr;\n    }, \"\");\n    var tagContent = tag.innerHTML || tag.cssText || \"\";\n    var isSelfClosing = _HelmetConstants.SELF_CLOSING_TAGS.indexOf(type) === -1;\n    return str + \"<\" + type + \" \" + _HelmetConstants.HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeHtml + (isSelfClosing ? \"/>\" : \">\" + tagContent + \"</\" + type + \">\");\n  }, \"\");\n};\n\nvar convertElementAttributestoReactProps = function convertElementAttributestoReactProps(attributes) {\n  var initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(attributes).reduce(function (obj, key) {\n    obj[_HelmetConstants.REACT_TAG_MAP[key] || key] = attributes[key];\n    return obj;\n  }, initProps);\n};\n\nvar convertReactPropstoHtmlAttributes = function convertReactPropstoHtmlAttributes(props) {\n  var initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return Object.keys(props).reduce(function (obj, key) {\n    obj[_HelmetConstants.HTML_TAG_MAP[key] || key] = props[key];\n    return obj;\n  }, initAttributes);\n};\n\nvar generateTitleAsReactComponent = function generateTitleAsReactComponent(type, title, attributes) {\n  var _initProps; // assigning into an array to define toString function on it\n\n\n  var initProps = (_initProps = {\n    key: title\n  }, _initProps[_HelmetConstants.HELMET_ATTRIBUTE] = true, _initProps);\n  var props = convertElementAttributestoReactProps(attributes, initProps);\n  return [_react2.default.createElement(_HelmetConstants.TAG_NAMES.TITLE, props, title)];\n};\n\nvar generateTagsAsReactComponent = function generateTagsAsReactComponent(type, tags) {\n  return tags.map(function (tag, i) {\n    var _mappedTag;\n\n    var mappedTag = (_mappedTag = {\n      key: i\n    }, _mappedTag[_HelmetConstants.HELMET_ATTRIBUTE] = true, _mappedTag);\n    Object.keys(tag).forEach(function (attribute) {\n      var mappedAttribute = _HelmetConstants.REACT_TAG_MAP[attribute] || attribute;\n\n      if (mappedAttribute === _HelmetConstants.TAG_PROPERTIES.INNER_HTML || mappedAttribute === _HelmetConstants.TAG_PROPERTIES.CSS_TEXT) {\n        var content = tag.innerHTML || tag.cssText;\n        mappedTag.dangerouslySetInnerHTML = {\n          __html: content\n        };\n      } else {\n        mappedTag[mappedAttribute] = tag[attribute];\n      }\n    });\n    return _react2.default.createElement(type, mappedTag);\n  });\n};\n\nvar getMethodsForTag = function getMethodsForTag(type, tags, encode) {\n  switch (type) {\n    case _HelmetConstants.TAG_NAMES.TITLE:\n      return {\n        toComponent: function toComponent() {\n          return generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode);\n        },\n        toString: function toString() {\n          return generateTitleAsString(type, tags.title, tags.titleAttributes, encode);\n        }\n      };\n\n    case _HelmetConstants.ATTRIBUTE_NAMES.BODY:\n    case _HelmetConstants.ATTRIBUTE_NAMES.HTML:\n      return {\n        toComponent: function toComponent() {\n          return convertElementAttributestoReactProps(tags);\n        },\n        toString: function toString() {\n          return generateElementAttributesAsString(tags);\n        }\n      };\n\n    default:\n      return {\n        toComponent: function toComponent() {\n          return generateTagsAsReactComponent(type, tags);\n        },\n        toString: function toString() {\n          return generateTagsAsString(type, tags, encode);\n        }\n      };\n  }\n};\n\nvar mapStateOnServer = function mapStateOnServer(_ref) {\n  var baseTag = _ref.baseTag,\n      bodyAttributes = _ref.bodyAttributes,\n      encode = _ref.encode,\n      htmlAttributes = _ref.htmlAttributes,\n      linkTags = _ref.linkTags,\n      metaTags = _ref.metaTags,\n      noscriptTags = _ref.noscriptTags,\n      scriptTags = _ref.scriptTags,\n      styleTags = _ref.styleTags,\n      _ref$title = _ref.title,\n      title = _ref$title === undefined ? \"\" : _ref$title,\n      titleAttributes = _ref.titleAttributes;\n  return {\n    base: getMethodsForTag(_HelmetConstants.TAG_NAMES.BASE, baseTag, encode),\n    bodyAttributes: getMethodsForTag(_HelmetConstants.ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n    htmlAttributes: getMethodsForTag(_HelmetConstants.ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n    link: getMethodsForTag(_HelmetConstants.TAG_NAMES.LINK, linkTags, encode),\n    meta: getMethodsForTag(_HelmetConstants.TAG_NAMES.META, metaTags, encode),\n    noscript: getMethodsForTag(_HelmetConstants.TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n    script: getMethodsForTag(_HelmetConstants.TAG_NAMES.SCRIPT, scriptTags, encode),\n    style: getMethodsForTag(_HelmetConstants.TAG_NAMES.STYLE, styleTags, encode),\n    title: getMethodsForTag(_HelmetConstants.TAG_NAMES.TITLE, {\n      title: title,\n      titleAttributes: titleAttributes\n    }, encode)\n  };\n};\n\nexports.convertReactPropstoHtmlAttributes = convertReactPropstoHtmlAttributes;\nexports.handleClientStateChange = handleClientStateChange;\nexports.mapStateOnServer = mapStateOnServer;\nexports.reducePropsToState = reducePropsToState;\nexports.requestAnimationFrame = requestAnimationFrame;\nexports.warn = warn;","'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar shallowEqual = _interopDefault(require('shallowequal'));\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient, mapStateOnServer) {\n  if (typeof reducePropsToState !== 'function') {\n    throw new Error('Expected reducePropsToState to be a function.');\n  }\n\n  if (typeof handleStateChangeOnClient !== 'function') {\n    throw new Error('Expected handleStateChangeOnClient to be a function.');\n  }\n\n  if (typeof mapStateOnServer !== 'undefined' && typeof mapStateOnServer !== 'function') {\n    throw new Error('Expected mapStateOnServer to either be undefined or a function.');\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (typeof WrappedComponent !== 'function') {\n      throw new Error('Expected WrappedComponent to be a React component.');\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n\n      if (SideEffect.canUseDOM) {\n        handleStateChangeOnClient(state);\n      } else if (mapStateOnServer) {\n        state = mapStateOnServer(state);\n      }\n    }\n\n    var SideEffect = /*#__PURE__*/function (_Component) {\n      _inheritsLoose(SideEffect, _Component);\n\n      function SideEffect() {\n        return _Component.apply(this, arguments) || this;\n      } // Try to use displayName of wrapped component\n      // Expose canUseDOM so tests can monkeypatch it\n\n\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      SideEffect.rewind = function rewind() {\n        if (SideEffect.canUseDOM) {\n          throw new Error('You may only call rewind() on the server. Call peek() to read the current state.');\n        }\n\n        var recordedState = state;\n        state = undefined;\n        mountedInstances = [];\n        return recordedState;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n        return !shallowEqual(nextProps, this.props);\n      };\n\n      _proto.componentWillMount = function componentWillMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return React__default.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(React.Component);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    _defineProperty(SideEffect, \"canUseDOM\", canUseDOM);\n\n    return SideEffect;\n  };\n}\n\nmodule.exports = withSideEffect;","//\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || ret === void 0 && valueA !== valueB) {\n      return false;\n    }\n  }\n\n  return true;\n};","// The standard metadata will be overwritten dynamically (articles, authorData)\nexport const metadata = {\n  defaultTitle: 'Home - Mathcamp Chronicle',\n  titleTemplate: '%s - Mathcamp Chronicle',\n  author: 'Mathcamp Chronicle, Virtual MathCampus',\n  keywords: '',\n  description: `Mathcamp's best and -only- newspaper`,\n  facebookId: 'fb:page_id',\n  twitterId: 'twitter:account_id',\n  url: 'https://mathcampchronicle.github.io'\n}\n","export default __webpack_public_path__ + \"static/li-logo-48d94245b2a9ebecd6d512f2814920af.jpg\";","import React from 'react'\nimport {Link, StaticQuery, graphql} from 'gatsby'\nimport logo from '../../resources/li-logo.jpg'\n\n// query the available Pages, and create he navigation bar in the header (exclude \"Home\")\nconst renderNavItems = () => (\n  <StaticQuery\n    query={graphql`\n      query HeadingQuery {\n        allPublications(filter: {publication: {systemdata: {contentType: {eq: \"page\"}}}}) {\n          edges {\n            node {\n              extra {\n                slug\n              }\n              publication {\n                metadata {\n                  title\n                }\n              }\n            }\n          }\n        }\n      }\n    `}\n    render={data =>\n      data.allPublications.edges.map(\n        page =>\n          page.node.publication.metadata.title !== 'Home' && (\n            <div className=\"main-nav__item\" key={page.node.extra.slug}>\n              <Link to={\"/\"+page.node.extra.slug} activeStyle={{fontWeight: 'bold'}}>\n                {page.node.publication.metadata.title}\n              </Link>\n            </div>\n          )\n      )\n    }\n  />\n)\n\nconst Header = props => (\n  <header className=\"page-head\" role=\"banner\" style={{marginBottom: '0px'}}>\n    <div>\n      <div className=\"logo\">\n        <Link to=\"/\">\n          <img src={logo} alt=\"logo\" />\n        </Link>\n      </div>\n      <div className=\"tagline\">\n\t<center>\n\tMathcamp's best and -only- newspaper!\n\t</center>\n      </div>\n      <nav className=\"meta-nav\">\n        <div className=\"meta-nav__item\">\n        </div>\n        <div className=\"meta-nav__item meta-nav__item--highlight\">\n        </div>\n      </nav>\n      <div className=\"nav-container\">\n        <nav className=\"main-nav\" role=\"navigation\">\n          {renderNavItems()}\n        </nav>\n      </div>\n    </div>\n  </header>\n)\n\nexport default Header\n","import React from 'react'\n\nconst footer = () => (\n  <footer className=\"page-foot\" role=\"footer\">\n    <nav className=\"page-foot__wrapper\">\n      <ul className=\"footer-links footer-links--left-aligned\">\n        <li> 2021 MathCamp Chronicle</li>\n        <li>\n          <a href=\"mailto:\">Contact us</a>\n        </li>\n      </ul>\n      <ul className=\"footer-links footer-links--right-aligned\">\n      </ul>\n    </nav>\n  </footer>\n)\n\nexport default footer\n","export default __webpack_public_path__ + \"static/favicon-ae7e73802fa4d5dcce99d30f5f0a7403.png\";","const Photoswipe = require('photoswipe')\n\nconst PhotoSwipeUiDefault = require('photoswipe/dist/photoswipe-ui-default.js')\n\nexport const initiateVideoTeasers = () => {\n  const videoTeasers = document.querySelectorAll('.teaser-video')\n  for (const videoTeaserEl of videoTeasers) {\n    const teaserHeroEl = videoTeaserEl.querySelector('.teaser-hero')\n    const teaserHeroTitleEl = videoTeaserEl.querySelector('.teaser-hero__title')\n    const teaserHeroImageEl = videoTeaserEl.querySelector('.teaser-hero__header')\n\n    const teaserCardEl = videoTeaserEl.querySelector('.teaser-card')\n    const teaserTitleEl = videoTeaserEl.querySelector('.teaser-card__title')\n    const teaserImageEl = videoTeaserEl.querySelector('.teaser-card__image')\n\n    const target = teaserHeroEl || teaserCardEl\n    const imageEl = teaserHeroImageEl || teaserImageEl\n    const titleEl = teaserHeroTitleEl || teaserTitleEl\n    target &&\n      target.addEventListener('click', function (e) {\n        e = e || window.event\n        e.preventDefault ? e.preventDefault() : (e.returnValue = false)\n        openGallery(videoTeaserEl, imageEl, titleEl)\n      })\n  }\n}\n\nconst openGallery = (videoTeaserEl, teaserImageEl, teaserTitleEl) => {\n  const pswpEl = videoTeaserEl.querySelector('.pswp')\n  const options = getGalleryOptions(videoTeaserEl, teaserImageEl)\n  const imageItem = getImageItem(teaserImageEl, teaserTitleEl)\n\n  const gallery = new Photoswipe(pswpEl, PhotoSwipeUiDefault, [imageItem], options)\n  gallery.listen('initialZoomInEnd', function () {\n    gallery.items.splice(0, 1, {\n      html: getVideoHtml(videoTeaserEl),\n      title: imageItem.title\n    })\n    gallery.invalidateCurrItems()\n    gallery.updateSize(true)\n    adjustVideoStyles(gallery, imageItem)\n  })\n  gallery.listen('close', function () {\n    gallery.items.splice(0, 1, imageItem)\n    gallery.invalidateCurrItems()\n    gallery.updateSize(true)\n  })\n  gallery.init()\n}\n\nconst getGalleryOptions = teaserImageEl => {\n  const options = {\n    index: 0,\n    history: false,\n    focus: false,\n    zoomEl: false,\n    loop: false,\n    closeOnScroll: false,\n    showAnimationDuration: 333,\n    getThumbBoundsFn: () => {\n      if (!teaserImageEl) return {}\n      const pageYScroll = window.pageYOffset || document.documentElement.scrollTop\n      const rect = teaserImageEl.getBoundingClientRect()\n      return {x: rect.left, y: rect.top + pageYScroll, w: rect.width}\n    }\n  }\n  return options\n}\n\nconst getImageItem = (teaserImageEl, teaserTitleEl) => {\n  const isImgEl = teaserImageEl.tagName === 'IMG'\n  const imageSrc = isImgEl\n    ? teaserImageEl.getAttribute('src')\n    : teaserImageEl.style.backgroundImage.replace(/(url\\(|\\)|\")/g, '')\n  const rect = !isImgEl && teaserImageEl.getBoundingClientRect()\n  const imageWidth = isImgEl ? teaserImageEl.naturalWidth : rect.width\n  const imageHeight = isImgEl ? teaserImageEl.naturalHeight : rect.height\n  const item = {\n    src: imageSrc,\n    w: imageWidth,\n    h: imageHeight,\n    title: teaserTitleEl ? teaserTitleEl.innerHTML : ''\n  }\n  return item\n}\nconst getVideoHtml = videoTeaserEl => {\n  if (!videoTeaserEl) return ''\n  const videoMarkupContainer = videoTeaserEl.querySelector('.teaser-video__markup > div')\n  const videoHtml = (videoMarkupContainer && videoMarkupContainer.innerHTML) || ''\n  return unescape(videoHtml)\n}\n\nconst adjustVideoStyles = (gallery, initialItem) => {\n  const currentItem = gallery.items[0]\n  if (currentItem) {\n    const containerEl = currentItem.container\n    if (containerEl) {\n      const videoEl = containerEl.children[0]\n      if (videoEl) {\n        if (videoEl.tagName === 'VIDEO') {\n          centerVideo(containerEl)\n          videoEl.style.objectFit = 'cover'\n          videoEl.poster = initialItem.src\n        } else if (videoEl.tagName === 'IFRAME') {\n          centerVideo(containerEl)\n        } else {\n          videoEl.style.marginTop = '56px'\n        }\n      }\n    }\n  }\n}\n\nconst centerVideo = containerEl => {\n  const flex = 'display:flex;flex-direction:column;'\n  const center = 'align-items:center;justify-content:center;'\n  containerEl.style = `${flex}${center}`\n}\n","const Photoswipe = require('photoswipe')\nconst PhotoSwipeUiDefault = require('photoswipe/dist/photoswipe-ui-default.js')\n\nexport const initiateGalleryTeasers = () => {\n  const galleryTeasers = document.querySelectorAll('.teaser-gallery')\n  // ignore resrc for gallery images\n  // we need fullsize images for gallery\n  for (const galleryTeaserEl of galleryTeasers) {\n    const images = galleryTeaserEl.querySelectorAll('.teaser-gallery__images > figure > img')\n    for (const imageEl of images) {\n      if (imageEl.classList) imageEl.classList.remove('resrc')\n      else imageEl.className = imageEl.className.replace('resrc', '')\n      const dataSrc = imageEl.getAttribute('data-src')\n      if (dataSrc) imageEl.setAttribute('src', dataSrc)\n    }\n  }\n  registerClickListeners(galleryTeasers)\n}\n\nconst registerClickListeners = galleryTeasers => {\n  for (const galleryTeaserEl of galleryTeasers) {\n    const teaserHeroEl = galleryTeaserEl.querySelector('.teaser-hero')\n    const teaserHeroImageEl = galleryTeaserEl.querySelector('.teaser-hero__header')\n    const teaserCardEl = galleryTeaserEl.querySelector('.teaser-card')\n    const teaserImageEl = galleryTeaserEl.querySelector('.teaser-card__image')\n\n    const target = teaserHeroEl || teaserCardEl\n    const imageEl = teaserHeroImageEl || teaserImageEl\n    target &&\n      target.addEventListener('click', function (e) {\n        e = e || window.event\n        e.preventDefault ? e.preventDefault() : (e.returnValue = false)\n        openGallery(galleryTeaserEl, imageEl)\n      })\n  }\n}\nconst openGallery = (galleryTeaserEl, teaserImageEl) => {\n  const imageContainerEl = galleryTeaserEl.querySelector('.teaser-gallery__images')\n  const pswpEl = galleryTeaserEl.querySelector('.pswp')\n\n  const items = extractImageItems(imageContainerEl)\n  if (!items.length) return\n\n  const options = getGalleryOptions(galleryTeaserEl, teaserImageEl)\n  const gallery = new Photoswipe(pswpEl, PhotoSwipeUiDefault, items, options)\n  gallery.listen('close', function () {\n    if (gallery.getCurrentIndex() !== 0) {\n      gallery.goTo(0)\n    }\n  })\n  gallery.init()\n}\n\nconst extractImageItems = imageContainerEl => {\n  const items = []\n  if (!imageContainerEl) return items\n\n  const children = imageContainerEl.childNodes\n  for (const figureEl of children) {\n    const imageEl = figureEl.children[0]\n    const captionEl = figureEl.children.length > 1 && figureEl.children[1]\n    const item = {\n      src: imageEl.getAttribute('src'),\n      w: imageEl.naturalWidth,\n      h: imageEl.naturalHeight,\n      title: captionEl ? captionEl.innerHTML : ''\n    }\n    items.push(item)\n  }\n\n  return items\n}\n\nconst getGalleryOptions = (galleryTeaserEl, teaserImageEl) => {\n  const options = {\n    index: 0,\n    history: false,\n    focus: false,\n    // galleryUID: galleryTeaserEl.getAttribute('data-uuid'),\n    getThumbBoundsFn: function (index) {\n      if (!teaserImageEl) return {}\n      const pageYScroll = window.pageYOffset || document.documentElement.scrollTop\n      const rect = teaserImageEl.getBoundingClientRect()\n      return {x: rect.left, y: rect.top + pageYScroll, w: rect.width}\n    }\n  }\n  return options\n}\n","import React from 'react'\nimport {navigate} from 'gatsby'\nimport Helmet from 'react-helmet'\nimport Header from '../header'\nimport Footer from '../footer'\nimport favicon from '../../resources/favicon.png'\nimport '../../resources/source/stylesheets/living-times.scss'\nimport {metadata} from '../../../config.js'\n\nimport {initiateVideoTeasers} from '../helpers/initVideoTeasers'\nimport {initiateGalleryTeasers} from '../helpers/initGalleryTeasers'\nimport 'photoswipe/dist/photoswipe.css'\nimport 'photoswipe/dist/default-skin/default-skin.css'\n\n// Set a basic set of SEO data\n// articles and author-pages will over overwrite some of them\nclass Layout extends React.Component {\n  componentDidMount () {\n    // initiate the Gallery/Video-Teasers\n    initiateVideoTeasers()\n    initiateGalleryTeasers()\n\n    // @TODO This is a hacky approach.\n    // Livingdocs will send a bunch of <a/> tags, we will addEventListeners for those.\n    // We don't want to reload the page, because we lose a big chunk of performance.\n    // that's why we swap out the <a/> behaviour with the gatsby \"navigate\", for internal links.\n    for (const anchorTag of document.body.getElementsByTagName('a')) {\n      this.internalLink(anchorTag) && anchorTag.addEventListener('click', this.handleClick)\n    }\n  }\n  // remove event listerns for all <a> tags\n  componentWillUnmount () {\n    for (const anchorTag of document.body.getElementsByTagName('a')) {\n      this.internalLink(anchorTag) && anchorTag.removeEventListener('click', this.handleClick)\n    }\n  }\n\n  internalLink = link => link.host === window.location.host\n\n  handleClick = event => {\n    event.preventDefault()\n    const path = new URL(event.currentTarget.href).pathname\n    navigate(path)\n  }\n  render () {\n    return (\n      <React.Fragment>\n        <Helmet defaultTitle={metadata.defaultTitle} titleTemplate={metadata.titleTemplate}>\n          <meta name=\"author\" content={metadata.author} />\n          <meta name=\"description\" content={metadata.description} />\n          <meta name=\"keywords\" content={metadata.keywords} />\n          <meta name=\"viewport\" content=\"width=device-width\" />\n          <html lang=\"en\" />\n          <meta httpEquiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n          <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n          <meta httpEquiv=\"Content-Language\" content=\"en\" />\n          <meta property={metadata.facebookId} content=\"id\" />\n          <meta property={metadata.twitterId} content=\"id\" />\n\n          <link title=\"timeline-styles\" rel=\"shortcut icon\" type=\"image/png\" href={favicon} />\n          {/* <link title=\"timeline-styles\" type=\"text/css\" href={css.toString()} /> */}\n          <noscript>Please enable Javascript</noscript>\n        </Helmet>\n        <Header />\n        <div>{this.props.children}</div>\n        <Footer />\n      </React.Fragment>\n    )\n  }\n}\nexport default Layout\n"],"sourceRoot":""}